(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1225:function(e,t,n){},1226:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"fetchInterfaceConfig",function(){return Jr}),n.d(a,"updateDashboard",function(){return qr}),n.d(a,"createCell",function(){return Hr}),n.d(a,"deleteCell",function(){return Gr}),n.d(a,"fetchRobotModels",function(){return Wr}),n.d(a,"deleteRobotModelPart",function(){return Zr}),n.d(a,"deleteRobotModel",function(){return Kr}),n.d(a,"createRobotModel",function(){return Qr}),n.d(a,"fetchESIPath",function(){return Yr}),n.d(a,"fetchConfigXml",function(){return $r});var r=n(0),o=n.n(r),c=n(21);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(112),s=n(27),i=n(8),u=n(17),d=n(11),m=n(9),p=n(26),b=n(10),f=n(20),h=n(6),v=(n(545),n(13)),E=n.n(v),g=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).renderDashboard=function(e){var t=e.getPrefixCls,a=n.props,r=(a.dashboard,t("dashboard-empty",a.prefixCls));return o.a.createElement("div",{className:"".concat(r)},"\u5f53\u524d\u9762\u677f\u6ca1\u6709\u4efb\u4f55\u529f\u80fd\u5355\u5143")},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderDashboard)}}]),t}(r.Component),O=n(321),C=n.n(O),y=n(96),j=n.n(y),M=n(229),S=n.n(M),x=n(19),_=n.n(x),R=j.a.Item,P=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleEditCell=function(){(0,n.props.onEdit)()},n.handleDeleteCell=function(){var e=n.props;(0,e.onDelete)(e.cell.i)},n.handleCloneCell=function(){var e=n.props,t=e.onClone,a=e.cell;(a=Object(h.a)({},a)).y=a.y+1,t(a)},n.editMenu=function(e){var t=Object(p.a)(n),a=o.a.createElement(j.a,{onClick:function(e){switch(e.key){case"configure":t.handleEditCell();break;case"clone":t.handleCloneCell();break;case"delete":t.handleDeleteCell()}}},o.a.createElement(R,{key:"configure"},"Configure"),o.a.createElement(R,{key:"clone"},"Clone"),o.a.createElement(R,{key:"delete"},"Delete"));return o.a.createElement(S.a,{overlay:a,trigger:["click"],placement:"bottomRight",className:"".concat(e,"--button"),overlayClassName:"".concat(e,"--dropdown-menu"),getPopupContainer:t.props.getPopupContainer},o.a.createElement(_.a,{type:"edit"}))},n.renderMenu=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls;if(a.isEditable){var c=t("layout-cell-context",r);return o.a.createElement("div",{className:"".concat(c)},n.editMenu(c))}},n.state={subMenuIsOpen:!1},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderMenu)}}]),t}(r.Component),w=n(15),N=n.n(w),k=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).renderLayoutCellHeader=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=a.isEditable,l=t("layout-cell-header",r),s=t("layout-cell",r),i="".concat(s,"--draggable"),u="".concat(l,"--draggable"),d={};return d[i]=c,d[u]=c,o.a.createElement("div",{className:N()("".concat(l),Object(h.a)({},d))},n.cellName(l),n.headingBar(l))},n.cellName=function(e){var t=n.props.cellName,a={};a["".concat(e,"-name__default")]=!t||""===t.trim();var r=N()("".concat(e,"-name"),Object(h.a)({},a));return o.a.createElement("span",{className:r},t||"\u672a\u547d\u540d")},n.headingBar=function(e){if(n.props.isEditable)return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"".concat(e,"--header-bar")}),o.a.createElement("div",{className:"".concat(e,"--header-dragger")}))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderLayoutCellHeader)}}]),t}(r.Component),I=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).renderLayoutCell=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=a.isEditable,l=a.cell,s=a.onCloneCell,i=a.onCellUpdate,u=a.onDeleteCell,d=a.toggleVisType,m=a.children,b=Object(p.a)(n),f=t("layout-cell",r);return o.a.createElement("div",{className:"".concat(f),ref:function(e){b.container=e}},o.a.createElement(P,{cell:l,isEditable:c,dataExists:!1,onClone:s,onDelete:u,onCellUpdate:i,toggleVisType:d,visType:"",getPopupContainer:function(){return b.container}}),o.a.createElement(k,{cellName:l.name,isEditable:c}),o.a.createElement("div",{className:"".concat(f,"-body")},m))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return console.log("LayoutCell render()"),o.a.createElement(v.ConfigConsumer,null,this.renderLayoutCell)}}]),t}(r.Component),T=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).renderCommandButton=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=(a.cell,t("command-button",r));return o.a.createElement("div",{className:"".concat(c)},o.a.createElement(_.a,{type:"deployment-unit",style:{fontSize:50}}))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderCommandButton)}}]),t}(r.Component),F=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).renderLogger=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=(a.cell,t("logger",r));return o.a.createElement("div",{className:"".concat(c)},o.a.createElement(_.a,{type:"area-chart",style:{fontSize:50}}))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderLogger)}}]),t}(r.Component),A=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).renderLogger=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=a.cell,l=t("unknown-cell-type",r);return o.a.createElement("div",{className:"".concat(l)},o.a.createElement("div",null,"\u4e0d\u652f\u6301\u7684\u7ec4\u4ef6\u7c7b ",c.type))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderLogger)}}]),t}(r.Component),L=n(322),D=n.n(L),U=n(235),B=n.n(U),X=Date.now();function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(h.a)({type:e},t)}var z="LOAD_INTERFACE_CONFIG",J={request:function(){return V("INTERFACE_CONFIG_FETCH_REQUEST",{})},success:function(e){return V("INTERFACE_CONFIG_FETCH_SUCCESS",{response:e})},failure:function(e){return V("INTERFACE_CONFIG_FETCH_FAILURE",{error:e})}},q="UPDATE_DASHBOARD",H={request:function(e){return V("DASHBOARD_UPDATE_REQUEST",{dashboard:e})},success:function(e){return V("DASHBOARD_UPDATE_SUCCESS",{dashboard:e})},failure:function(e){return V("DASHBOARD_UPDATE_FAILURE",{error:e})}},G=function(e){return V(q,{dashboard:e})},W="CREATE_CELL",Z={request:function(e){return V("CELL_CREATE_REQUEST",{dashboardId:e})},success:function(e,t){return V("CELL_CREATE_SUCCESS",{dashboardId:e,cell:t})},failure:function(e){return V("CELL_CREATE_FAILURE",{error:e})}},K=function(e,t){return V(W,{dashboardId:e,cell:t})},Q="DELETE_CELL",Y={request:function(e,t){return V("CELL_DELETE_REQUEST",{dashboardId:e,cellId:t})},success:function(e,t){return V("CELL_DELETE_SUCCESS",{dashboardId:e,cell:t})},failure:function(e){return V("CELL_DELETE_FAILURE",{error:e})}},$="UPDATE_ROUTER_STATE",ee="NAVIGATE",te=function(e){return V(ee,{pathname:e})},ne="START_WEBSOCKET",ae="STOP_WEBSOCKET",re="SEND_CMD",oe="CMD_RESPONSE",ce=function(e){return V(ne,{url:e})},le=function(){return V("WEBSOCKET_CONNECTED")},se=function(){return V("WEBSOCKET_DISCONNECTED")},ie=function(e){return V("WEBSOCKET_ERROR",{error:e})},ue=function(e,t,n){var a=Date.now();return a<=X?X+=1:X=a,V(re,{cmd:e,id:X,channel:t,callback:n})},de=function(e){return V("UPDATE_MOTION_VEL_PERCENT",{motionVelPercent:e})},me=function(e){return V("DELETE_RESULT_BY_CHANNEL",{channel:e})},pe="LOAD_ROBOT_MODELS",be={request:function(){return V("ROBOT_MODELS_FETCH_REQUEST",{})},success:function(e){return V("ROBOT_MODELS_FETCH_SUCCESS",{robotModels:e})},failure:function(e){return V("ROBOT_MODELS_FETCH_FAILURE",{error:e})}},fe="DELETE_ROBOT_MODEL_PART",he={request:function(){return V("ROBOT_MODEL_PART_DELETE_REQUEST",{})},success:function(e){return V("ROBOT_MODEL_PART_DELETE_SUCCESS",{model:e})},failure:function(e){return V("ROBOT_MODEL_PART_DELETE_FAILURE",{error:e})}},ve="DELETE_ROBOT_MODEL",Ee={request:function(){return V("ROBOT_MODEL_DELETE_REQUEST",{})},success:function(e){return V("ROBOT_MODEL_DELETE_SUCCESS",{model:e})},failure:function(e){return V("ROBOT_MODEL_DELETE_FAILURE",{error:e})}},ge="CREATE_ROBOT_MODEL",Oe={request:function(e){return V("ROBOT_MODEL_CREATE_REQUEST",{model:e})},success:function(e){return V("ROBOT_MODEL_CREATE_SUCCESS",{model:e})},failure:function(e){return V("ROBOT_MODEL_CREATE_FAILURE",{error:e})}},Ce={request:function(){return V("UPLOAD_ESI_FILE_REQUEST")},success:function(e){return V("UPLOAD_ESI_FILE_SUCCESS",{path:e})},failure:function(e){return V("UPLOAD_ESI_FILE_FAILURE",{error:e})}},ye="LOAD_ESI_PATH",je={request:function(){return V("ESI_PATH_FETCH_REQUEST")},success:function(e){return V("ESI_PATH_FETCH_SUCCESS",{path:e})},failure:function(e){return V("ESI_PATH_FETCH_FAILURE",{error:e})}},Me="LOAD_CONFIG_XML",Se={request:function(){return V("CONFIG_XML_FETCH_REQUEST")},success:function(e){return V("CONFIG_XML_FETCH_SUCCESS",{xml:e})},failure:function(e){return V("CONFIG_XML_FETCH_FAILURE",{error:e})}},xe=n(30),_e=n(230),Re=n.n(_e),Pe=n(238),we=n.n(Pe),Ne=n(54),ke=n.n(Ne),Ie=Object(xe.b)(Re.a,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return e+"-"+JSON.stringify(t)},"")}),Te=function(e,t){return e.robot.resultsByChannel[t.cell.i]},Fe=function(e,t){return e.robot.resultsByChannel[t]},Ae=(Ie(Te,function(e){return e}),Ie(Fe,function(e){return e})),Le=Ie(function(e){return Object.keys(e.robot.resultsByChannel)},function(e){return e}),De=function(e,t,n){var a=Fe(e,t);if(a&&a[n])return we()(a[n])?[new Date(a.id),[a[n]]]:[new Date(a.id),a[n]]},Ue=(Object(xe.a)(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.ai},function(e){return e}),Object(xe.a)(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.di},function(e){return e}),Ie(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.end_pe},function(e){return e})),Be=(Object(xe.a)(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.end_pq},function(e){return e}),Object(xe.a)(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.motion_acc},function(e){return e}),Ie(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.motion_pos},function(e){return e})),Xe=Ie(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.motion_state},function(e){return e}),Ve=(Ie(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.motion_toq},function(e){return e}),Ie(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.part_pq},function(e){return e})),ze=Ie(Ve,function(e){return e&&e.join("&")}),Je=Object(xe.a)(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.slave_al_state},function(e){return e}),qe=(Ie(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.slave_link_num},function(e){return e}),Ie(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.slave_online_state},function(e){return e})),He=function(e){return e.robot.toolIds},Ge=function(e){return e.robot.currentCoordinateId},We=function(e){return e.robot.currentMotionVelPercent||0},Ze=function(e){return e.robot.xml},Ke=function(e){return e.router.pathname},Qe=function(e){return e.config.dashboards},Ye=Object(xe.a)(Qe,function(e){return e&&e.map(function(e){return{name:e.name,i:e.i,editable:e.editable}})}),$e=function(e,t){var n=Qe(e);if(n)return n.filter(function(e){return e.i===t})[0]},et=Object(xe.a)(Qe,Ke,function(e,t){if("/"!==t&&-1!==t.indexOf("/dashboards/")){var n=t.replace("/dashboards/",""),a=e&&e.filter(function(e){return e.i===n})[0];if(a)return a}return e&&e[0]}),tt=(Object(xe.a)(Ye,Ke,function(e,t){if("/"!==t&&-1!==t.indexOf("/dashboards/")){var n=t.replace("/dashboards/",""),a=e&&e.filter(function(e){return e.i===n})[0];if(a)return a.i}return e&&e[0].i}),Object(xe.a)(Ye,Ke,function(e,t){if("/"!==t&&-1!==t.indexOf("/dashboards/")){var n=t.replace("/dashboards/",""),a=e&&e.filter(function(e){return e.i===n})[0];if(a)return a}return e&&e[0]})),nt=function(e){return e.robot.websocketConnected},at=function(e){var t=e.config;return t.ws&&t.ws.url},rt=function(e){var t=e.config;return t.ws&&t.ws.commandSendInterval},ot=function(e){var t=e.config;return t.ws&&t.ws.getInterval},ct=function(e){var t=e.config;return t.ws&&t.ws.commandSendDelay},lt=function(e){var t=e.config;return t.ws&&t.ws.unityUpdateInterval},st=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).renderLogger=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=(a.cell,t("view3d",r));return o.a.createElement("div",{className:"".concat(c),ref:function(e){return n.container=e}},o.a.createElement(D.a,{unityContent:n.unityContent}))},n.unityContent=new L.UnityContent("/unity/8.json","/unity/UnityLoader.js"),n.state={},n.unityContent.on("progress",function(e){n.setState({progression:e}),1===e&&(n.unityContent.send("empt","GetUrlFromJs",window.location.origin+"/"),n.props.xml&&n.unityContent.send("empt","GetRobotXmlFromJS",n.props.xml),n.unityContent.send("empt","SetCameraBackGround","0&0&0"),n.unityContent.send("empt","SetFPS","20"))}),n.throttleSend=B()(n.unityContent.send.bind(n.unityContent),n.props.unityUpdateInterval),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.deleteResultByChannel("xml"),this.props.loadConfigXml()}},{key:"componentWillUnmount",value:function(){this.unityContent.remove("progress")}},{key:"shouldComponentUpdate",value:function(e,t,n){var a=this;return e.xml!==this.props.xml&&e.xml&&1===this.state.progression&&this.unityContent.send("empt","GetRobotXmlFromJS",e.xml),e.partPQ!==this.props.partPQ&&e.partPQ&&1===this.state.progression&&setTimeout(function(){a.throttleSend("empt","ReceiveDataFromJs",e.partPQ)},0),!1}},{key:"unityProgress",value:function(e,t){e.Module&&this.setState({progress:e.progress})}},{key:"componentDidMount",value:function(){console.error("View3D componentDidMount()")}},{key:"render",value:function(){return console.error("View3D render()"),o.a.createElement(v.ConfigConsumer,null,this.renderLogger)}}]),t}(r.Component);var it=Object(s.b)(function(e){return{xml:Ze(e),partPQ:ze(e),unityUpdateInterval:lt(e)}},{loadConfigXml:function(){return V(Me)},deleteResultByChannel:me})(st),ut=n(1),dt=n.n(ut),mt=n(23),pt=n.n(mt),bt=n(24),ft=n.n(bt),ht=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).name="\u672a\u547d\u4ee4\u7ec4\u4ef6",n.width=12,n.height=9,n.interval=null,n.timeout=null,n.sendCmd=function(e,t){var a=n.props,r=a.sendCmd,o=a.cell;r(e,t||o.i)},n.getSendCmdFn=function(e,t){return function(){n.sendCmd(e,t)}.bind(Object(p.a)(n))},n.getOnMouseDownFn=function(e,t){return function(){n.interval&&clearInterval(n.interval);var a=n.props,r=a.commandSendInterval,o=a.commandSendDelay,c=n.sendCmd.bind(Object(p.a)(n),e,t),l=Object(p.a)(n);l.timeout=setTimeout(function(){l.interval=setInterval(c,r)},o)}.bind(Object(p.a)(n))},n.getOnMouseUpFn=function(){return function(){n.timeout&&clearTimeout(n.timeout),n.interval&&clearInterval(n.interval)}.bind(Object(p.a)(n))},n.getOptions=function(){var e=n.props.cell;return e.options&&0!==e.options.length?e.options.reduce(function(e,t){return e[t.name]=t.value,e},{}):{}},n.updateOptions=function(e){var t=Object(h.a)({},n.props.cell);t.options=Object.keys(e).map(function(t){return{name:t,value:e[t].toString()}}),n.props.onCellUpdate(t)},n.renderContent=function(){throw new Error("renderComponent not implemented")},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log("CellBase Mount()")}},{key:"render",value:function(){return console.log("CellBase render()"),o.a.createElement(v.ConfigConsumer,null,this.renderContent)}}]),t}(r.Component),vt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).renderJogCoordinate=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=a.endPE,l=a.motionVelPercent,s=a.coordinateId,i=a.cell,u=t("jog-coordinate",r),d=["x","y","z","rx","ry","rz"];return o.a.createElement("div",{className:"".concat(u)},["X","Y","Z","RX","RY","RZ"].map(function(e,t){return o.a.createElement(pt.a,{key:e},o.a.createElement(ft.a,{type:"primary",size:"large",onClick:function(){n.getSendCmdFn("j".concat(d[t]," --vel_percent=").concat(l," --direction=-1 --cor=").concat(s," "),i.i)()},onMouseDown:function(){n.getOnMouseDownFn("j".concat(d[t]," --vel_percent=").concat(l," --direction=-1 --cor=").concat(s," "),i.i)()},onMouseUp:function(){n.getOnMouseUpFn()()},onMouseOut:function(){n.getOnMouseUpFn()()}},e,"-"),o.a.createElement(ft.a,{type:"primary",size:"large",onClick:function(){n.getSendCmdFn("j".concat(d[t]," --vel_percent=").concat(l," --direction=1 --cor=").concat(s," "),i.i)()},onMouseDown:function(){n.getOnMouseDownFn("j".concat(d[t]," --vel_percent=").concat(l," --direction=1 --cor=").concat(s," "),i.i)()},onMouseUp:function(){n.getOnMouseUpFn()()},onMouseOut:function(){n.getOnMouseUpFn()()}},e,"+"))}),o.a.createElement(pt.a,{className:"".concat(u,"-end_pe")},o.a.createElement("div",null,o.a.createElement("span",null,"X"),o.a.createElement("span",null,c&&(c[0]||0===c[0])?(1e3*c[0]).toFixed(3):"null")),o.a.createElement("div",null,o.a.createElement("span",null,"Y"),o.a.createElement("span",null,c&&(c[1]||0===c[1])?(1e3*c[1]).toFixed(3):"null")),o.a.createElement("div",null,o.a.createElement("span",null,"Z"),o.a.createElement("span",null,c&&(c[2]||0===c[2])?(1e3*c[2]).toFixed(3):"null"))),o.a.createElement(pt.a,{className:"".concat(u,"-end_pe")},o.a.createElement("div",null,o.a.createElement("span",null,"RX"),o.a.createElement("span",null,c&&(c[3]||0===c[3])?(c[3]/Math.PI*180).toFixed(3):"null")),o.a.createElement("div",null,o.a.createElement("span",null,"RY"),o.a.createElement("span",null,c&&(c[4]||0===c[4])?(c[4]/Math.PI*180).toFixed(3):"null")),o.a.createElement("div",null,o.a.createElement("span",null,"RZ"),o.a.createElement("span",null,c&&(c[5]||0===c[5])?(c[5]/Math.PI*180).toFixed(3):"null"))))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderJogCoordinate)}}]),t}(ht);vt.propTypes={cell:dt.a.object.isRequired,sendCmd:dt.a.func.isRequired,motionVelPercent:dt.a.number,coordinateId:dt.a.number.isRequired,endPE:dt.a.array};var Et=Object(xe.a)(We,Ge,Ue,function(e,t,n){return{coordinateId:t,motionVelPercent:e,endPE:n}});var gt=Object(s.b)(function(e){return Et(e)},{sendCmd:ue})(vt),Ot=function(e){return o.a.createElement("svg",Object.assign({width:"90px",height:"76px",viewBox:"0 0 90 76",version:"1.1"},e),o.a.createElement("rect",{fillRule:"nonzero",x:"0",y:"55.243",width:"18.306",height:"20.204"}),o.a.createElement("rect",{fillRule:"nonzero",x:"23.711",y:"37.304",width:"18.493",height:"38.143"}),o.a.createElement("rect",{fillRule:"nonzero",x:"47.609",y:"18.929",width:"18.493",height:"56.518"}),o.a.createElement("rect",{fillRule:"nonzero",x:"71.507",y:"0.38",width:"18.493",height:"75.067"}))},Ct=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).renderJogJoint=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=a.cell,l=a.slaveOnlineState,s=a.slaveAlState,i=a.motionState,u=a.motionPos,d=a.motionVelPercent,m=t("jog-joint",r);return o.a.createElement("div",{className:"".concat(m)},[0,1,2,3,4,5].map(function(e){return o.a.createElement(pt.a,{key:e},o.a.createElement(ft.a,{type:"primary",size:"large",onClick:function(){n.sendCmd("j".concat(e+1," --direction=-1 --vel_percent=").concat(d),c.i)},onMouseDown:function(){n.getOnMouseDownFn("j".concat(e+1," --direction=-1 --vel_percent=").concat(d),c.i)()},onMouseUp:function(){n.getOnMouseUpFn()()},onMouseOut:function(){n.getOnMouseUpFn()()}},"J",e+1,"-"),o.a.createElement("div",{className:"".concat(m,"-status")},o.a.createElement("span",null,u&&(u[e]||0===u[e])?(u[e]/Math.PI*180).toFixed(3):"null"),o.a.createElement("div",{className:"".concat(m,"-status-icons")},o.a.createElement(_.a,{component:Ot,className:"".concat(l&&l[e]?"".concat(m,"-slave-online-state ").concat(m,"-slave-online-state-").concat(s&&s[e]):"".concat(m,"-slave-online-state disabled"))}),!(!i||!i[e])&&o.a.createElement(_.a,{type:"check-circle",theme:"filled",className:"success"}),!(i&&i[e])&&o.a.createElement(_.a,{type:"check-circle",theme:"filled",className:"disabled"}))),o.a.createElement(ft.a,{type:"primary",size:"large",onClick:function(){n.sendCmd("j".concat(e+1," --direction=1 --vel_percent=").concat(d),c.i)},onMouseDown:function(){n.getOnMouseDownFn("j".concat(e+1," --direction=1 --vel_percent=").concat(d),c.i)()},onMouseUp:function(){n.getOnMouseUpFn()()},onMouseOut:function(){n.getOnMouseUpFn()()}},"J",e+1,"+"))}))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderJogJoint)}}]),t}(ht);Ct.propTypes={cell:dt.a.object.isRequired,sendCmd:dt.a.func.isRequired,vel:dt.a.number,motionPos:dt.a.array,slaveOnlineState:dt.a.array};var yt=Object(xe.a)(We,Be,Xe,qe,Je,function(e,t,n,a,r){return{motionVelPercent:e,motionPos:t,motionState:n,slaveOnlineState:a,slaveAlState:r}});var jt=Object(s.b)(function(e){return yt(e)},{sendCmd:ue})(Ct),Mt=n(188),St=n.n(Mt),xt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).getVelOption=function(){var e=n.props.cell;if(e.options){var t=e.options.filter(function(e){return"manualMotionVel"===e.name});if(t.length>0)try{return parseFloat(t[0].value)}catch(a){console.error(a)}}},n.renderManualMotionVel=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=(a.cell,t("manual-motion-vel",r)),l=n.getVelOption();return o.a.createElement("div",{className:"".concat(c)},o.a.createElement(St.a,{tooltipVisible:!0,min:0,max:100,tipFormatter:function(e){return"".concat(e,"%")},value:n.props.vel||l,onChange:function(e){n.props.updateManualMotionVel(e);var t=Object(h.a)({},n.props.cell);if(t.options&&0!==t.options.length){t.options=Object(f.a)(t.options);var a=!1;t.options.forEach(function(n,r){"manualMotionVel"===n.name&&(t.options[r]={name:"manualMotionVel",value:"".concat(e)},a=!0)}),a||t.options.push({name:"manualMotionVel",value:"".concat(e)})}else t.options=[{name:"manualMotionVel",value:"".concat(e)}];console.log(t),n.props.onCellUpdate(t)},getTooltipPopupContainer:function(){return document.getElementById("dashboard")}}))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.vel,n=e.updateManualMotionVel,a=this.getVelOption();!a&&0!==a||t||n(a)}},{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderManualMotionVel)}}]),t}(r.Component);var _t=Object(s.b)(function(e){return{vel:e.robot.manualMotionVel}},{updateManualMotionVel:de})(xt),Rt=function(e){return e.config},Pt=function(e){var t=e.robot;return t.resultsByChannel&&t.resultsByChannel.get&&t.resultsByChannel.get.state_code},wt=function(e){var t=e.config;return t&&t.layoutConfig&&t.layoutConfig.cols},Nt=function(e){var t=e.config;return t&&t.layoutConfig&&t.layoutConfig.rowHeight},kt=function(e){var t=e.config;return t&&t.layoutConfig&&t.layoutConfig.margin},It=function(e){var t=e.config;return t&&t.layoutConfig&&t.layoutConfig.containerPadding},Tt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).renderJogJoint=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=(a.cell,a.websocketConnected),l=a.stateCode;l||(l=100);console.log("robot state code",l);var s={100:"#AAAAAA",200:"#FF851B",300:"#FF4136",400:"#0074D9",500:"#01FF70"}[l],i={100:"\u53bb\u4f7f\u80fd",200:"\u624b\u52a8",300:"\u51c6\u5907\u81ea\u52a8",400:"\u81ea\u52a8",500:"\u9519\u8bef\u505c\u76ee"}[l],u=t("robot-status",r);return o.a.createElement("div",{className:"".concat(u)},o.a.createElement("div",null,!!c&&o.a.createElement(_.a,{type:"wifi",className:"success"}),!!c&&o.a.createElement("span",null,"\u5df2\u8fde\u63a5"),!c&&o.a.createElement(_.a,{type:"wifi",className:"danger"}),!c&&o.a.createElement("span",null,"\u672a\u8fde\u63a5")),o.a.createElement("div",null,o.a.createElement(_.a,{style:{color:s,fill:s},fill:s,type:"check-circle",className:"info",theme:"filled"}),o.a.createElement("span",null,i||"\u65e0\u72b6\u6001")))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderJogJoint)}}]),t}(r.Component);var Ft=Object(s.b)(function(e){return{stateCode:Pt(e),websocketConnected:nt(e)}})(Tt),At=n(317),Lt=n.n(At),Dt=n(132),Ut=n.n(Dt),Bt=n(77),Xt=n.n(Bt),Vt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={enable:!0},n.onChange=function(e){var t=n.props.cell;e?(n.sendCmd("md","".concat(t.i,"-md")),n.sendCmd("rc","".concat(t.i,"-rc")),n.sendCmd("en","".concat(t.i,"-en")),n.setState({enable:!0})):(n.sendCmd("ds","".concat(t.i,"-ds")),n.setState({enable:!1}))},n.resetEnable=function(){var e=n.props.cell;n.props.deleteResultByChannel("".concat(e.i,"-md")),n.props.deleteResultByChannel("".concat(e.i,"-rc")),n.props.deleteResultByChannel("".concat(e.i,"-en")),n.setState({enable:!1})},n.resetDisable=function(){var e=n.props.cell;n.props.deleteResultByChannel("".concat(e.i,"-ds")),n.setState({enable:!0})},n.renderManualSwitch=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=(a.cell,a.stateCode),l=a.resultMD,s=a.resultRC,i=a.resultEN,u=a.resultDS,d=(Math.floor(c),Math.floor(c),t("manual-switch",r)),m=(Object(p.a)(n),n.state.enable),b=m&&l&&s&&i&&(0!==l.return_code||0!==s.return_code||0!==i.return_code),f=!m&&u&&0!==u.return_code;return o.a.createElement("div",{className:"".concat(d)},o.a.createElement("div",null,o.a.createElement(Lt.a,{checkedChildren:"\u5f00",unCheckedChildren:"\u5173",checked:m&&l&&s&&i&&0===l.return_code&&0===s.return_code&&0===i.return_code,onChange:n.onChange}),o.a.createElement("span",null,100===c?"\u4f7f\u80fd":"1\u672a\u4f7f\u80fd")),o.a.createElement("div",null,o.a.createElement(_.a,{type:"drag"}),o.a.createElement("span",null,"\u6258\u52a8")),o.a.createElement("div",null,o.a.createElement(_.a,{type:"pushpin"}),o.a.createElement("span",null,"\u4fdd\u5b58\u70b9")),o.a.createElement("div",null,o.a.createElement(_.a,{type:"save"}),o.a.createElement("span",null,"\u4fdd\u5b58\u8f68\u8ff9")),o.a.createElement(Ut.a,{visible:b,title:"\u4f7f\u80fd\u9519\u8bef",onOk:n.resetEnable,onCancel:n.resetEnable,centered:!0,footer:[o.a.createElement(ft.a,{key:"close",onClick:n.resetEnable},"\u5173\u95ed")]},!(!l||0===l.return_code)&&o.a.createElement("p",{className:"danger"},"MD ",l&&(l.return_message?"\u8fd4\u56de\u7801\uff1a".concat(l.return_code," \u8fd4\u56de\u6d88\u606f\uff1a").concat(l.return_message," "):"\u8fd4\u56de\u7801\uff1a".concat(l.return_code))),!(!s||0===s.return_code)&&o.a.createElement("p",{className:"danger"},"RC ",s&&(s.return_message?"\u8fd4\u56de\u7801\uff1a".concat(s.return_code," \u8fd4\u56de\u6d88\u606f\uff1a").concat(s.return_message," "):"\u8fd4\u56de\u7801\uff1a".concat(s.return_code))),!(!i||0===i.return_code)&&o.a.createElement("p",{className:"danger"},"EN ",i&&(i.return_message?"\u8fd4\u56de\u7801\uff1a".concat(i.return_code," \u8fd4\u56de\u6d88\u606f\uff1a").concat(i.return_message," "):"\u8fd4\u56de\u7801\uff1a".concat(i.return_code)))),o.a.createElement(Ut.a,{visible:f,title:"\u53bb\u4f7f\u80fd\u9519\u8bef",onOk:n.resetDisable,onCancel:n.resetDisable,centered:!0,footer:[o.a.createElement(ft.a,{key:"close",onClick:n.resetDisable},"\u5173\u95ed")]},o.a.createElement("span",{className:"danger"},u&&(u.return_message?"\u8fd4\u56de\u7801\uff1a".concat(u.return_code," \u8fd4\u56de\u6d88\u606f\uff1a").concat(u.return_message," "):"\u8fd4\u56de\u7801\uff1a".concat(u.return_code)))))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderManualSwitch)}}]),t}(ht);Vt.propTypes={cell:dt.a.object.isRequired,stateCode:dt.a.number};var zt=Object(s.b)(function(){var e=Ie(function(e,t){return e.robot.resultsByChannel["".concat(t.cell.i,"-md")]},function(e,t){return e.robot.resultsByChannel["".concat(t.cell.i,"-rc")]},function(e,t){return e.robot.resultsByChannel["".concat(t.cell.i,"-en")]},function(e,t){return e.robot.resultsByChannel["".concat(t.cell.i,"-ds")]},function(e,t,n,a){return{resultMD:e,resultRC:t,resultEN:n,resultDS:a}});return function(t,n){return e(t,n)}},{deleteResultByChannel:me})(Vt),Jt=(n(263),n(527)),qt=n.n(Jt),Ht=(n(707),n(709),n(710),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){console.log("change",e)},n.renderJogJoint=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=(a.cell,t("code-editor",r));return o.a.createElement("div",{className:"".concat(c)},o.a.createElement(qt.a,{mode:"javascript",theme:"monokai",width:"100%",height:"100%",value:'\nfunction onLoad(editor) {\n  console.log("i\'ve loaded");\n}\nfunction onLoad(editor) {\n  console.log("i\'ve loaded");\n}\nfunction onLoad(editor) {\n  console.log("i\'ve loaded");\n}\nfunction onLoad(editor) {\n  console.log("i\'ve loaded");\n}\nfunction onLoad(editor) {\n  console.log("i\'ve loaded");\n}\nfunction onLoad(editor) {\n  console.log("i\'ve loaded");\n}\n    ',onChange:n.onChange,name:"UNIQUE_ID_OF_DIV",editorProps:{$blockScrolling:!0}}))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderJogJoint)}}]),t}(r.Component));var Gt=Object(s.b)(function(e){return{robotStatus:e.robot.robotStatus}})(Ht),Wt=n(55),Zt=n.n(Wt),Kt=n(528),Qt=n.n(Kt),Yt=Zt.a.TextArea,$t=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).interval=null,n.timeout=null,n.getSendCmdFn=function(){return function(){var e=n.props,t=e.sendCmd,a=e.cell,r=n.getOptions();r.command&&r.command.split("\n").forEach(function(e){(e=e.trim())&&(t(e,a.i),n.terminal.runCommandOnActive("showCmd "+e))})}.bind(Object(p.a)(n))},n.getOnMouseDownFn=function(){return function(){n.interval&&clearInterval(n.interval);var e=n.getSendCmdFn(),t=Object(p.a)(n),a=n.props,r=a.commandSendInterval,o=a.commandSendDelay;t.timeout=setTimeout(function(){t.interval=setInterval(e,r)},o)}.bind(Object(p.a)(n))},n.getOnMouseUpFn=function(){return function(){n.interval&&clearInterval(n.interval),n.timeout&&clearTimeout(n.timeout)}.bind(Object(p.a)(n))},n.renderContent=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=(a.cell,a.results,n.getOptions()),l=t("debugger",r),s=Object(p.a)(n);return o.a.createElement("div",{className:"".concat(l)},o.a.createElement(pt.a,null,o.a.createElement(Yt,{rows:2,value:c.command,onChange:function(e){n.updateOptions({command:e.target.value})},placeholder:"\u8bf7\u8f93\u5165\u4e00\u884c\u673a\u5668\u4eba\u6307\u4ee4"}),o.a.createElement(ft.a,{onClick:n.getSendCmdFn(),onMouseDown:n.getOnMouseDownFn(),onMouseUp:n.getOnMouseUpFn(),onMouseOut:n.getOnMouseUpFn(),type:"primary",shape:"round",icon:"play-circle",size:"large"},"Send"),o.a.createElement("div",{className:"".concat(l,"-terminal")},o.a.createElement(Qt.a,{color:"green",backgroundColor:"black",barColor:"black",hideTopBar:!0,allowTabs:!1,commands:{showCmd:function(e,t,n){if(e[1])t(e.slice(1).join(" "));else{var a=s.getOptions();a.command&&t(a.command)}},send:function(e,t,n){s.props.sendCmd(e[1],s.props.cell.i)},showResult:function(e,t,a){t(JSON.stringify(n.result))}},descriptions:{send:'\u53d1\u9001\u6307\u4ee4\u7ed9\u673a\u5668\u4eba, "send [\u673a\u5668\u4eba\u6307\u4ee4]", \u4f8b\u5982 "send get"',showResult:"\u663e\u793a\u6700\u8fd1\u4e00\u6761\u8fd4\u56de\u503c",showCmd:"\u663e\u793a\u5f53\u524d\u6307\u4ee4\u503c"},ref:function(e){return n.terminal=e}}))))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"shouldComponentUpdate",value:function(e,t,n){return e.result!==this.props.result&&(this.result=e.result,this.terminal.runCommandOnActive("showResult")),e.cell!==this.props.cell||e.result!==this.props.result}}]),t}(ht);$t.propTypes={results:dt.a.array.isRequired};var en=Object(s.b)(function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=[];return Object(xe.a)(Te,function(n){n&&t.push(n);var a=t.length;return a>e&&t.splice(0,a-e),t})}(10);return function(t,n){return{results:e(t,n),result:Fe(t,n.cell.i)}}})($t),tn=n(32),nn=n.n(tn),an=n(532),rn=n.n(an),on=(n(384),nn.a.Option,function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log("RealtimeChartChannelAndDataKey componentDidMount")}},{key:"render",value:function(){var e=this.props,t=e.dataKey,n=e.channel,a=e.data,c=(e.options,null);return a&&a.length>0&&(c={title:{text:n+" "+t},xAxis:{splitLine:{show:!1},type:"category",data:a.map(function(e){return e[0]})},yAxis:{splitLine:{show:!1},type:"value"},series:a[0][1].map(function(e,n){return{name:"".concat(t).concat(n),data:a.map(function(e){return e[1][n]}),symbol:"none",type:"line"}})}),console.log(c),o.a.createElement(r.Fragment,null,c&&o.a.createElement(rn.a,{option:c,notMerge:!0,lazyUpdate:!0}))}}]),t}(r.Component)),cn=Object(s.b)(function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=[];return Ie(De,function(n){console.log(n),n&&t.push(n);var a=t.length;return a>e&&t.splice(0,a-e),[].concat(t)})}();return function(t,n){return{data:e(t,n.channel,n.dataKey)}}})(on),ln=nn.a.Option,sn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleSelect=function(e){var t=n.props,a=t.options;(0,t.updateOptions)(Object(h.a)({},a,{dataKey:e}))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log("RealtimeChartChannel componentDidMount")}},{key:"render",value:function(){console.log("RealtimeChartChannel render");var e=this.props,t=e.dataKeys,n=e.options,a=e.updateOptions,c=e.channel,l=e.prefixCls,s="";return t&&-1!==t.indexOf(n.dataKey)&&(s=n.dataKey),o.a.createElement(r.Fragment,null,!!(t&&t.length>0)&&o.a.createElement(nn.a,{style:{width:"100%"},size:"small",onSelect:this.handleSelect,value:s,placeholder:"\u9009\u62e9DataKey"},t.map(function(e){return o.a.createElement(ln,{key:e,value:e},e.toUpperCase())})),!!(t&&t.length>0&&s)&&o.a.createElement(cn,{key:(c+s).replace(" ","_"),dataKey:s,channel:c,updateOptions:a,options:n,prefixCls:l}))}}]),t}(r.Component),un=Object(s.b)(function(){var e=function(){var e=Object(xe.a)(Ae,function(e){if(e)return Object.keys(e).filter(function(t){return!!we()(e[t])||!(!ke()(e[t])||!we()(e[t][0]))||void 0})});return Ie(e,function(e){return e})}();return function(t,n){return{dataKeys:e(t,n.channel)}}})(sn),dn=nn.a.Option,mn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t=n.getOptions();n.updateOptions(Object(h.a)({},t,{channel:e}))},n.renderContent=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=(a.cell,a.channels),l=n.getOptions(),s=t("realtime-chart",r),i=(Object(p.a)(n),"");return c&&-1!==c.indexOf(l.channel)&&(i=l.channel),o.a.createElement("div",{className:"".concat(s," ").concat(!(c&&c.length>0)&&s+"-no-data")},!(c&&c.length>0)&&o.a.createElement("span",null,"\u65e0\u5b9e\u65f6\u6570\u636e"),!!(c&&c.length>0)&&o.a.createElement(nn.a,{style:{width:"100%"},size:"small",placeholder:"\u9009\u62e9DataKey",onSelect:n.handleChange,value:i},c.map(function(e){return o.a.createElement(dn,{key:e,value:e},e.toUpperCase())})),!!(c&&c.length>0&&l.channel)&&o.a.createElement(un,{key:l.channel,channel:l.channel,options:l,updateOptions:n.updateOptions,prefixCls:s}))},n}return Object(b.a)(t,e),t}(ht);mn.propTypes={channels:dt.a.array.isRequired};var pn=Object(s.b)(function(){return function(e,t){return{channels:Le(e)}}})(mn),bn=n(41),fn=n.n(bn),hn=n(319),vn=n.n(hn),En=n(189),gn=n.n(En),On=n(52),Cn=n.n(On),yn=nn.a.Option,jn={UserInput:"\u76f4\u63a5\u8f93\u5165\u5de5\u5177\u5750\u6807\u7cfb\u7684\u4f4d\u7f6e\u548c\u8d44\u6001(\u6b27\u62c9\u89d2)",CalibT4P:"\u4ee5\u6cd5\u5170\u5750\u6807\u7cfb\u4e3a\u53c2\u8003\u5750\u6807\u7cfb\uff0c\u6807\u5b9a\u51fa\u5de5\u5177\u5750\u6807\u7cfb\u539f\u70b9\u7684\u4f4d\u7f6e\u504f\u79fb\u91cf\uff0c\u5de5\u5177\u5750\u6807\u7cfb\u7684\u59ff\u6001\u9ed8\u8ba4\u4e0e\u6cd5\u5170\u5750\u6807\u7cfb\u4e00\u81f4\u3002",CalibT5P:"\u4ee5\u6cd5\u5170\u5750\u6807\u7cfb\u4e3a\u53c2\u8003\u5750\u6807\u7cfb\uff0c\u6807\u5b9a\u51fa\u5de5\u5177\u5750\u6807 \u7cfb\u539f\u70b9\u7684\u4f4d\u7f6e\u504f\u79fb\u91cf\u4ee5 \u53ca\u5de5\u5177\u5750\u6807\u7cfb Z \u8f74\u7684\u65b9 \u5411\u3002",CalibT6P:"\u4ee5\u6cd5\u5170\u5750\u6807\u7cfb\u4e3a\u53c2\u8003\u5750\u6807\u7cfb\uff0c\u6807\u5b9a\u51fa\u5de5\u5177\u5750\u6807\u7cfb\u7684\u4f4d\u59ff\u3002"},Mn={CalibT4P:o.a.createElement("div",{style:{maxWidth:300}},o.a.createElement("p",null,"1)\u9009\u62e9\u6cd5\u5170\u5750\u6807\u7cfb\u4e3a\u5f53\u524d\u5de5\u5177\u5750\u6807\u7cfb\uff0c\u673a\u5668\u4eba\u5e95\u5ea7\u5750\u6807\u7cfb\u4e3a \u5f53\u524d\u5de5\u4ef6\u5750\u6807\u7cfb; "),o.a.createElement("p",null," 2)\u624b\u52a8\u793a\u6559\uff0c\u4ee5\u4e0d\u540c\u59ff\u6001\u4f7f\u79fb\u52a8\u5de5\u5177\u4f7f\u5de5\u5177\u4e2d\u5fc3\u70b9\u6cbf\u67d0\u4e00\u65b9 \u5411\u4e0e\u5916\u90e8\u56fa\u5b9a\u70b9\u63a5\u89e6\uff0c\u5e76\u4fdd\u5b58\u6b64\u65f6\u7684\u4f4d\u59ff\uff0c\u4f9d\u6b21\u6cbf 4 \u4e2a\u4e0d\u540c \u65b9\u5411\u83b7\u53d6\u793a\u6559\u70b9\u7684\u4f4d\u59ff\u6570\u636e;"),o.a.createElement("p",null,"3)\u786e\u8ba4\u6807\u5b9a\u7ed3\u679c\u3002")),CalibT5P:o.a.createElement("div",{style:{maxWidth:300}},o.a.createElement("p",null,"1)\u9009\u62e9\u6cd5\u5170\u5750\u6807\u7cfb\u4e3a\u5f53\u524d\u5de5\u5177\u5750\u6807\u7cfb\uff0c\u673a\u5668\u4eba\u5e95\u5ea7\u5750\u6807\u7cfb\u4e3a \u5f53\u524d\u5de5\u4ef6\u5750\u6807\u7cfb;"),o.a.createElement("p",null,"2)\u624b\u52a8\u793a\u6559\uff0c\u4ee5\u4e0d\u540c\u59ff\u6001\u4f7f\u79fb\u52a8\u5de5\u5177\u4f7f\u5de5\u5177\u4e2d\u5fc3\u70b9\u6cbf\u67d0\u4e00\u65b9 \u5411\u4e0e\u5916\u90e8\u56fa\u5b9a\u70b9\u63a5\u89e6\uff0c\u5e76\u4fdd\u5b58\u6b64\u65f6\u7684\u4f4d\u59ff\uff0c\u4f9d\u6b21\u6cbf 4 \u4e2a\u4e0d\u540c \u65b9\u5411\u83b7\u53d6\u793a\u6559\u70b9\u7684\u4f4d\u59ff\u6570\u636e; "),o.a.createElement("p",null,"3)\u4ee5\u7b2c 4 \u70b9\u7684\u5de5\u5177\u4f4d\u59ff\u4e3a\u57fa\u51c6\uff0c\u4fdd\u6301\u5de5\u5177\u59ff\u6001\u4e0d\u53d8\uff0c\u5c06\u5de5\u5177 \u5750\u6807\u7cfb Z \u8f74\u6b63\u65b9\u5411\u4e0a\u67d0\u4e00\u7279\u5f81\u70b9\u4e0e\u5916\u90e8\u56fa\u5b9a\u70b9\u63a5\u89e6\uff0c\u4fdd\u5b58\u7b2c 5 \u4e2a\u793a\u6559\u70b9\u7684\u4f4d\u59ff; "),o.a.createElement("p",null,"4)\u786e\u8ba4\u6807\u5b9a\u7ed3\u679c\u3002")),CalibT6P:o.a.createElement("div",{style:{maxWidth:300}},o.a.createElement("p",null,"1)\u9009\u62e9\u6cd5\u5170\u5750\u6807\u7cfb\u4e3a\u5f53\u524d\u5de5\u5177\u5750\u6807\u7cfb\uff0c\u673a\u5668\u4eba\u5e95\u5ea7\u5750\u6807\u7cfb\u4e3a \u5f53\u524d\u5de5\u4ef6\u5750\u6807\u7cfb; "),o.a.createElement("p",null,"2)\u624b\u52a8\u793a\u6559\uff0c\u4ee5\u4e0d\u540c\u59ff\u6001\u4f7f\u79fb\u52a8\u5de5\u5177\u4f7f\u5de5\u5177\u4e2d\u5fc3\u70b9\u6cbf\u67d0\u4e00\u65b9 \u5411\u4e0e\u5916\u90e8\u56fa\u5b9a\u70b9\u63a5\u89e6\uff0c\u5e76\u4fdd\u5b58\u6b64\u65f6\u7684\u4f4d\u59ff\uff0c\u4f9d\u6b21\u6cbf 4 \u4e2a\u4e0d\u540c \u65b9\u5411\u83b7\u53d6\u793a\u6559\u70b9\u7684\u4f4d\u59ff\u6570\u636e;"),o.a.createElement("p",null,"3)\u4ee5\u7b2c 4 \u70b9\u7684\u5de5\u5177\u4f4d\u59ff\u4e3a\u57fa\u51c6\uff0c\u4fdd\u6301\u5de5\u5177\u59ff\u6001\u4e0d\u53d8\uff0c\u5c06\u5de5\u5177 \u5750\u6807\u7cfb Z \u8f74\u6b63\u65b9\u5411\u4e0a\u67d0\u4e00\u7279\u5f81\u70b9\u4e0e\u5916\u90e8\u56fa\u5b9a\u70b9\u63a5\u89e6\uff0c\u4fdd\u5b58\u7b2c 5 \u4e2a\u793a\u6559\u70b9\u7684\u4f4d\u59ff;")),UserInput:o.a.createElement("div",{style:{maxWidth:300}},o.a.createElement("p",null,"\u7528\u6237\u8f93\u5165\u6807\u5b9a \u76f4\u63a5\u8f93\u5165\u5de5\u5177\u5750\u6807\u7cfb\u7684\u4f4d\u7f6e\u548c\u59ff\u6001\uff08\u6b27\u62c9\u89d2\uff09\uff0c \u4f9d\u6b21\u8f93\u5165\u5de5\u5177\u5750\u6807\u7cfb\u7684\u4f4d\u7f6e\u548c\u59ff\u6001\uff0c\u7136\u540e\u70b9\u51fb\u4fdd\u5b58"))},Sn={UserInput:"\u7528\u6237\u8f93\u5165",CalibT4P:"\u56db\u70b9\u6807\u5b9a\u6cd5",CalibT5P:"\u4e94\u70b9\u6807\u5b9a\u6cd5",CalibT6P:"\u516d\u70b9\u6807\u5b9a\u6cd5"},xn={CalibT4P:4,CalibT5P:5,CalibT6P:6},_n=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={calibMethod:"CalibT4P",toolId:0,toolName:"",pes:[],showCalibResult:!1,showSaveResult:!1,userInput:{x:0,y:0,z:0,a:0,b:0,c:0}},n.handleNameChange=function(e){n.setState({toolName:e.target.value,showCalibResult:!1,showSaveResult:!1})},n.handleSelectToolId=function(e){n.setState({toolId:e,pes:[],showCalibResult:!1,toolName:null,showSaveResult:!1})},n.handleSelectCalibMethod=function(e){n.setState({calibMethod:e,pes:[],showCalibResult:!1,toolName:null,showSaveResult:!1})},n.renderTable=function(e){var t=function(t,n){return n.last?o.a.createElement("span",{className:"".concat(e,"-table-cell ").concat(e,"-table-cell-last")},t):o.a.createElement("span",{className:"".concat(e,"-table-cell")},t)},a=[{title:"\u7f16\u53f7",dataIndex:"rowName",key:"rowName",align:"center"},{title:"X[mm]",dataIndex:"x",key:"xi",render:t,align:"center"},{title:"Y[mm]",dataIndex:"y",key:"yi",render:t,align:"center"},{title:"Z[mm]",dataIndex:"z",key:"zi",render:t,align:"center"},{title:"A",dataIndex:"a",key:"ai",render:t,align:"center"},{title:"B",dataIndex:"b",key:"bi",render:t,align:"center"},{title:"C",dataIndex:"c",key:"ci",render:t,align:"center"}],r=n.props,c=r.endPE,l=(r.cell,[]);n.state.pes.map(function(e,t){l.push({rowName:"\u6807\u5b9a\u70b9".concat(t+1),rowKey:t,key:t,xi:"x".concat(t),yi:"y".concat(t),zi:"z".concat(t),ai:"a".concat(t),bi:"b".concat(t),ci:"c".concat(t),x:e[0].toFixed(3),y:e[1].toFixed(3),z:e[2].toFixed(3),a:e[3].toFixed(3),b:e[4].toFixed(3),c:e[5].toFixed(3)})}),c&&n.state.pes.length<xn[n.state.calibMethod]&&l.push({rowName:"\u6807\u5b9a\u70b9".concat(l.length+1),rowKey:"last",key:"last".concat(l.length+1),xi:"xlast",yi:"ylast",zi:"zlast",ai:"alast",bi:"blast",ci:"clast",x:c[0].toFixed(3),y:c[1].toFixed(3),z:c[2].toFixed(3),a:c[3].toFixed(3),b:c[4].toFixed(3),c:c[5].toFixed(3),last:!0});var s=Object(p.a)(n),i=o.a.createElement("div",{className:"".concat(e,"-table-footer")},s.state.pes.length>0&&o.a.createElement(ft.a,{type:"danger",onClick:function(){s.setState({showCalibResult:!1,showSaveResult:!1,pes:[]})}},"\u6e05\u7a7a\u6570\u636e"),!!(c&&s.state.pes.length<xn[n.state.calibMethod])&&o.a.createElement(ft.a,{type:"primary",onClick:function(){var e=s.props.endPE;s.setState({pes:[].concat(Object(f.a)(s.state.pes),[e])})}},"\u63d2\u5165\u6570\u636e"),s.state.pes.length===xn[n.state.calibMethod]&&o.a.createElement(ft.a,{type:"primary",onClick:function(){var e=s.state,t=e.pes,n=e.calibMethod,a=s.props,r=a.cell;(0,a.deleteResultByChannel)(r.i),s.setState({showCalibResult:!0,showSaveResult:!1}),s.sendCmd("".concat(n," --pose={").concat(t.join(",").replace(/ /g,","),"}"))}},"\u5f00\u59cb\u6807\u5b9a"));return o.a.createElement(gn.a,{className:"".concat(e,"-table"),dataSource:l,columns:a,size:"small",locale:{emptyText:"endPE\u6570\u636e\u8f7d\u5165\u4e2d..."},bordered:!0,pagination:!1,footer:function(){return i}})},n.getUserInputUpdateFn=function(e){var t=Object(p.a)(n);return function(n){var a=Object(h.a)({},t.state.userInput);a[e]=n,t.setState({userInput:a})}},n.getCellRenderer=function(e){var t=Object(p.a)(n);return function(n,a){return o.a.createElement(Cn.a,{step:.001,size:"small",value:a[e],onChange:t.getUserInputUpdateFn(e)})}},n.renderUserInput=function(e){var t=n.state.userInput,a=[{title:"X[mm]",dataIndex:"x",key:"xi",align:"center",render:n.getCellRenderer("x")},{title:"Y[mm]",dataIndex:"y",key:"yi",align:"center",render:n.getCellRenderer("y")},{title:"Z[mm]",dataIndex:"z",key:"zi",align:"center",render:n.getCellRenderer("z")},{title:"A",dataIndex:"a",key:"ai",align:"center",render:n.getCellRenderer("a")},{title:"B",dataIndex:"b",key:"bi",align:"center",render:n.getCellRenderer("b")},{title:"C",dataIndex:"c",key:"ci",align:"center",render:n.getCellRenderer("c")}],r=[{xi:"xlast",yi:"ylast",zi:"zlast",ai:"alast",bi:"blast",ci:"clast",rowKey:"result",x:t.x,y:t.y,z:t.z,a:t.a,b:t.b,c:t.c,last:!0}],c=Object(p.a)(n),l=o.a.createElement("div",{className:"".concat(e,"-table-footer")},o.a.createElement(ft.a,{type:"primary",onClick:function(){var e=c.state,t=e.toolId,n=e.toolName,a=e.userInput;n=n||"Tool".concat(t);var r=c.props,o=r.cell,l=r.deleteResultByChannel;c.setState({showSaveResult:!0}),l(o.i);var s=[a.x,a.y,a.z,a.a,a.b,a.c];c.sendCmd("SetTF --tool_id=".concat(t," --tool_name=").concat(n," --tool_pe={").concat(s.join(",").replace(/ /g,","),"}"),o.i)}},"\u4fdd\u5b58"));return o.a.createElement("div",{className:"".concat(e,"-calib-userinput")},o.a.createElement(gn.a,{className:"".concat(e,"-table"),dataSource:r,columns:a,size:"small",locale:{emptyText:"\u6807\u5b9a\u7ed3\u679c\u8f7d\u5165\u4e2d..."},bordered:!0,pagination:!1,footer:function(){return l}}))},n.renderResult=function(e){var t=n.state.showCalibResult,a=n.props,r=a.result;a.cell;if(!t||!r)return null;if(0!==r.return_code||!r.tool_pe)return o.a.createElement("div",{className:"".concat(e,"-calib-result error")},o.a.createElement("div",null,"\u6807\u5b9a\u9519\u8bef"),o.a.createElement("div",{className:"error"},"\u4ee3\u7801:",r.return_code),o.a.createElement("div",{className:"error"},"\u9519\u8bef:",r.return_message));var c=[{xi:"xlast",yi:"ylast",zi:"zlast",ai:"alast",bi:"blast",ci:"clast",rowKey:"result",x:r.tool_pe[0].toFixed(3),y:r.tool_pe[1].toFixed(3),z:r.tool_pe[2].toFixed(3),a:r.tool_pe[3].toFixed(3),b:r.tool_pe[4].toFixed(3),c:r.tool_pe[5].toFixed(3),last:!0}],l=Object(p.a)(n),s=o.a.createElement("div",{className:"".concat(e,"-table-footer")},o.a.createElement(ft.a,{type:"primary",onClick:function(){var e=l.state,t=e.toolId,n=e.toolName,a=r.tool_pe.map(function(e){return e});n=n||"Tool".concat(t);var o=l.props,c=o.cell,s=o.deleteResultByChannel;l.setState({showCalibResult:!1,showSaveResult:!0}),s(c.i),l.sendCmd("SetTF --tool_id=".concat(t," --tool_name=").concat(n," --tool_pe={").concat(a.join(",").replace(/ /g,","),"}"),c.i)}},"\u4fdd\u5b58"));return o.a.createElement("div",{className:"".concat(e,"-calib-result")},o.a.createElement("div",null,"\u6807\u5b9a\u7ed3\u679c"),o.a.createElement(gn.a,{className:"".concat(e,"-table"),dataSource:c,columns:[{title:"X[mm]",dataIndex:"x",key:"xi",align:"center"},{title:"Y[mm]",dataIndex:"y",key:"yi",align:"center"},{title:"Z[mm]",dataIndex:"z",key:"zi",align:"center"},{title:"A",dataIndex:"a",key:"ai",align:"center"},{title:"B",dataIndex:"b",key:"bi",align:"center"},{title:"C",dataIndex:"c",key:"ci",align:"center"}],size:"small",locale:{emptyText:"\u6807\u5b9a\u7ed3\u679c\u8f7d\u5165\u4e2d..."},bordered:!0,pagination:!1,footer:function(){return s}}),o.a.createElement("div",{className:"".concat(e,"-calib-result-message")},r.CalibrationInfo))},n.renderSaveResult=function(e){var t=n.state.showSaveResult,a=n.props,r=a.result;a.cell;return t&&r?0!==r.return_code?o.a.createElement("div",{className:"".concat(e,"-save-result error")},o.a.createElement("div",null,"\u4fdd\u5b58\u51fa\u9519"),o.a.createElement("div",{className:"error"},"\u4ee3\u7801:",r.return_code),!!r.CalibrationInfo&&o.a.createElement("div",{className:"error"},"\u9519\u8bef:",r.CalibrationInfo),!!r.return_message&&o.a.createElement("div",{className:"error"},"\u9519\u8bef:",r.return_message)):o.a.createElement("div",{className:"".concat(e,"-save-result success")},o.a.createElement("div",null,"\u4fdd\u5b58\u6210\u529f"),!!r.CalibrationInfo&&o.a.createElement("div",{className:"".concat(e,"-save-result-message success")},r.CalibrationInfo),!!r.return_message&&o.a.createElement("div",{className:"success"},r.return_message)):null},n.renderContent=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=(a.cell,a.toolIds),l=t("calib-tool",r),s=Object(p.a)(n);return o.a.createElement("div",{className:"".concat(l)},o.a.createElement(pt.a,null,o.a.createElement(fn.a,{lg:10,className:"".concat(l,"-user-input-container")},o.a.createElement("div",null,o.a.createElement("span",null,"\u6807\u5b9a\u65b9\u6cd5"),o.a.createElement(nn.a,{size:"small",placeholder:"\u9009\u62e9\u6807\u5b9a\u65b9\u6cd5",onChange:n.handleSelectCalibMethod,value:n.state.calibMethod},Object.keys(Sn).map(function(e){return o.a.createElement(yn,{value:e,key:e},Sn[e])})),o.a.createElement(vn.a,{placement:"bottom",title:o.a.createElement("span",null,Sn[n.state.calibMethod]),content:Mn[n.state.calibMethod],trigger:"click"},o.a.createElement(_.a,{type:"question"}))),o.a.createElement("div",null,o.a.createElement("span",null,"\u5de5\u5177\u53f7"),o.a.createElement(nn.a,{size:"small",placeholder:"\u9009\u62e9\u5de5\u5177\u53f7",onChange:n.handleSelectToolId,value:n.state.toolId},c.map(function(e){return o.a.createElement(yn,{value:e,key:e},"\u5de5\u5177",e)}))),o.a.createElement("div",null,o.a.createElement("span",null,"\u540d\u79f0"),o.a.createElement(Zt.a,{value:n.state.toolName,size:"small",placeholder:"Tool".concat(n.state.toolId),onChange:n.handleNameChange}),!!n.state.toolName&&o.a.createElement(ft.a,{size:"small",type:"primary",style:{marginLeft:5},onClick:function(){s.setState({pes:[],showCalibResult:!1});var e=s.state,t=e.toolName,n=e.toolId;s.sendCmd("RenameT --tool_id=".concat(n," --tool_name=").concat(t))}},"\u4fee\u6539"))),o.a.createElement(fn.a,{lg:14,className:"".concat(l,"-hints-container")},jn[n.state.calibMethod])),"UserInput"===n.state.calibMethod&&o.a.createElement(pt.a,null,n.renderUserInput(l)),"UserInput"!==n.state.calibMethod&&o.a.createElement(pt.a,null,n.renderTable(l)),"UserInput"!==n.state.calibMethod&&o.a.createElement(pt.a,null,n.renderResult(l)),o.a.createElement(pt.a,null,n.renderSaveResult(l)))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderContent)}}]),t}(ht);_n.propTypes={endPE:dt.a.array,result:dt.a.object,toolIds:dt.a.array};var Rn=Object(xe.a)(Ue,Te,He,function(e,t,n){return{endPE:e,result:t,toolIds:n}});var Pn=Object(s.b)(function(e,t){return Rn(e,t)},{deleteResultByChannel:me})(_n),wn=n(97),Nn=n.n(wn),kn=nn.a.Option,In=Nn.a.Group,Tn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).calibMethods={CalibZF:"\u65e0\u8d1f\u8f7d\u9996\u6b21\u6807\u5b9a",CalibZO:"\u5de5\u5177\u8d1f\u8f7d\u96f6\u4f4d\u504f\u79fb\u91cf\u6807\u5b9a",CalibZL:"\u5916\u90e8\u8d1f\u8f7d\u7684\u96f6\u70b9\u6807\u5b9a"},n.state={calibMethod:"CalibZF",toolId:0,toolName:"",pes:[],showCalibResult:!1},n.handleSelectToolId=function(e){n.setState({toolId:e,pes:[],showCalibResult:!1})},n.handleSelectCalibMethod=function(e){n.setState({calibMethod:e.target.value,showCalibResult:!1})},n.renderContent=function(e){var t=e.getPrefixCls,a=Object(p.a)(n),r=a.props,c=r.prefixCls,l=r.cell,s=r.toolIds,i=r.deleteResultByChannel,u=a.state,d=u.toolId,m=u.calibMethod,b=t("zero-calib",c);return o.a.createElement("div",{className:"".concat(b)},o.a.createElement(pt.a,null,o.a.createElement(fn.a,null,o.a.createElement(In,{onChange:n.handleSelectCalibMethod,value:m,className:"".concat(b,"-options")},Object.keys(a.calibMethods).map(function(e){return o.a.createElement(Nn.a,{key:e,value:e},a.calibMethods[e])})))),"CalibZF"!==m&&o.a.createElement(pt.a,null,o.a.createElement(fn.a,{className:"".concat(b,"-select")},o.a.createElement(nn.a,{size:"small",placeholder:"\u9009\u62e9\u5de5\u5177",onChange:a.handleSelectToolId,value:d},s.map(function(e){return o.a.createElement(kn,{value:e,key:e},"\u5de5\u5177",e)})),o.a.createElement("span",null,"tool_",d))),o.a.createElement(pt.a,null,o.a.createElement(fn.a,{className:"".concat(b,"-buttons")},[0,1,2].map(function(e){return o.a.createElement(pt.a,{key:e},o.a.createElement(ft.a,{type:"primary",onClick:function(){i(l.i),a.setState({showCalibResult:!0}),"CalibZF"===m?a.sendCmd("".concat(m," --axis_id=").concat(2*e),l.i):a.sendCmd("".concat(m," --axis_id=").concat(2*e," --tool_id=").concat(d),l.i)},onMouseDown:function(){i(l.i),a.setState({showCalibResult:!0}),"CalibZF"===m?a.getOnMouseDownFn("".concat(m," --axis_id=").concat(2*e),l.i)():a.getOnMouseDownFn("".concat(m," --axis_id=").concat(2*e," --tool_id=").concat(d),l.i)()},onMouseUp:function(){a.getOnMouseUpFn()()},onMouseOut:function(){a.getOnMouseUpFn()()}},"\u6821\u6b63A",2*e+1),o.a.createElement(ft.a,{type:"primary",onClick:function(){i(l.i),a.setState({showCalibResult:!0}),"CalibZF"===m?a.sendCmd("".concat(m," --axis_id=").concat(2*e+1),l.i):a.sendCmd("".concat(m," --axis_id=").concat(2*e+1," --tool_id=").concat(d),l.i)},onMouseDown:function(){i(l.i),a.setState({showCalibResult:!0}),"CalibZF"===m?a.getOnMouseDownFn("".concat(m," --axis_id=").concat(2*e+1),l.i)():a.getOnMouseDownFn("".concat(m," --axis_id=").concat(2*e+1," --tool_id=").concat(d),l.i)()},onMouseUp:function(){a.getOnMouseUpFn()()},onMouseOut:function(){a.getOnMouseUpFn()()}},"\u6821\u6b63A",2*e+2))}))),o.a.createElement(pt.a,null,n.renderResult(b)))},n.renderResult=function(e){var t=n.state.showCalibResult,a=n.props.result;if(console.log(a),!t||!a)return null;var r=["cmd_response_time","id"];return 0!==a.return_code?o.a.createElement("div",{className:"".concat(e,"-calib-result error")},o.a.createElement("div",null,"\u6807\u5b9a\u9519\u8bef"),Object.keys(a).map(function(e){return!!a[e]&&-1===r.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,a[e]))})):o.a.createElement("div",{className:"".concat(e,"-calib-result success")},o.a.createElement("div",null,"\u6807\u5b9a\u6210\u529f"),Object.keys(a).map(function(e){return!!a[e]&&-1===r.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,a[e]))}))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderContent)}}]),t}(ht);Tn.propTypes={toolIds:dt.a.array.isRequired,result:dt.a.object};var Fn=Object(xe.a)(He,Te,function(e,t){return console.log(t),{toolIds:e,result:t}});var An=Object(s.b)(function(e,t){return Fn(e,t)},{deleteResultByChannel:me})(Tn),Ln=(Zt.a.Search,function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).name="\u6574\u673a\u52a8\u529b\u5b66\u6807\u5b9a",n.state={motionPos:[0,0,0,0,0,0,0,0,0,0,0,0],showCalibResult:!1,showSaveResult:!1},n.handleInsert=function(e,t){var a=Object(f.a)(n.state.motionPos);a[e]=Math.floor(t/Math.PI*180),n.setState({motionPos:a,showCalibResult:!1,showSaveResult:!1})},n.renderContent=function(e){var t=e.getPrefixCls,a=Object(p.a)(n),r=a.props,c=r.prefixCls,l=r.cell,s=r.deleteResultByChannel,i=r.currentMotionPos,u=a.state.motionPos,d=t("motion-and-load-calib",c);return i?o.a.createElement("div",{className:"".concat(d)},[0,1,2,3,4,5].map(function(e){return o.a.createElement(pt.a,{key:e,className:"".concat(d,"-buttons")},o.a.createElement("div",null,o.a.createElement("span",null," A",e+1,"+ "),o.a.createElement(Cn.a,{step:1,min:-360,max:360,size:"small",value:u[2*e],onChange:function(t){var a=Object(f.a)(n.state.motionPos);a[2*e]=t,n.setState({motionPos:a,showCalibResult:!1,showSaveResult:!1})}}),o.a.createElement(ft.a,{size:"small",type:"primary",onClick:function(){n.handleInsert(2*e,i[e])}},"\u63d2\u5165")),o.a.createElement("div",null,o.a.createElement("span",null," A",e+1,"- "),o.a.createElement(Cn.a,{step:1,min:-360,max:360,size:"small",value:u[2*e+1],onChange:function(t){var a=Object(f.a)(n.state.motionPos);a[2*e+1]=t,n.setState({motionPos:a,showCalibResult:!1,showSaveResult:!1})}}),o.a.createElement(ft.a,{size:"small",type:"primary",onClick:function(){n.handleInsert(2*e+1,i[e])}},"\u63d2\u5165")))}),o.a.createElement(pt.a,{className:"".concat(d,"-calib-button")},o.a.createElement(ft.a,{type:"primary",onClick:function(){a.setState({showCalibResult:!0,showSaveResult:!1}),s(l.i);var e=a.state.motionPos,t=a.props.currentMotionVelPercent;a.sendCmd("JointDyna --A1P=".concat(e[0]/180*Math.PI," --A1N=").concat(e[1]/180*Math.PI," --A2P=").concat(e[2]/180*Math.PI," --A2N=").concat(e[3]/180*Math.PI," --A3P=").concat(e[4]/180*Math.PI," --A3N=").concat(e[5]/180*Math.PI," --A4P=").concat(e[6]/180*Math.PI," --A4N=").concat(e[7]/180*Math.PI," --A5P=").concat(e[8]/180*Math.PI," --A5N=").concat(e[9]/180*Math.PI," --A6P=").concat(e[10]/180*Math.PI," --A6N=").concat(e[11]/180*Math.PI," --VEL=").concat(t))}},"\u5f00\u59cb\u6807\u5b9a")),o.a.createElement(pt.a,null,n.renderResult(d)),o.a.createElement(pt.a,null,n.renderSaveResult(d))):o.a.createElement("div",{className:"".concat(d," loading")},"motion pos \u8f7d\u5165\u4e2d...")},n.renderSaveResult=function(e){var t=n.state.showSaveResult,a=n.props.result;if(!t||!a)return null;var r=["cmd_response_time","id"];return 0!==a.return_code?o.a.createElement("div",{className:"".concat(e,"-calib-result error")},o.a.createElement("div",null,"\u4fdd\u5b58\u9519\u8bef"),Object.keys(a).map(function(e){return!!a[e]&&-1===r.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,a[e]))})):o.a.createElement("div",{className:"".concat(e,"-calib-result success")},o.a.createElement("div",null,"\u4fdd\u5b58\u6210\u529f"),Object.keys(a).map(function(e){return!!a[e]&&-1===r.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,a[e]))}))},n.renderResult=function(e){var t=n.state.showCalibResult,a=n.props,r=a.result,c=a.deleteResultByChannel,l=a.cell,s=Object(p.a)(n);if(!t||!r)return null;var i=["cmd_response_time","id"];return 0===r.return_code&&r.link_param?o.a.createElement("div",{className:"".concat(e,"-calib-result success")},o.a.createElement("div",null,"\u6807\u5b9a\u6210\u529f"),Object.keys(r).map(function(e){return!!r[e]&&-1===i.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,r[e]))}),o.a.createElement(ft.a,{type:"primary",onClick:function(){s.setState({showCalibResult:!1,showSaveResult:!0}),c(l.i);var e="JointDynaSave";r.link_param.forEach(function(t,n){e+=" --P".concat(n+1,"=").concat(t)}),s.sendCmd(e,l.i)}},"\u4fdd\u5b58")):o.a.createElement("div",{className:"".concat(e,"-calib-result error")},o.a.createElement("div",null,"\u6807\u5b9a\u9519\u8bef"),Object.keys(r).map(function(e){return!!r[e]&&-1===i.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,r[e]))}))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderContent)}}]),t}(ht));Ln.propTypes={toolIds:dt.a.array.isRequired,result:dt.a.object};var Dn=Object(xe.a)(He,Te,Be,We,function(e,t,n,a){return{toolIds:e,result:t,currentMotionPos:n,currentMotionVelPercent:a}});var Un=Object(s.b)(function(e,t){return Dn(e,t)},{deleteResultByChannel:me})(Ln),Bn=(Zt.a.Search,Nn.a.Group),Xn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).name="\u672b\u7aef\u8d1f\u8f7d\u6807",n.state={motionPos:[0,0,0,0,0,0],input:[0,0,0,0,0,0,0,0,0,0],method:"input",showLoadedCalibResult:!1,showLoadedSaveResult:!1,showUnloadedCalibResult:!1,showUnloadedSaveResult:!1,showInputSaveResult:!1},n.inputLabels=["mass","cogx","cogy","cogz","ixx","iyy","izz","ixy","iyz","ixz"],n.updateInput=function(e,t){var a=Object(f.a)(n.state.input);a[e]=t,n.setState({input:a,showLoadedCalibResult:!1,showLoadedSaveResult:!1,showUnloadedCalibResult:!1,showUnloadedSaveResult:!1,showInputSaveResult:!1})},n.updateMotionPos=function(e,t){var a=Object(f.a)(n.state.motionPos);a[e]=t,n.setState({motionPos:a,showLoadedCalibResult:!1,showLoadedSaveResult:!1,showUnloadedCalibResult:!1,showUnloadedSaveResult:!1,showInputSaveResult:!1})},n.handleInsert=function(e,t){var a=Object(f.a)(n.state.motionPos);a[e]=Math.floor(t/Math.PI*180),n.setState({motionPos:a,showLoadedCalibResult:!1,showLoadedSaveResult:!1,showUnloadedCalibResult:!1,showUnloadedSaveResult:!1,showInputSaveResult:!1})},n.handleSelectInputMethod=function(e){n.setState({method:e.target.value,showLoadedCalibResult:!1,showLoadedSaveResult:!1,showUnloadedCalibResult:!1,showUnloadedSaveResult:!1,showInputSaveResult:!1})},n.renderInput=function(e){var t=n.state,a=t.input,c=t.showInputSaveResult,l=Object(p.a)(n),s=l.props,i=s.deleteResultByChannel,u=s.cell;return o.a.createElement(r.Fragment,null,[0,1,2,3,4].map(function(t,r){return o.a.createElement(pt.a,{key:t,className:"".concat(e,"-input")},o.a.createElement("div",null,o.a.createElement("span",null," ",n.inputLabels[2*t]," "),o.a.createElement(Cn.a,{step:1,min:-360,max:360,value:a[2*t],size:"small",onChange:function(e){l.updateInput(2*t,e)}})),o.a.createElement("div",null,o.a.createElement("span",null," ",n.inputLabels[2*t+1]," "),o.a.createElement(Cn.a,{step:1,min:-360,max:360,value:a[2*t+1],size:"small",onChange:function(e){l.updateInput(2*t+1,e)}})))}),o.a.createElement(pt.a,{className:"".concat(e,"-calib-button")},o.a.createElement(ft.a,{type:"primary",onClick:function(){l.setState({showLoadedCalibResult:!1,showLoadedSaveResult:!1,showUnloadedCalibResult:!1,showUnloadedSaveResult:!1,showInputSaveResult:!0}),i(u.i);var e="LoadDynaSave1";a.forEach(function(t,n){e+=" --P".concat(n+1,"=").concat(t/180*Math.PI)}),l.sendCmd(e,u.i)}},"\u4fdd\u5b58")),c&&n.renderSaveResult(e))},n.renderContent=function(e){var t=e.getPrefixCls,a=Object(p.a)(n),r=a.props,c=r.prefixCls,l=r.cell,s=r.deleteResultByChannel,i=r.currentMotionPos,u=a.state,d=u.motionPos,m=u.method,b=t("motion-and-load-calib",c);return i?o.a.createElement("div",{className:"".concat(b)},o.a.createElement(pt.a,null,o.a.createElement(fn.a,null,o.a.createElement(Bn,{onChange:n.handleSelectInputMethod,value:m,className:"".concat(b,"-options")},o.a.createElement(Nn.a,{key:"calib",value:"calib"},"\u6807\u5b9a"),o.a.createElement(Nn.a,{key:"input",value:"input"},"\u8f93\u5165")))),"input"===m&&n.renderInput(b),"calib"===m&&o.a.createElement(pt.a,{className:"".concat(b,"-title")},"\u8f93\u5165\u5173\u8282\u5141\u8fd0\u52a8\u8303\u56f4"),"calib"===m&&[3,5,6].map(function(e,t){return o.a.createElement(pt.a,{key:e,className:"".concat(b,"-buttons")},o.a.createElement("div",null,o.a.createElement("span",null," A",e,"+ "),o.a.createElement(Cn.a,{step:1,min:-360,max:360,size:"small",value:d[2*t],onChange:function(e){n.updateMotionPos(2*t,e)}}),o.a.createElement(ft.a,{size:"small",type:"primary",onClick:function(){n.handleInsert(2*t,i[e-1])}},"\u63d2\u5165")),o.a.createElement("div",null,o.a.createElement("span",null," A",e,"- "),o.a.createElement(Cn.a,{step:1,min:-360,max:360,size:"small",value:d[2*t+1],onChange:function(e){n.updateMotionPos(2*t+1,e)}}),o.a.createElement(ft.a,{size:"small",type:"primary",onClick:function(){n.handleInsert(2*t+1,i[e-1])}},"\u63d2\u5165")))}),"calib"===m&&o.a.createElement(pt.a,{className:"".concat(b,"-calib-boxes")},o.a.createElement(fn.a,null,o.a.createElement(ft.a,{type:"primary",onClick:function(){a.setState({showLoadedCalibResult:!1,showLoadedSaveResult:!1,showUnloadedCalibResult:!0,showUnloadedSaveResult:!1,showInputSaveResult:!1}),s(l.i);var e=a.state.motionPos,t=a.props.currentMotionVelPercent;a.sendCmd("LoadDyna --A3P=".concat(e[0]/180*Math.PI," --A3N=").concat(e[1]/180*Math.PI," --A5P=").concat(e[2]/180*Math.PI," --A5N=").concat(e[3]/180*Math.PI," --A6P=").concat(e[4]/180*Math.PI," --A6N=").concat(e[5]/180*Math.PI," --VEL=").concat(t," --TYPE=1"))}},"\u65e0\u8d1f\u8f7d\u6807\u5b9a"),a.state.showUnloadedCalibResult&&a.renderResult(b,"LoadDynaSave0",{showLoadedCalibResult:!1,showLoadedSaveResult:!1,showUnloadedCalibResult:!1,showUnloadedSaveResult:!0,showInputSaveResult:!1}),a.state.showUnloadedSaveResult&&a.renderSaveResult(b)),o.a.createElement(fn.a,null,o.a.createElement(ft.a,{type:"primary",onClick:function(){a.setState({showLoadedCalibResult:!0,showLoadedSaveResult:!1,showUnloadedCalibResult:!1,showUnloadedSaveResult:!1,showInputSaveResult:!1}),s(l.i);var e=a.state.motionPos,t=a.props.currentMotionVelPercent;a.sendCmd("LoadDyna --A3P=".concat(e[0]/180*Math.PI," --A3N=").concat(e[1]/180*Math.PI," --A5P=").concat(e[2]/180*Math.PI," --A5N=").concat(e[3]/180*Math.PI," --A6P=").concat(e[4]/180*Math.PI," --A6N=").concat(e[5]/180*Math.PI," --VEL=").concat(t," --TYPE=-1"))}},"\u8d1f\u8f7d\u6807\u5b9a"),a.state.showLoadedCalibResult&&a.renderResult(b,"LoadDynaSave1",{showLoadedCalibResult:!1,showLoadedSaveResult:!0,showUnloadedCalibResult:!1,showUnloadedSaveResult:!1,showInputSaveResult:!1}),a.state.showLoadedSaveResult&&a.renderSaveResult(b)))):o.a.createElement("div",{className:"".concat(b," loading")},"motion pos \u8f7d\u5165\u4e2d...")},n.renderSaveResult=function(e){var t=n.props.result;if(!t)return null;var a=["cmd_response_time","id"];return 0!==t.return_code?o.a.createElement("div",{className:"".concat(e,"-box-result error")},o.a.createElement("div",null,"\u4fdd\u5b58\u9519\u8bef"),Object.keys(t).map(function(e){return!!t[e]&&-1===a.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,t[e]))}),o.a.createElement("div",null)):o.a.createElement("div",{className:"".concat(e,"-box-result success")},o.a.createElement("div",null,"\u4fdd\u5b58\u6210\u529f"),Object.keys(t).map(function(e){return!!t[e]&&-1===a.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,t[e]))}),o.a.createElement("div",null))},n.renderResult=function(e,t,a){var r=Object(p.a)(n),c=["cmd_response_time","id"],l=r.props,s=l.result,i=l.cell,u=l.deleteResultByChannel;return s?0===s.return_code&&s.link_param?o.a.createElement("div",{className:"".concat(e,"-box-result success")},o.a.createElement("div",null,"\u6807\u5b9a\u6210\u529f"),Object.keys(s).map(function(e){return!!s[e]&&-1===c.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,s[e]))}),o.a.createElement("div",null,o.a.createElement(ft.a,{type:"primary",onClick:function(){r.setState(a),u(i.i);var e=t;s.link_param.forEach(function(t,n){e+=" --P".concat(n+1,"=").concat(t)}),r.sendCmd(e,i.i)}},"\u4fdd\u5b58"))):o.a.createElement("div",{className:"".concat(e,"-box-result error")},o.a.createElement("div",null,"\u6807\u5b9a\u9519\u8bef"),Object.keys(s).map(function(e){return!!s[e]&&-1===c.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,s[e]))}),o.a.createElement("div",null)):null},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderContent)}}]),t}(ht);Xn.propTypes={toolIds:dt.a.array.isRequired,result:dt.a.object};var Vn=Object(xe.a)(He,Te,Be,We,function(e,t,n,a){return{toolIds:e,result:t,currentMotionPos:n,currentMotionVelPercent:a}});var zn=Object(s.b)(function(e,t){return Vn(e,t)},{deleteResultByChannel:me})(Xn),Jn=n(534),qn=n.n(Jn),Hn=n(535),Gn=n.n(Hn),Wn=nn.a.Option,Zn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).name="\u6784\u578b\u53c2\u6570\u914d",n.width=24,n.height=12,n.icon=function(e){return o.a.createElement(_.a,e)},n.state={type:"six_axes",inputs:{},showSaveResult:!1},n.handleSelectType=function(e){var t=n.props;(0,t.deleteResultByChannel)(t.cell.i),n.setState({type:e,inputs:{},showSaveResult:!1})},n.updateInput=function(e,t){var a=Object(h.a)({},n.state.inputs);a[e]=t,n.setState({inputs:a})},n.renderSixAxesInput=function(e){var t=n.state,a=t.inputs,c=t.showSaveResult,l=Object(p.a)(n),s=l.props,i=s.deleteResultByChannel,u=s.cell;return o.a.createElement(r.Fragment,null,["a1","a2","a3","d1","d3","d4","tool0"].map(function(t,n){return o.a.createElement(pt.a,{key:t,className:"".concat(e,"-input")},o.a.createElement("span",null," ",t," "),o.a.createElement(Cn.a,{disabled:c,step:1,value:a[t],size:"small",onChange:function(e){l.updateInput(t,e)}}))}),o.a.createElement(pt.a,{className:"".concat(e,"-save-button")},o.a.createElement(ft.a,{type:"primary",disabled:c,onClick:function(){l.setState({showSaveResult:!0}),i(u.i);var e=l.state.inputs,t="setdh --six_axes";Object.keys(e).forEach(function(n){t+=" --".concat(n,"_six_axes=").concat(e[n]/1e3)}),l.sendCmd(t,u.i)}},"\u4fdd\u5b58")))},n.renderSevenAxesInput=function(e){var t=n.state,a=t.inputs,c=t.showSaveResult,l=Object(p.a)(n),s=l.props,i=s.deleteResultByChannel,u=s.cell;return o.a.createElement(r.Fragment,null,["d1","d3","d5","tool0"].map(function(t){return o.a.createElement(pt.a,{key:t,className:"".concat(e,"-input")},o.a.createElement("span",null," ",t," "),o.a.createElement(Cn.a,{disabled:c,step:1,value:a[t],size:"small",onChange:function(e){l.updateInput(t,e)}}))}),o.a.createElement(pt.a,{className:"".concat(e,"-save-button")},o.a.createElement(ft.a,{type:"primary",disabled:c,onClick:function(){l.setState({showSaveResult:!0}),i(u.i);var e=l.state.inputs,t="setdh --seven_axes";Object.keys(e).forEach(function(n){t+=" --".concat(n,"_seven_axes=").concat(e[n]/1e3)}),l.sendCmd(t,u.i)}},"\u4fdd\u5b58")))},n.renderContent=function(e){var t=e.getPrefixCls,a=Object(p.a)(n),r=t("setdh",a.props.prefixCls),c=n.state,l=c.type,s=c.showSaveResult;return o.a.createElement("div",{className:"".concat(r)},o.a.createElement(pt.a,null,o.a.createElement(fn.a,{span:12},o.a.createElement(pt.a,{className:"".concat(r,"-input")},o.a.createElement(nn.a,{size:"small",placeholder:"\u9009\u62e9\u5de5\u5177",onChange:a.handleSelectType,value:l},o.a.createElement(Wn,{value:"six_axes",key:"six_axes"},"\u516d\u8f74\u673a\u5668\u4eba"),o.a.createElement(Wn,{value:"seven_axes",key:"seven_axes"},"\u4e03\u8f74\u673a\u5668\u4eba"))),"six_axes"===l&&n.renderSixAxesInput(r),"seven_axes"===l&&n.renderSevenAxesInput(r)),o.a.createElement(fn.a,{span:12,className:"".concat(r,"-bg"),style:{backgroundImage:"url(".concat("six_axes"===l?qn.a:Gn.a,")")}}),o.a.createElement(Ut.a,{visible:s,title:"\u4fdd\u5b58",centered:!0,onCancel:function(){a.setState({showSaveResult:!1})},footer:[o.a.createElement(ft.a,{key:"close",onClick:function(){a.setState({showSaveResult:!1})}},"\u5173\u95ed")]},n.renderResult(r))))},n.renderResult=function(e){var t=n.props,a=t.result,r=(t.deleteResultByChannel,t.cell,["cmd_response_time","id"]);return a?0===a.return_code&&a.link_param?o.a.createElement("div",{className:"".concat(e,"-result success")},o.a.createElement("div",null,"\u6210\u529f"),Object.keys(a).map(function(e){return!!a[e]&&-1===r.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,a[e]))})):o.a.createElement("div",{className:"".concat(e,"-result error")},o.a.createElement("div",null,"\u9519\u8bef"),Object.keys(a).map(function(e){return!!a[e]&&-1===r.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,a[e]))})):o.a.createElement("div",{className:"".concat(e,"-result info")},o.a.createElement("div",null,"\u4fdd\u5b58\u4e2d..."))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderContent)}}]),t}(ht);Zn.propTypes={result:dt.a.object};var Kn=Object(xe.a)(Te,function(e){return{result:e}});var Qn=Object(s.b)(function(e,t){return Kn(e,t)},{deleteResultByChannel:me})(Zn),Yn=n(236),$n=n.n(Yn),ea=n(99),ta=n.n(ea),na=nn.a.Option,aa={labelCol:{span:4},wrapperCol:{span:8}},ra=ta.a.Item,oa=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault();var t=n.props.createRobotModel;n.props.form.validateFields(function(e,n){e||t(n)})},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,n=(t.prefixCls,t.visible),a=t.creatingRobotModel,r=t.creatingRobotModelError,c=t.hideCreateRobotModelModal;return o.a.createElement(Ut.a,{visible:n,title:"\u521b\u5efa\u673a\u5668\u4eba",onOk:this.handleSubmit,okText:"\u521b\u5efa",cancelText:"\u53d6\u6d88",onCancel:function(){c()},centered:!0},o.a.createElement(ta.a,{onSubmit:this.handleSubmit,className:"login-form"},o.a.createElement(ra,Object.assign({},aa,{label:"\u54c1\u724c"}),e("brand",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u673a\u5668\u4eba\u54c1\u724c!"}]})(o.a.createElement(Zt.a,{placeholder:"Brand"}))),o.a.createElement(ra,Object.assign({},aa,{label:"\u578b\u53f7"}),e("model",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u673a\u5668\u4eba\u578b\u53f7!"}]})(o.a.createElement(Zt.a,{placeholder:"Model"})))),!!a&&o.a.createElement("span",{className:"info"},"\u521b\u5efa\u4e2d..."),!!r&&o.a.createElement("span",{className:"error"},r))}}]),t}(r.Component),ca=ta.a.create()(oa),la=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).name="\u4e09\u7ef4\u6a21\u578b\u914d\u7f6e",n.state={showCalibResult:!1,showSaveResult:!1,brand:null,model:null,showCreateModal:!1},n.renderContent=function(e){var t=e.getPrefixCls,a=Object(p.a)(n),r=a.props,c=r.prefixCls,l=r.cell,s=r.deleteResultByChannel,i=r.robotModels,u=r.robotModelPartUploadSuccess,d=r.deleteRobotModelPart,m=r.deleteRobotModel,b=r.creatingRobotModel,f=r.creatingRobotModelError,h=(r.creatingRobotModelResult,r.showCreateRobotModelModal),v=r.modalVisible,E=r.createRobotModel,g=r.selectCurrentRobotBrand,O=r.selectCurrentRobotModel,C=r.hideCreateRobotModelModal,y=r.model,j=r.brand,M=(a.state.motionPos,t("model-configuration",c));if(!i)return o.a.createElement("div",{className:"".concat(M," loading")},"\u53c2\u6570\u8f7d\u5165\u4e2d...");j&&i[j]||(j=Object.keys(i)[0]),j&&(y&&i[j][y]||(y=Object.keys(i[j])[0]));var S=[];return j&&y&&(S=Object.keys(i[j][y].parts).filter(function(e){return!i[j][y].parts[e]})),o.a.createElement("div",{className:M},!!i&&y&&j&&o.a.createElement(pt.a,{className:"".concat(M,"-brand"),style:{marginBottom:20}},o.a.createElement("span",null,"\u673a\u5668\u4eba\u54c1\u724c"),o.a.createElement(nn.a,{size:"small",style:{width:200},placeholder:"\u9009\u62e9\u673a\u5668\u4eba\u54c1\u724c",onChange:function(e){n.setState({saving:!1}),s(l.i),g(e)},value:j},Object.keys(i).map(function(e){return o.a.createElement(na,{value:e,key:e},e)}))),!!i&&y&&j&&y&&!!i[j]&&o.a.createElement(pt.a,{className:"".concat(M,"-model"),style:{marginBottom:20}},o.a.createElement("span",null,"\u673a\u5668\u4eba\u578b\u53f7"),o.a.createElement(nn.a,{size:"small",style:{width:200},placeholder:"\u9009\u62e9\u673a\u5668\u4eba\u578b\u53f7",onChange:function(e){n.setState({saving:!1}),s(l.i),O(e)},value:y},Object.keys(i[j]).map(function(e){return o.a.createElement(na,{value:e,key:e},e)})),o.a.createElement(ft.a,{style:{marginLeft:10,marginBottom:20},size:"small",onClick:function(){n.setState({saving:!1}),s(l.i),m(j,y)}},"\u5220\u9664")),o.a.createElement(pt.a,{className:"".concat(M,"-model")},o.a.createElement(ft.a,{size:"small",onClick:function(){n.setState({saving:!1}),s(l.i),h()}},"\u6dfb\u52a0\u673a\u5668\u4eba"),o.a.createElement(ca,{visible:v,hideCreateRobotModelModal:C,centered:!0,createRobotModel:E,creatingRobotModel:b,creatingRobotModelError:f})),o.a.createElement(pt.a,{className:"".concat(M,"-parts")},!!i&&!!i[j]&&!!i[j][y]&&!!i[j][y].parts&&Object.keys(i[j][y].parts).map(function(e){return i[j][y].parts[e]&&[].push({uid:"-1",name:i[j][y].parts[e],status:"done",url:""}),o.a.createElement(pt.a,{className:"".concat(M,"-part ").concat(n.state.saving&&!i[j][y].parts[e]&&"error"),key:e},o.a.createElement("span",null,"PART ",e,":"),!!i[j][y].parts[e]&&o.a.createElement("span",{className:"".concat(M,"-part-file")},o.a.createElement(_.a,{type:"file-markdown"})," ",i[j][y].parts[e],o.a.createElement(_.a,{type:"close",className:"".concat(M,"-delete"),onClick:function(){d(j,y,e)}})),!i[j][y].parts[e]&&o.a.createElement($n.a,{className:"".concat(M,"-part-upload"),multiple:!1,action:"/api/robots/".concat(j,"/").concat(y,"/parts/").concat(e),showUploadList:!1,onChange:function(e){var t=e.file;e.fileList,e.event;"done"===t.status&&u(t.response)}},o.a.createElement(ft.a,null,o.a.createElement(_.a,{type:"upload"}),"\u4e0a\u4f20")))})),o.a.createElement(pt.a,{className:"".concat(M,"-save")},o.a.createElement(ft.a,{size:"large",type:"primary",onClick:function(){if(n.setState({saving:!0}),s(l.i),0===S.length){var e=i[j][y].parts,t=i[j][y].path;n.sendCmd("cs_stop");var a="setppath --file_path="+Object.keys(e).map(function(n){return"".concat(t,"/").concat(e[n])}).join(";");n.sendCmd(a),n.sendCmd("savexml")}}},"\u4fdd\u5b58"),n.state.saving&&S.length>0&&o.a.createElement("p",{className:"error"},"\u8bf7\u4e0a\u4f20\u673a\u5668\u4eba\u6a21\u578b  ",S.join(","))))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.loadRobotModels()}},{key:"render",value:function(){return o.a.createElement(v.ConfigConsumer,null,this.renderContent)}}]),t}(ht);la.propTypes={result:dt.a.object};var sa=Object(xe.a)(Te,function(e){return e.robot.robotModels},function(e){return e.robot.creatingRobotModel},function(e){return e.robot.creatingRobotModelError},function(e){return e.robot.creatingRobotModelResult},function(e){return e.robot.createRobotModelModalVisible},function(e){return e.robot.currentRobotBrand},function(e){return e.robot.currentRobotModel},function(e,t,n,a,r,o,c,l){return{robotModels:t,result:e,creatingRobotModel:n,creatingRobotModelError:a,creatingRobotModelResult:r,modalVisible:o,brand:c,model:l}});var ia=Object(s.b)(function(e,t){return sa(e,t)},{deleteResultByChannel:me,loadRobotModels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return V(pe,{requiredFields:e})},robotModelPartUploadSuccess:function(e){return V("ROBOT_MODEL_PART_UPLOAD_SUCCESS",{model:e})},deleteRobotModelPart:function(e,t,n){return V(fe,{brand:e,model:t,part:n})},deleteRobotModel:function(e,t){return V(ve,{brand:e,model:t})},createRobotModel:function(e){return V(ge,{model:e})},showCreateRobotModelModal:function(){return V("SHOW_CREATE_ROBOT_MODEL_MODAL")},hideCreateRobotModelModal:function(){return V("HIDE_CREATE_ROBOT_MODEL_MODAL")},selectCurrentRobotBrand:function(e){return V("SELECT_CURRENT_ROBOT_BRAND",{brand:e})},selectCurrentRobotModel:function(e){return V("SELECT_CURRENT_ROBOT_MODEL",{model:e})}})(la),ua=n(232),da=n(190),ma=n.n(da),pa=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.filter,n=e.result;return t=t||[],o.a.createElement("div",this.props,Object.keys(n).map(function(e){return!!n[e]&&-1===t.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,n[e]))}))}}]),t}(r.Component),ba=function e(){Object(i.a)(this,e),this.toXML=function(){throw"toXML not implemented"},this.toJSON=function(){throw"toJSON not implemented"}};ba.FromXML=function(e){throw"FromXML not implemented"},ba.FromJSON=function(e){throw"FromJSON not implemented"},ba.GetNumber=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{return JSON.parse(e)}catch(n){return t}},ba.GetDegreeNumber=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{return JSON.parse(e)/Math.PI*180}catch(n){return t}},ba.ToRadian=function(e){return e/180*Math.PI},ba.ToXMLAttrString=function(e,t){return t||0===t?"".concat(e,'="').concat(t,'"'):""};var fa=ba,ha=function(e){function t(e,n,a,r){var o;return Object(i.a)(this,t),(o=Object(d.a)(this,Object(m.a)(t).call(this))).toXML=function(){return"<PdoEntry ".concat(t.ToXMLAttrString("name",o.name)," ").concat(t.ToXMLAttrString("index",o.index),"  ").concat(t.ToXMLAttrString("subindex",o.subIndex)," ").concat(t.ToXMLAttrString("size",o.size)," />")},o.toJSON=function(){return{name:o.name,index:o.index,subIndex:o.subIndex,size:o.size}},o.name=e,o.index=n,o.subIndex=a,o.size=r,o}return Object(b.a)(t,e),t}(fa);ha.FromXML=function(e){return new ha(e.getAttribute("name"),e.getAttribute("index"),e.getAttribute("subindex"),e.getAttribute("size"))},ha.FromJSON=function(e){var t=e.name,n=e.index,a=e.subIndex,r=e.size;return new ha(t,n,a,r)};var va=ha,Ea=function(e){function t(e,n,a){var r;return Object(i.a)(this,t),(r=Object(d.a)(this,Object(m.a)(t).call(this))).toXML=function(){return"<Pdo ".concat(t.ToXMLAttrString("name",r.name)," ").concat(t.ToXMLAttrString("index",r.index),">").concat(r.entries?r.entries.map(function(e){return e.toXML()}).join(""):"","</Pdo>")},r.toJSON=function(){return{name:r.name,index:r.index,entries:r.entries&&r.entries.map(function(e){return e.toJSON()})}},r.index=e,r.name=n,r.entries=a,r}return Object(b.a)(t,e),t}(fa);Ea.FromXML=function(e){return new Ea(e.getAttribute("index"),e.getAttribute("name"),Object(f.a)(e.getElementsByTagName("PdoEntry")).filter(function(e){return 1===e.nodeType}).map(va.FromXML))},Ea.FromJSON=function(e){var t=e.index,n=e.name,a=e.entries;return new Ea(t,n,a&&a.map(va.FromJSON))};var ga=Ea,Oa=function(e){function t(e,n){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this))).toXML=function(){return"<SyncManager ".concat(t.ToXMLAttrString("is_tx",a.isTx),">").concat(a.pdoes?a.pdoes.map(function(e){return e.toXML()}).join(""):"","</SyncManager>")},a.toJSON=function(){return{isTx:a.isTx,pdoes:a.pdoes&&a.pdoes.map(function(e){return e.toJSON()})}},a.isTx=e,a.pdoes=n,a}return Object(b.a)(t,e),t}(fa);Oa.FromXML=function(e){return new Oa(e.getAttribute("is_tx"),Object(f.a)(e.getElementsByTagName("Pdo")).filter(function(e){return 1===e.nodeType}).map(ga.FromXML))},Oa.FromJSON=function(e){var t=e.isTx,n=e.pdoes;return new Oa(t,n&&n.map(ga.FromJSON))};var Ca=Oa,ya=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this))).toXML=function(){return"<SyncManagerPoolObject>".concat(n.syncManagers?n.syncManagers.map(function(e){return e.toXML()}).join(""):"","</SyncManagerPoolObject>")},n.toJSON=function(){return{syncManagers:n.syncManagers&&n.syncManagers.map(function(e){return e.toJSON()})}},n.syncManagers=e,n}return Object(b.a)(t,e),t}(fa);ya.FromXML=function(e){return new ya(Object(f.a)(e.getElementsByTagName("SyncManager")).filter(function(e){return 1===e.nodeType}).map(Ca.FromXML))},ya.FromJSON=function(e){var t=e.syncManagers;return new ya(t&&t.map(Ca.FromJSON))};var ja=ya,Ma=function(e){function t(e,n,a,r,o,c,l){var s;Object(i.a)(this,t),(s=Object(d.a)(this,Object(m.a)(t).call(this))).toXML=function(){return"<EthercatSlave ".concat(t.ToXMLAttrString("phy_id",s.phyId)," ").concat(t.ToXMLAttrString("vendor_id",s.vendorId)," ").concat(t.ToXMLAttrString("product_code",s.productCode)," ").concat(t.ToXMLAttrString("revision_num",s.revisionNum)," ").concat(t.ToXMLAttrString("dc_assign_activate",s.dcAssignActivate),"> ").concat(s.syncManagerPoolObjects?s.syncManagerPoolObjects.map(function(e){return e.toXML()}).join(""):"","</EthercatSlave>")},s.toJSON=function(){return{uuid:s.uuid,isMotion:!1,phyId:s.phyId,vendorId:s.vendorId,productCode:s.productCode,revisionNum:s.revisionNum,dcAssignActivate:s.dcAssignActivate,syncManagerPoolObjects:s.syncManagerPoolObjects&&s.syncManagerPoolObjects.map(function(e){return e.toJSON()})}},s.uuid=e;try{s.phyId=JSON.parse(n)}catch(u){console.log(n),s.phyId=0}return s.vendorId=s.vendorId,s.productCode=s.productCode,s.revisionNum=o,s.dcAssignActivate=c,s.syncManagerPoolObjects=l,s}return Object(b.a)(t,e),t}(fa);Ma.FromXML=function(e){return new Ma(Math.random().toString(36),e.getAttribute("phy_id"),e.getAttribute("vendor_id"),e.getAttribute("product_code"),e.getAttribute("revision_num"),e.getAttribute("dc_assign_activate"),Object(f.a)(e.getElementsByTagName("SyncManagerPoolObject")).filter(function(e){return 1===e.nodeType}).map(ja.FromXML))},Ma.FromJSON=function(e){var t=e.uuid,n=e.phyId,a=e.vendorId,r=e.productCode,o=e.revisionNum,c=e.dcAssignActivate,l=e.syncManagerPoolObjects;return new Ma(t||Math.random().toString(36),n,a,r,o,c,l&&l.map(ja.FromJSON))};var Sa=Ma,xa=function(e){function t(e,n,a,r,o,c,l,s,u,p,b,f,h,v,E,g,O,C){var y;return Object(i.a)(this,t),(y=Object(d.a)(this,Object(m.a)(t).call(this))).toXML=function(){return"<EthercatMotion ".concat(t.ToXMLAttrString("phy_id",y.phyId)," ").concat(t.ToXMLAttrString("vendor_id",y.vendorId)," ").concat(t.ToXMLAttrString("product_code",y.productCode)," ").concat(t.ToXMLAttrString("revision_num",y.revisionNum)," ").concat(t.ToXMLAttrString("dc_assign_activate",y.dcAssignActivate)," ").concat(t.ToXMLAttrString("max_pos",t.ToRadian(y.maxPos))," ").concat(t.ToXMLAttrString("min_pos",t.ToRadian(y.minPos)),"  ").concat(t.ToXMLAttrString("max_vel",t.ToRadian(y.maxVel))," ").concat(t.ToXMLAttrString("min_vel",t.ToRadian(y.minVel))," ").concat(t.ToXMLAttrString("max_acc",t.ToRadian(y.maxAcc))," ").concat(t.ToXMLAttrString("min_acc",t.ToRadian(y.minAcc))," ").concat(t.ToXMLAttrString("max_pos_following_error",y.maxPosFollowingError)," ").concat(t.ToXMLAttrString("max_vel_following_error",y.maxVelFollowingError)," ").concat(t.ToXMLAttrString("pos_factor",y.posFactor)," ").concat(t.ToXMLAttrString("pos_offset",t.ToRadian(y.posOffset))," ").concat(t.ToXMLAttrString("home_pos",t.ToRadian(y.homePos))," >").concat(y.syncManagerPoolObjects?y.syncManagerPoolObjects.map(function(e){return e.toXML()}).join(""):"","</EthercatMotion>")},y.toJSON=function(){return{uuid:y.uuid,isMotion:!0,phyId:y.phyId,vendorId:y.vendorId,productCode:y.productCode,revisionNum:y.revisionNum,dcAssignActivate:y.dcAssignActivate,maxPos:y.maxPos,minPos:y.minPos,maxVel:y.maxVel,minVel:y.minVel,maxAcc:y.maxAcc,minAcc:y.minAcc,maxPosFollowingError:y.maxPosFollowingError,maxVelFollowingError:y.maxVelFollowingError,posFactor:y.posFactor,posOffset:y.posOffset,homePos:y.homePos,syncManagerPoolObjects:y.syncManagerPoolObjects&&y.syncManagerPoolObjects.map(function(e){return e.toJSON()})}},y.uuid=e,y.phyId=n,y.vendorId=a,y.productCode=r,y.revisionNum=o,y.dcAssignActivate=c,y.maxPos=l,y.minPos=s,y.maxVel=u,y.minVel=p,y.maxAcc=b,y.minAcc=f,y.maxPosFollowingError=h,y.maxVelFollowingError=v,y.posFactor=E,y.posOffset=g,y.homePos=O,y.syncManagerPoolObjects=C,y}return Object(b.a)(t,e),t}(fa);xa.FromXML=function(e){var t=xa.GetNumber(e.getAttribute("phy_id")),n=e.getAttribute("vendor_id"),a=e.getAttribute("product_code"),r=e.getAttribute("revision_num"),o=e.getAttribute("dc_assign_activate"),c=xa.GetDegreeNumber(e.getAttribute("max_pos")),l=xa.GetDegreeNumber(e.getAttribute("min_pos")),s=xa.GetDegreeNumber(e.getAttribute("max_vel")),i=xa.GetDegreeNumber(e.getAttribute("min_vel")),u=xa.GetDegreeNumber(e.getAttribute("max_acc")),d=xa.GetDegreeNumber(e.getAttribute("min_acc")),m=xa.GetNumber(e.getAttribute("max_pos_following_error")),p=xa.GetNumber(e.getAttribute("max_vel_following_error")),b=xa.GetNumber(e.getAttribute("pos_factor")),h=xa.GetDegreeNumber(e.getAttribute("pos_offset")),v=xa.GetDegreeNumber(e.getAttribute("home_pos"));return new xa(Math.random().toString(36),t,n,a,r,o,c,l,s,i,u,d,m,p,b,h,v,Object(f.a)(e.getElementsByTagName("SyncManagerPoolObject")).filter(function(e){return 1===e.nodeType}).map(ja.FromXML))},xa.FromJSON=function(e){var t=e.uuid,n=e.phyId,a=e.vendorId,r=e.productCode,o=e.revisionNum,c=e.dcAssignActivate,l=e.maxPos,s=e.minPos,i=e.maxVel,u=e.minVel,d=e.maxAcc,m=e.minAcc,p=e.maxPosFollowingError,b=e.maxVelFollowingError,f=e.posFactor,h=e.posOffset,v=e.homePos,E=e.syncManagerPoolObjects;return new xa(t||Math.random().toString(36),n,a,r,o,c,l,s,i,u,d,m,p,b,f,h,v,E&&E.map(ja.FromJSON))};var _a=xa,Ra=function(e){function t(e,n,a){var r;return Object(i.a)(this,t),(r=Object(d.a)(this,Object(m.a)(t).call(this))).toXML=function(){return"<SlavePoolObject ".concat(t.ToXMLAttrString("name",r.name),">").concat(r.slaves?r.slaves.map(function(e){return e.toXML()}).join(""):"").concat(r.motions?r.motions.map(function(e){return e.toXML()}).join(""):"","</SlavePoolObject>")},r.toJSON=function(){return{name:r.name,slaves:r.slaves&&r.slaves.map(function(e){return e.toJSON()}),motions:r.motions&&r.motions.map(function(e){return e.toJSON()})}},r.name=e,r.slaves=n,r.motions=a,r}return Object(b.a)(t,e),t}(fa);Ra.FromXML=function(e){return new Ra(e.getAttribute("name"),Object(f.a)(e.getElementsByTagName("EthercatSlave")).filter(function(e){return 1===e.nodeType}).map(Sa.FromXML),Object(f.a)(e.getElementsByTagName("EthercatMotion")).filter(function(e){return 1===e.nodeType}).map(_a.FromXML))},Ra.FromJSON=function(e){var t=e.name,n=e.slaves,a=e.motions;return new Ra(t,n&&n.map(Sa.FromJSON),a&&a.map(_a.FromJSON))};var Pa=Ra,wa=function(e){function t(e,n){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this))).toXML=function(){return"<EthercatController ".concat(t.ToXMLAttrString("name",a.name),">").concat(a.slavePoolObjects?a.slavePoolObjects.map(function(e){return e.toXML()}).join(""):"","</EthercatController>")},a.toJSON=function(){return{name:a.name,slavePoolObjects:a.slavePoolObjects&&a.slavePoolObjects.map(function(e){return e.toJSON()})}},a.name=e,a.slavePoolObjects=n,a}return Object(b.a)(t,e),t}(fa);wa.FromXML=function(e){return new wa(e.getAttribute("name"),Object(f.a)(e.getElementsByTagName("SlavePoolObject")).filter(function(e){return 1===e.nodeType}).map(Pa.FromXML))},wa.FromJSON=function(e){var t=e.name,n=e.slavePoolObjects;return new wa(t,n&&n.map(Pa.FromJSON))};var Na=wa,ka=function(e){function t(e,n,a){var r;return Object(i.a)(this,t),(r=Object(d.a)(this,Object(m.a)(t).call(this))).toXML=function(){return"<Device ".concat(t.ToXMLAttrString("Name",r.name)," ").concat(t.ToXMLAttrString("ProductCode",r.productCode)," ").concat(t.ToXMLAttrString("RevisionNo",r.revisionNo)," />")},r.toJSON=function(){return{name:r.name,productCode:r.productCode,revisionNo:r.revisionNo}},r.name=e,r.productCode=n,r.revisionNo=a,r}return Object(b.a)(t,e),t}(fa);ka.FromXML=function(e){return new ka(e.getAttribute("Name"),e.getAttribute("ProductCode"),e.getAttribute("RevisionNo"))},ka.FromJSON=function(e){var t=e.name,n=e.productCode,a=e.revisionNo;return new ka(t,n,a)};var Ia=ka,Ta=function(e){function t(e,n,a){var r;return Object(i.a)(this,t),(r=Object(d.a)(this,Object(m.a)(t).call(this))).toXML=function(){return"<Vendor ".concat(t.ToXMLAttrString("Id",r.id)," ").concat(t.ToXMLAttrString("Name",r.name),">").concat(r.devices&&r.devices.map(function(e){return e.toXML()}).join(""),"</Vendor>")},r.toJSON=function(){return{name:r.name,id:r.id,devices:r.devices&&r.devices.map(function(e){return e.toJSON()})}},r.id=e,r.name=n,r.devices=a,r}return Object(b.a)(t,e),t}(fa);Ta.FromXML=function(e){return new Ta(e.getAttribute("Id"),e.getAttribute("Name"),Object(f.a)(e.getElementsByTagName("Device")).map(Ia.FromXML))},Ta.FromJSON=function(e){var t=e.id,n=e.name,a=e.devices;return new Ta(t,n,a&&a.map(Ia.FromJSON))};var Fa=Ta,Aa=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this))).toXML=function(){return"<ethercat_master>".concat(n.vendors?n.vendors.map(function(e){return e.toXML()}).join(""):"","</ethercat_master>")},n.toJSON=function(){return{vendors:n.vendors&&n.vendors.map(function(e){return e.toJSON()})}},n.vendors=e,n}return Object(b.a)(t,e),t}(fa);Aa.FromXML=function(e){return new Aa(Object(f.a)(e.getElementsByTagName("Vendor")).map(Fa.FromXML))},Aa.FromJSON=function(e){var t=e.vendors;return new Aa(t&&t.map(Fa.FromJSON))};var La=function(e,t){var n=t.cell;return e.robot.resultsByChannel["".concat(n.i,"-setesipath")]},Da=function(e,t){var n=t.cell;return e.robot.resultsByChannel["".concat(n.i,"-scanslave")]},Ua=Object(xe.a)(Da,function(e){if(e&&e.controller_xml){var t=(new DOMParser).parseFromString(e.controller_xml,"text/xml").getElementsByTagName("EthercatController");if(t&&t[0])return Na.FromXML(t[0]).toJSON()}return null}),Ba=Object(xe.a)(La,function(e){if(e&&e.device_list_xml){var t=(new DOMParser).parseFromString(e.device_list_xml,"text/xml").getElementsByTagName("ethercat_master");if(t&&t[0])return Aa.FromXML(t[0]).toJSON()}return null}),Xa=Object(xe.a)(function(e,t){var n=t.cell;return e.robot.resultsByChannel["".concat(n.i,"-pdolist-for-device")]},function(e){if(console.log("xxxx",e),e&&e.pdo_list_xml){var t=(new DOMParser).parseFromString(e.pdo_list_xml,"text/xml").getElementsByTagName("EthercatSlave");if(t&&t[0])return Sa.FromXML(t[0]).toJSON()}return null}),Va=Object(xe.a)(function(e,t){var n=t.cell;return e.robot.resultsByChannel["".concat(n.i,"-pdolist-for-slave")]},function(e){return console.log(e),e&&e.device_list_xml,null}),za=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.sendCmd,a=e.cell,r=e.esiFileUploadRequest,c=e.esiFileUploadFailure,l=e.esiFileUploadSuccess,s=e.ws,i=e.esiPath,u=e.esiFileUploadingRequest,d=e.esiFileUploadingSuccess,m=e.esiFileUploadingFailure,p=e.setEsiPathResult,b=e.scanSlaveResult,f=e.deleteResultByChannel,h=e.slaves,v=e.addSlave,E=e.removeSlave,g=e.selectSlave,O=e.selectedSlave;return o.a.createElement("div",{className:"".concat(t,"-sidebar")},o.a.createElement(pt.a,{className:"".concat(t,"-buttons")},o.a.createElement($n.a,{className:"".concat(t,"-esi-upload"),accept:".xml",multiple:!1,action:"/api/esi",disabled:!s,showUploadList:!1,onChange:function(e){var t=e.file;e.fileList,e.event;"uploading"===t.status?(f("".concat(a.i,"-setesipath")),f("".concat(a.i,"-scanslave")),r()):"done"===t.status?(l(t.response.path),n("cs_stop","".concat(a.i,"-stop")),n("setesipath --path=".concat(i),"".concat(a.i,"-setesipath"))):"error"===t.status&&c(t.response.error)}},o.a.createElement(ft.a,{disabled:!s},o.a.createElement(_.a,{type:"upload"}),"\u4e0a\u4f20ESI\u6587\u4ef6")),o.a.createElement(ft.a,{className:"".concat(t,"-scanslave"),disabled:!s,onClick:function(){f("".concat(a.i,"-scanslave")),p&&!p.return_code||(n("cs_stop","".concat(a.i,"-stop")),n("setesipath --path=".concat(i),"".concat(a.i,"-setesipath"))),n("scanslave","".concat(a.i,"-scanslave"))}},o.a.createElement(_.a,{type:"monitor"}),"\u626b\u63cf\u4ece\u7ad9")),o.a.createElement(pt.a,{className:"".concat(t,"-info")},!b&&!p&&u&&o.a.createElement("span",{className:"info"},"ESI\u6587\u4ef6\u4e0a\u4f20\u4e2d..."),!b&&!p&&d&&o.a.createElement("span",{className:"success"},"ESI\u6587\u4ef6\u4e0a\u4f20\u6210\u529f!"),!b&&!p&&m&&o.a.createElement("span",{className:"info"},"ESI\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25! ERROR:",m),!b&&!!p&&!!p.return_code&&o.a.createElement(pa,{className:"error",filter:["cmd_response_time","id"],result:p}),!b&&!!p&&!p.return_code&&o.a.createElement("span",{className:"success"},"setesipath \u6210\u529f!"),!!b&&!!b.return_code&&o.a.createElement(pa,{className:"error",filter:["cmd_response_time","id"],result:p}),!!b&&!b.return_code&&o.a.createElement("span",{className:"success"},"scanslave \u6210\u529f!")),!!h&&o.a.createElement(pt.a,{className:"".concat(t,"-slaves-list")},Object.keys(h).map(function(e){return o.a.createElement("div",{key:e,className:"".concat(O===e?"".concat(t,"-selected-slave"):""," ").concat(t,"-slaves-list-item"),onClick:function(){g(e)}},h[e].isMotion?"\u7535\u673a":"\u4ece\u7ad9",h[e].phyId,o.a.createElement(ft.a,{size:"small",onClick:function(t){t.preventDefault(),t.stopPropagation(),E(e)}},"\u5220\u9664"))}),o.a.createElement(pt.a,{className:"".concat(t,"-add-slave")},o.a.createElement(ft.a,{onClick:v},"\u6dfb\u52a0\u4ece\u7ad9"))))}}]),t}(r.Component),Ja=Object(xe.a)(function(e){return e.robot.esiPath},nt,La,Da,Ua,function(e){return e.robot.esiFileUploadingRequest},function(e){return e.robot.esiFileUploadingSuccess},function(e){return e.robot.esiFileUploadingFailure},Ba,function(e,t,n,a,r,o,c,l,s){return console.log(r,s),{esiPath:e,ws:t,setEsiPathResult:n,scanSlaveResult:a,scanSlaveJsonResult:r,esiFileUploadingRequest:o,esiFileUploadingSuccess:c,esiFileUploadingFailure:l,setEsiPathJSONResult:s}});var qa=Object(s.b)(function(e,t){return Ce.request(),Ja(e,t)},{esiFileUploadRequest:Ce.request,esiFileUploadFailure:Ce.failure,esiFileUploadSuccess:Ce.success,sendCmd:ue,deleteResultByChannel:me})(za),Ha=nn.a.Option,Ga=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={selectedVendor:null,selectedDevice:null},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=(e.sendCmd,e.cell,e.selectedVendor),a=(e.selectedDevice,e.selectDevice),r=e.selectVendor,c=this.props.vendors,l={size:"small",style:{width:200},placeholder:"\u9009\u62e9\u54c1\u724c",onChange:function(e){r(e)}};r&&r.id&&(l.value=r.id);var s={size:"small",style:{width:200},placeholder:"\u9009\u62e9\u578b\u53f7",onChange:function(e){a(e)}};return a&&a.name&&(s.value=a.name),o.a.createElement("div",{className:"".concat(t,"-header-bar")},c&&o.a.createElement(nn.a,l,c.map(function(e){return o.a.createElement(Ha,{value:e.id,key:e.id},e.name)})),c&&n&&n.devices&&o.a.createElement(nn.a,s,n.devices.map(function(e,t){return o.a.createElement(Ha,{value:e.name,key:t},e.name)})),o.a.createElement(ft.a,{onClick:this.props.save,type:"primary"},"\u4fdd\u5b58"))}}]),t}(r.Component),Wa=Object(xe.a)(function(){},function(e){return{result:e}});var Za=Object(s.b)(function(e,t){return Wa(e,t)},{sendCmd:ue})(Ga),Ka=n(158),Qa=n.n(Ka),Ya=ta.a.Item,$a={labelCol:{span:10},wrapperCol:{span:14}},er=function(e,t,n){"string"===typeof t&&t.match(/^(?:0[xX])?[0-9a-fA-F]+$/)?n():n("not hex")},tr=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).name="Ethercat\u4ece\u7ad9\u914d\u7f6e",n.width=24,n.height=24,n.state={selectedVendor:null,selectedDevice:null,selectedSlave:null},n.addSlave=function(){var e=Object(h.a)({},n.state.slaves);if(!Xt()(e)){var t=Math.max.apply(Math,Object(f.a)(Object.keys(e).map(function(t){return e[t].phyId})))+1,a=Object(h.a)({},e[0],{phyId:t,uuid:Math.random().toString(36)});delete a.syncManagerPoolObjects,e[a.uuid]=a,n.setState({slaves:e,saveError:null})}},n.selectSlave=function(e){var t=n.state.slaves;if(t[e]){var a=t[e],r=a.vendorId,o=a.productCode,c=a.revisionNum;r&&o&&c&&n.getEsiPdoListForDevice(r,o,c),n.setState({selectedSlave:e,saveError:null})}else n.setState({selectedSlave:null,saveError:null})},n.selectVendor=function(e){var t=n.state.vendors;n.setState({selectedVendor:t.filter(function(t){return t.id===e})[0],selectedDevice:null,saveError:null})},n.selectDevice=function(e){var t=n.state.selectedVendor;if(t){var a=t.devices.filter(function(t){return t.name===e})[0];if(n.setState({selectedDevice:a,saveError:null}),a){var r=t.id,o=a.productCode,c=a.revisionNo;r&&o&&c&&n.getEsiPdoListForDevice(r,o,c)}}},n.removeSlave=function(e){var t=Object(h.a)({},n.state.slaves);Xt()(t)||(delete t[e],n.setState({slaves:t,saveError:null}))},n.addPdo=function(e){var t=Object(h.a)({},n.state.slaves),a=n.state.selectedSlave,r=Object(h.a)({},t[a]);r.syncManagerPoolObjects=Object(f.a)(r.syncManagerPoolObjects||[]),r.syncManagerPoolObjects[0].syncManagers=Object(f.a)(r.syncManagerPoolObjects[0].syncManagers||[]),r.syncManagerPoolObjects[0].syncManagers[e]=Object(h.a)({},r.syncManagerPoolObjects[0].syncManagers[e]||{}),r.syncManagerPoolObjects[0].syncManagers[e].pdoes=[].concat(Object(f.a)(r.syncManagerPoolObjects[0].syncManagers[e].pdoes||[]),[{}]),t[a]=r,r.rnd=Math.random(),n.setState({slaves:t,saveError:null})},n.removePdo=function(e,t){var a=Object(h.a)({},n.state.slaves),r=n.state.selectedSlave,o=Object(h.a)({},a[r]);o.syncManagerPoolObjects=Object(f.a)(o.syncManagerPoolObjects||[]),o.syncManagerPoolObjects[0].syncManagers=Object(f.a)(o.syncManagerPoolObjects[0].syncManagers||[]),o.syncManagerPoolObjects[0].syncManagers[e]=Object(h.a)({},o.syncManagerPoolObjects[0].syncManagers[e]||{}),o.syncManagerPoolObjects[0].syncManagers[e].pdoes=Object(f.a)(o.syncManagerPoolObjects[0].syncManagers[e].pdoes||[]),o.syncManagerPoolObjects[0].syncManagers[e].pdoes.splice(t,1),a[r]=o,o.rnd=Math.random(),n.setState({slaves:a,saveError:null})},n.addPdoEntry=function(e,t){var a=Object(h.a)({},n.state.slaves),r=n.state.selectedSlave,o=Object(h.a)({},a[r]);o.syncManagerPoolObjects=Object(f.a)(o.syncManagerPoolObjects||[]),o.syncManagerPoolObjects[0].syncManagers=Object(f.a)(o.syncManagerPoolObjects[0].syncManagers||{}),o.syncManagerPoolObjects[0].syncManagers[e]=Object(h.a)({},o.syncManagerPoolObjects[0].syncManagers[e]||{}),o.syncManagerPoolObjects[0].syncManagers[e].pdoes=Object(f.a)(o.syncManagerPoolObjects[0].syncManagers[e].pdoes||[]),o.syncManagerPoolObjects[0].syncManagers[e].pdoes[t]=Object(h.a)({},o.syncManagerPoolObjects[0].syncManagers[e].pdoes[t]||{}),o.syncManagerPoolObjects[0].syncManagers[e].pdoes[t].entries=[].concat(Object(f.a)(o.syncManagerPoolObjects[0].syncManagers[e].pdoes[t].entries||[]),[{}]),a[r]=o,o.rnd=Math.random(),n.setState({slaves:a,saveError:null})},n.removePdoEntry=function(e,t,a){var r=Object(h.a)({},n.state.slaves),o=n.state.selectedSlave,c=Object(h.a)({},r[o]);c.syncManagerPoolObjects=Object(f.a)(c.syncManagerPoolObjects||[]),c.syncManagerPoolObjects[0].syncManagers=Object(f.a)(c.syncManagerPoolObjects[0].syncManagers||{}),c.syncManagerPoolObjects[0].syncManagers[e]=Object(h.a)({},c.syncManagerPoolObjects[0].syncManagers[e]||{}),c.syncManagerPoolObjects[0].syncManagers[e].pdoes=Object(f.a)(c.syncManagerPoolObjects[0].syncManagers[e].pdoes||[]),c.syncManagerPoolObjects[0].syncManagers[e].pdoes[t]=Object(h.a)({},c.syncManagerPoolObjects[0].syncManagers[e].pdoes[t]||{}),c.syncManagerPoolObjects[0].syncManagers[e].pdoes[t].entries=Object(f.a)(c.syncManagerPoolObjects[0].syncManagers[e].pdoes[t].entries||[]),c.syncManagerPoolObjects[0].syncManagers[e].pdoes[t].entries.splice(a,1),r[o]=c,c.rnd=Math.random(),n.setState({slaves:r,saveError:null})},n.renderSlaveInputs=function(e,t){return o.a.createElement(pt.a,null,[["name","name",t.name,[]],["vendorId","vendor id",t.vendorId,[{validator:er,message:"Please input hex"}]],["productCode","productCode",t.productCode,[{validator:er,message:"Please input hex"}]],["phyId","physical id",t.phyId,[{type:"integer",message:"Please input integer"}]],["revisionNum","revision No.",t.revisionNum,[{validator:er,message:"Please input hex"}]],["dcAssignActivate","dc assign activate",t.dcAssignActivate,[{validator:er,message:"Please input hex"}]]].map(function(t){var a;return(a=n).renderFormItemInput.apply(a,[e].concat(Object(f.a)(t),[7,!0]))}))},n.renderMotionInputs=function(e,t){return o.a.createElement(r.Fragment,null,n.renderSlaveInputs(e,t),o.a.createElement(pt.a,null,[["maxPos","max pos",t.maxPos,7,!0,.01,"\u5ea6",-360,360],["maxVel","max vel",t.maxVel,7,!0,.01,"\u5ea6/s",-360,360],["maxAcc","max acc",t.maxAcc,7,!0,.01,"\u5ea6/s2",-360,360],["minPos","min pos",t.minPos,7,!0,.01,"\u5ea6",-360,360],["minVel","min vel",t.minVel,7,!0,.01,"\u5ea6/s",-360,360],["minAcc","min acc",t.minAcc,7,!0,.01,"\u5ea6/s2",-360,360],["posFactor","pos factor",t.posFactor,7,!0,.01,"",-Number.MAX_VALUE,Number.MAX_VALUE],["posOffset","pos offset",t.posOffset,7,!0,.01,"\u5ea6",-360,360],["homePos","home pos",t.homePos,7,!0,.01,"\u5ea6",-360,360],["maxPosFollowingError","max pos following error",t.maxPosFollowingError,11,!0,1e-4,"",-Number.MAX_VALUE,Number.MAX_VALUE],["maxVelFollowingError","max vel following error",t.maxVelFollowingError,11,!0,1e-4,"",-Number.MAX_VALUE,Number.MAX_VALUE]].map(function(t){var a;return(a=n).renderFormItemNumberInput.apply(a,[e].concat(Object(f.a)(t)))})))},n.renderPdoEntry=function(e,t,a,r,c){var l=n.props.form.getFieldDecorator,s={name:[],index:[{validator:er,message:"Please input hex"}],subIndex:[{validator:er,message:"Please input hex"}],size:[{type:"integer",message:"Please input integer",transform:function(e){return Number(e)?Number(e):0}}]};return o.a.createElement(pt.a,{key:c,className:"".concat(e,"-sync-manager-pdo-entry")},o.a.createElement(fn.a,{span:4},"PDO Entry"),["name","index","subIndex","size"].map(function(e){return o.a.createElement(fn.a,{key:e,span:4},o.a.createElement(Ya,{hasFeedback:!0},l("slave.syncManagerPoolObjects[0].syncManagers[".concat(a,"].pdoes[").concat(r,"].entries[").concat(c,"].").concat(e),{initialValue:t[e],rules:[].concat(Object(f.a)(s[e]),[{required:!0,message:"Please input ".concat(e)}])})(o.a.createElement(Zt.a,{placeholder:"".concat(e),size:"small"}))))}),o.a.createElement(fn.a,{span:4},o.a.createElement(ft.a,{size:"small",type:"danger",onClick:function(){n.removePdoEntry(a,r,c)}},"DEL")))},n.renderPdo=function(e,t,a,r){var c=n.props.form.getFieldDecorator,l={name:[],index:[{validator:er,message:"Please input hex"}]};return o.a.createElement("div",{className:"".concat(e,"-sync-manager-pdo"),key:r},o.a.createElement(pt.a,{className:"".concat(e,"-sync-manager-pdo-header")},o.a.createElement(fn.a,{span:2},"Pdo ",r+1),["name","index"].map(function(e){return o.a.createElement(fn.a,{span:6,key:e},o.a.createElement(Ya,Object.assign({},$a,{label:e,hasFeedback:!0}),c("slave.syncManagerPoolObjects[0].syncManagers[".concat(a,"].pdoes[").concat(r,"].").concat(e),{initialValue:t[e],rules:[].concat(Object(f.a)(l[e]),[{required:!0,message:"Please input ".concat(e)}])})(o.a.createElement(Zt.a,{placeholder:"".concat(e),size:"small"}))))}),o.a.createElement(fn.a,{span:8,offset:2,className:"".concat(e,"-sync-manager-pdo-delete")},o.a.createElement(Ya,null,o.a.createElement(ft.a,{size:"small",type:"danger",onClick:function(){n.removePdo(a,r)}},"DEL")))),o.a.createElement("div",{className:"".concat(e,"-sync-manager-pdo-entries")},o.a.createElement(pt.a,{className:"".concat(e,"-sync-manager-pdo-entries-header")},o.a.createElement(fn.a,{span:4}),["name","index","subIndex","size"].map(function(e){return o.a.createElement(fn.a,{key:e,span:4},e)})),!!t.entries&&t.entries.map(function(t,o){return n.renderPdoEntry(e,t,a,r,o)}),o.a.createElement(pt.a,{className:"".concat(e,"-sync-manager-pdo-entries-add")},o.a.createElement(fn.a,{span:20},o.a.createElement(Ya,null,o.a.createElement(ft.a,{size:"small",type:"primary",onClick:function(){n.addPdoEntry(a,r)}},"Add Pdo Entry"))))))},n.renderSyncManager=function(e,t,a){var r=n.props.form.getFieldDecorator;return o.a.createElement("div",{className:"".concat(e,"-sync-manager"),key:a},o.a.createElement(pt.a,{className:"".concat(e,"-sync-manager-header")},"Sync Manager ",a+1,r("slave.syncManagerPoolObjects[0].syncManagers[".concat(a,"].isTx"),{initialValue:!!t.isTx})(o.a.createElement(Qa.a,null,"is_tx")),o.a.createElement(ft.a,{size:"small",type:"primary",onClick:n.addPdo.bind(Object(p.a)(n),a)},"Add PDO")),o.a.createElement("div",{className:"".concat(e,"-sync-manager-pdoes")},!!t.pdoes&&t.pdoes.map(function(t,r){return n.renderPdo(e,t,a,r)})))},n.renderForm=function(e){var t=n.state,a=t.slaves,r=t.selectedSlave,c=a[r];return o.a.createElement(ta.a,null,!!c.isMotion&&n.renderMotionInputs(e,c),!c.isMotion&&n.renderSlaveInputs(e,c),o.a.createElement(pt.a,{className:"".concat(e,"-is-motion")},o.a.createElement(fn.a,{span:23},o.a.createElement(Qa.a,{checked:c.isMotion,onChange:function(e){(a=Object(h.a)({},a))[r]=Object(h.a)({},c,{isMotion:e.target.checked}),n.setState({slaves:a,saveError:null})}},"isMotion"))),!!c&&c.syncManagerPoolObjects&&c.syncManagerPoolObjects[0]&&c.syncManagerPoolObjects[0].syncManagers&&c.syncManagerPoolObjects[0].syncManagers.map(function(t,a){return n.renderSyncManager(e,t,a)}))},n.save=function(e){e.preventDefault();var t=Object(p.a)(n),a=n.props,r=a.sendCmd,o=a.cell,c=a.deleteResultByChannel;n.props.form.validateFields(function(e,a){var l=a.slave;if(e)t.setState({saveError:"\u8bf7\u4fee\u6b63\u4e0d\u5408\u7406\u7684\u8f93\u5165\u5185\u5bb9\uff01"});else{var s=n.state,i=s.slaves,u=s.selectedSlave,d=i[u];i[u]=Object(h.a)({syncManagerPoolObjects:[{syncManagers:[{},{},{},{}]}]},l,{uuid:d.uuid,isMotion:d.isMotion});var m={name:"slave_pool",motions:[],slaves:[]};Object.keys(i).map(function(e){var t=i[e];t.isMotion?m.motions.push(t):m.slaves.push(t)});var p={name:"ethercat_controller",slavePoolObjects:[m]},b=Na.FromJSON(p);n.setState({saveError:null}),c("".concat(o.i,"-save")),r("set_xml --xml={<ControlServer>".concat(b.toXML(),"</ControlServer>}"),"".concat(o.i,"-save"))}})},n.renderContent=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=a.cell,l=a.saveResult,s=n.state,i=s.slaves,u=s.selectedSlave,d=s.vendors,m=s.selectedVendor,p=s.selectedDevice,b=s.saveError,f=t("ethercat-configuration",r);return o.a.createElement("div",{className:f},o.a.createElement(qa,{prefixCls:f,slaves:i,addSlave:n.addSlave,removeSlave:n.removeSlave,selectSlave:n.selectSlave,selectedSlave:u,getEsiPdoList:n.getEsiPdoListForSlave,cell:c}),!!i&&!!u&&!!i[u]&&o.a.createElement("div",{className:"".concat(f,"-content"),onSubmit:function(){}},o.a.createElement(Za,{cell:c,vendors:d,prefixCls:f,selectDevice:n.selectDevice,selectVendor:n.selectVendor,selectedVendor:m,selectedDevice:p,save:n.save,getEsiPdoList:n.getEsiPdoListForDevice}),o.a.createElement(pt.a,{className:"".concat(f,"-error")},b&&o.a.createElement("div",{className:"error"},b),l&&0!==l.return_code&&o.a.createElement(pa,{result:l,className:"error"})),n.renderForm(f)))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"getEsiPdoListForDevice",value:function(e,t,n){var a=this.props,r=a.deleteResultByChannel,o=a.sendCmd,c=a.cell;r("".concat(c.i,"-pdolist")),o("getesipdolist --vendor_id=".concat(e," --product_code=").concat(t," --revision_num=").concat(n),"".concat(c.i,"-pdolist-for-device"))}},{key:"getEsiPdoListForSlave",value:function(e,t,n){var a=this.props,r=a.deleteResultByChannel,o=a.sendCmd,c=a.cell;r("".concat(c.i,"-pdolist")),o("getesipdolist --vendor_id=".concat(e," --product_code=").concat(t," --revision_num=").concat(n),"".concat(c.i,"-pdolist-for-slave"))}},{key:"shouldComponentUpdate",value:function(e,t,n){if(ma()(e.ethercatMaster,this.props.ethercatMaster)||e.ethercatMaster&&e.ethercatMaster.vendors&&this.setState({vendors:e.ethercatMaster.vendors,saveError:null}),!ma()(e.ethercatController,this.props.ethercatController)){if(e.ethercatController&&e.ethercatController.slavePoolObjects&&e.ethercatController.slavePoolObjects[0]){var a={};e.ethercatController.slavePoolObjects[0].motions&&e.ethercatController.slavePoolObjects[0].motions.forEach(function(e){a[e.uuid]=e}),e.ethercatController.slavePoolObjects[0].slaves&&e.ethercatController.slavePoolObjects[0].slaves.forEach(function(e){a[e.uuid]=e}),this.setState({slaves:a,saveError:null})}return!1}var r=this.state,o=r.selectedSlave,c=r.slaves;return!(!ma()(e.pdoListForDevice,this.props.pdoListForDevice)&&!Xt()(e.pdoListForDevice)&&o&&c&&c[o])||((c=Object(h.a)({},c))[o]=Object(h.a)({},e.pdoListForDevice,{phyId:c[this.state.selectedSlave].phyId,uuid:o}),this.setState({slaves:c,saveError:null}),!1)}},{key:"componentWillMount",value:function(){this.props.loadEsiPath()}},{key:"renderFormItemInput",value:function(e,t,n,a,r,c,l){var s=this.props.form.getFieldDecorator;return o.a.createElement(fn.a,{span:c||7,offset:1,pull:1,key:t},o.a.createElement(Ya,Object.assign({},$a,{label:n,hasFeedback:!0}),s("slave.".concat(t),{initialValue:a,rules:[{required:!!l,message:"Please input ".concat(n)}]})(o.a.createElement(Zt.a,{placeholder:"".concat(n),size:"small"}))))}},{key:"renderFormItemNumberInput",value:function(e,t,n,a,r,c,l,s,i,u){var d=this.props.form.getFieldDecorator;return o.a.createElement(fn.a,{span:r||7,offset:1,pull:1,key:t},o.a.createElement(Ya,Object.assign({},$a,{label:n,hasFeedback:!0}),d("slave.".concat(t),{initialValue:a,rules:[{required:!!c,message:"Please input ".concat(n)}]})(o.a.createElement(Cn.a,{size:"small",step:l||.01,min:i||-360,max:u||360,placeholder:"".concat(n)})),!!s&&o.a.createElement("span",{className:"".concat(e,"-form-postfix")},s)))}}]),t}(ht),nr=Object(xe.a)(Ba,Ua,Xa,Va,function(e,t){var n=t.cell;return e.robot.resultsByChannel["".concat(n.i,"-save")]},function(e,t,n,a,r){return{ethercatMaster:e,ethercatController:t,pdoListForDevice:n,pdoListForSlave:a,saveResult:r}});var ar={MotionCalib:Un,RealtimeChart:pn,Debugger:en,CodeEditor:Gt,CommandButton:T,Logger:F,View3D:it,SetDH:Qn,"3DView":it,ModelConfiguration:ia,ZeroCalib:An,LoadCalib:zn,JogCoordinate:gt,JogJoint:jt,ManualMotionVel:_t,RobotStatus:Ft,ManualSwitch:zt,ToolCalib:Pn,Unknown:A,EthercatConfiguration:Object(s.b)(function(e,t){return nr(e,t)},{loadEsiPath:function(){return V(ye)},deleteResultByChannel:me})(ta.a.create({mapPropsToFields:function(e){return function e(t){return Object.keys(t).reduce(function(n,a){return Object(h.a)({},n,Object(ua.a)({},a,"object"!==typeof t[a]||"value"in t[a]?ta.a.createFormField(Object(h.a)({},t[a],{value:t[a]&&t[a].value})):ke()(t[a])?t[a].map(function(t){return e(t)}):e(t[a])))},{})}({slave:e.slave})},onValuesChange:function(e,t){}})(tr))},rr=ar.Unknown,or=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).toggleVisType=function(){},n.renderLayout=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=a.isEditable,l=a.cell,s=a.onCloneCell,i=a.onDeleteCell,u=a.sendCmd,d=a.onCellUpdate,m=t("layout",r);return o.a.createElement(I,{cell:l,onCellUpdate:d,onDeleteCell:i,sendCmd:u,onCloneCell:s,toggleVisType:n.toggleVisType.bind(Object(p.a)(n)),isEditable:c},n.renderLayoutBody(m))},n.cellByTypes={};var a=Object(p.a)(n);return Object.keys(ar).forEach(function(e){a.cellByTypes[e.toLowerCase()]=ar[e]}),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.error("Layout componentDidMount")}},{key:"renderLayoutBody",value:function(e){var t=this.props,n=t.cell,a=t.onCellUpdate,r=t.sendCmd,c=t.commandSendInterval,l=t.commandSendDelay;if(n.type&&this.cellByTypes[n.type.toLowerCase()]){var s=this.cellByTypes[n.type.toLowerCase()];return o.a.createElement(s,{cell:n,onCellUpdate:a,sendCmd:r,commandSendInterval:c,commandSendDelay:l})}return o.a.createElement(rr,{cell:n,onCellUpdate:a,sendCmd:r})}},{key:"render",value:function(){return console.log("Layout render()"),o.a.createElement(v.ConfigConsumer,null,this.renderLayout)}}]),t}(r.Component);var cr=Object(s.b)(function(e,t){return{commandSendInterval:rt(e),commandSendDelay:ct(e)}})(or),lr=n(536),sr=n.n(lr),ir=Object(O.WidthProvider)(C.a),ur=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleLayoutChange=function(e){if(n.props.onPositionChange){var t=Object(p.a)(n),a=!1,r=t.props.cells.map(function(t){var n=e.find(function(e){return e.i==t.i});if(n){t.x===n.x&&t.y===n.y&&t.h===n.h&&t.w===n.w||(a=!0);var r={x:n.x,y:n.y,h:n.h,w:n.w};return Object(h.a)({},t,r)}});a&&n.props.onPositionChange(r)}},n.renderLayoutRender=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=a.cells,l=a.onZoom,s=a.isEditable,i=a.onDeleteCell,u=a.onCloneCell,d=a.sendCmd,m=a.onCellUpdate,p=a.layoutCols,b=a.layoutMargin,f=a.layoutContainerPadding,h=(a.layoutRowHeight,a.windowWidth),v=a.windowHeight,E=t("layout-renderer",r),g=".".concat(t("layout-cell",r),"--draggable"),O=Math.floor(h/p),C=Math.floor((v-50-40)/O);return console.log(h,v,C,O),o.a.createElement("div",{className:"".concat(E," ").concat(s?"editable":"")},o.a.createElement(ir,{layout:c,cols:p,rowHeight:O,margin:[b,b],containerPadding:[f,f],useCSSTransforms:!1,onLayoutChange:n.handleLayoutChange,draggableHandle:g,isDraggable:!0,isResizable:!0},c.map(function(e){return o.a.createElement("div",{key:e.i,className:s?"editable":""},o.a.createElement(cr,{cell:e,onDeleteCell:i,onCloneCell:u,onCellUpdate:m,onZoom:l,sendCmd:d,isEditable:s}))})))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.error("LayoutRenderer componentDidMount")}},{key:"render",value:function(){return console.log("LayoutRenderer render()"),o.a.createElement(v.ConfigConsumer,null,this.renderLayoutRender)}}]),t}(r.Component),dr=sr()(ur),mr=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).renderDashboard=function(e){var t=e.getPrefixCls,a=n.props,r=a.dashboard,c=a.prefixCls,l=a.onZoom,s=a.onCloneCell,i=a.onDeleteCell,u=a.onPositionChange,d=a.sendCmd,m=a.onCellUpdate,p=a.layoutCols,b=a.layoutRowHeight,f=a.layoutMargin,h=a.layoutContainerPadding,v=t("dashboard",c);return o.a.createElement("div",{className:"".concat(v),id:"dashboard"},r.cells&&r.cells.length?o.a.createElement(dr,{layoutCols:p,layoutRowHeight:b,layoutMargin:f,layoutContainerPadding:h,cells:r.cells,templates:[],manualRefresh:10,onCellUpdate:m,isEditable:!!r.editable,onZoom:l,sendCmd:d,onCloneCell:s,onDeleteCell:i,onPositionChange:u}):o.a.createElement(g,{dashboard:r,onAddCell:function(){}}))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return console.log("Dashboard render()"),o.a.createElement(v.ConfigConsumer,null,this.renderDashboard)}}]),t}(r.Component),pr=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onPositionChange=function(e){var t=n.props,a=t.dashboard;(0,t.updateDashboard)(a=Object(h.a)({},a,{cells:Object(f.a)(e)}))},n.onCellUpdate=function(e){var t=n.props,a=t.dashboard,r=t.updateDashboard,o=Object(f.a)(a.cells);o.forEach(function(t,n){e.i===t.i&&(o[n]=Object(h.a)({},e))}),r(a=Object(h.a)({},a,{cells:o}))},n.onAddCell=function(e){console.log(e),delete(e=Object(h.a)({},e)).i,n.props.createCell(n.props.dashboard.i,e)},n.onDeleteCell=function(e){n.props.deleteCell(n.props.dashboard.i,e)},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){console.log("DashboardPage render()");var e=this.props,t=e.dashboard,n=(e.cells,e.layoutCols),a=e.layoutRowHeight,r=e.layoutMargin,c=e.layoutContainerPadding,l=e.sendCmd;return o.a.createElement(mr,{dashboard:t,layoutCols:n,layoutRowHeight:a,layoutMargin:r,layoutContainerPadding:c,inPresentationMode:!1,onPositionChange:this.onPositionChange,onCellUpdate:this.onCellUpdate,onDeleteCell:this.onDeleteCell,onCloneCell:this.onAddCell,onAddCell:this.onAddCell,sendCmd:l,onSummonOverlayTechnologies:function(){},manualRefresh:0,timeRange:{},onZoom:function(){},setScrollTop:function(){},inView:function(){}})}}]),t}(r.Component);mr.propTypes={dashboard:dt.a.object.isRequired,layoutCols:dt.a.number.isRequired,layoutRowHeight:dt.a.number.isRequired,layoutMargin:dt.a.number.isRequired,layoutContainerPadding:dt.a.number.isRequired};var br=Object(s.b)(function(e,t){return t.match.params.id,{dashboard:et(e),layoutCols:wt(e),layoutRowHeight:Nt(e),layoutMargin:kt(e),layoutContainerPadding:It(e)}},{updateDashboard:G,sendCmd:ue,createCell:K,deleteCell:function(e,t){return V(Q,{dashboardId:e,cellId:t})}})(pr);var fr=function(){return o.a.createElement("div",{className:"App"},"Configuration")},hr=o.a.createElement(l.c,null,o.a.createElement(l.a,{exact:!0,path:"/",component:br}),o.a.createElement(l.a,{path:"/configuration",component:fr}),o.a.createElement(l.a,{path:"/dashboards/:id",component:br})),vr=j.a.Item,Er=nn.a.Option,gr=nn.a.OptGroup,Or=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={fullscreen:!1},n.escFunction=function(e){27===e.keyCode&&document.fullscreenElement&&document.exitFullscreen()},n.onFullscreenChange=function(e){document.fullscreenElement?n.setState({fullscreen:!0}):n.setState({fullscreen:!1})},n.handleClick=function(e){n.props.navigate(e.key)},n.onCreateCell=function(){var e=n.props,t=e.createCell,a=(e.pathname,e.dashboard);a&&t(a.i)},n.toggleLock=function(){var e=n.props,t=e.updateDashboard,a=e.dashboard;a&&t(a=Object(h.a)({},a,{editable:!a.editable}))},n.renderContent=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=a.pathname,l=a.dashboards,s=a.dashboard,i=a.coordinateIds,u=a.toolIds,d=a.updateMotionVelPercent,m=a.updateToolId,p=a.updateCoordinateId,b=a.toolId,f=a.coordinateId,h=a.motionVelPercent,v=t("header",r);return"/"===c&&l.length>0&&(c="/dashboards/".concat(l[0].i)),o.a.createElement("div",{className:v},o.a.createElement(j.a,{onClick:n.handleClick,selectedKeys:[c],mode:"horizontal"},l.map(function(e){return o.a.createElement(vr,{key:"/dashboards/".concat(e.i)},e.name)})),o.a.createElement("div",{className:"".concat(v,"-actions"),style:{position:"absolute",right:0,top:0,display:"inline-block"}},o.a.createElement(St.a,{tooltipVisible:!1,min:0,max:100,tipFormatter:function(e){return"".concat(e,"%")},value:h,onChange:function(e){n.throttleSendCmd("setvel --vel_percent=".concat(e),"setvel"),d(e)}}),o.a.createElement(Cn.a,{min:0,max:100,size:"small",value:h,onChange:function(e){n.throttleSendCmd("setvel --vel_percent=".concat(e),"setvel"),d(e)}}),o.a.createElement(nn.a,{size:"small",placeholder:"\u9009\u62e9\u5de5\u5177\u5750\u6807",onChange:m,value:b},o.a.createElement(gr,{label:"\u9009\u62e9\u5de5\u5177\u5750\u6807\u7cfb"},u.map(function(e){return o.a.createElement(Er,{value:e,key:e},"\u5de5\u5177\u5750\u6807\u7cfb",e)}))),o.a.createElement(nn.a,{size:"small",placeholder:"\u9009\u62e9\u5de5\u4ef6\u5750\u6807\u7cfb",onChange:p,value:f},o.a.createElement(gr,{label:"\u9009\u62e9\u5de5\u4ef6\u5750\u6807\u7cfb"},i.map(function(e){return o.a.createElement(Er,{value:e,key:e},"\u5de5\u4ef6\u5750\u6807\u7cfb",e)}))),o.a.createElement(_.a,{className:"".concat(s&&s.editable?"":"disabled"),type:"block",onClick:s&&s.editable?n.onCreateCell:function(){}}),o.a.createElement(_.a,{type:"lock",className:"".concat(s&&s.editable?"":"info"),onClick:n.toggleLock}),!n.state.fullscreen&&o.a.createElement(_.a,{type:"fullscreen",onClick:function(){document.getElementById("body").requestFullscreen()}}),!!n.state.fullscreen&&o.a.createElement(_.a,{type:"fullscreen-exit",onClick:function(){document.exitFullscreen()}}),o.a.createElement(_.a,{type:"sync",onClick:function(){window.location.reload()}})))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.interval,n=e.sendCmd;this.throttleSendCmd=B()(n,t),document.addEventListener("fullscreenchange",this.onFullscreenChange,!1),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1),document.removeEventListener("fullscreenchange",this.onFullscreenChange,!1)}},{key:"render",value:function(){return console.log("Header render()"),o.a.createElement(v.ConfigConsumer,null,this.renderContent)}}]),t}(r.Component),Cr=Object(xe.a)(Ye,Ke,He,function(e){return e.robot.coordinateIds},function(e){return e.robot.currentToolId},Ge,We,rt,function(e,t,n,a,r,o,c,l){var s=null;if("/"!==t&&-1!==t.indexOf("/dashboards/")){var i=t.replace("/dashboards/","");s=e&&e.filter(function(e){return e.i===i})[0]}return{dashboards:e,pathname:t,toolIds:n,coordinateIds:a,toolId:r,coordinateId:o,motionVelPercent:c,interval:l,dashboard:s||e&&e[0]}});var yr=Object(s.b)(function(e){return Cr(e)},{createCell:K,navigate:te,updateDashboard:G,updateMotionVelPercent:de,updateToolId:function(e){return V("UPDATE_TOOL_ID",{toolId:e})},updateCoordinateId:function(e){return V("UPDATE_COORDINATE_ID",{coordinateId:e})},sendCmd:ue})(Or),jr=n(65),Mr=n.n(jr),Sr=(j.a.Item,nn.a.Option,nn.a.OptGroup,function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).renderContent=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,c=a.currentCommand,l=a.websocketConnected,s=a.stateCode,i=a.currentPlan,u=t("footer",r),d={100:"#AAAAAA",200:"#FF851B",300:"#FF4136",400:"#0074D9",500:"#01FF70"}[s||100],m={100:"\u53bb\u4f7f\u80fd",200:"\u624b\u52a8",300:"\u51c6\u5907\u81ea\u52a8",400:"\u81ea\u52a8",500:"\u9519\u8bef\u505c\u76ee"}[s],p="success";return 0===c.return_code?p="success":c.return_code&&(p="error"),i=!!i&&"none"!==i,o.a.createElement("div",{className:u},o.a.createElement("div",{className:"".concat(u,"-command ").concat(p)},!!c.cmd&&o.a.createElement("div",{className:"".concat(u,"-cmd ").concat(c.isRunning&&"".concat(u,"-cmd-running"))},o.a.createElement(Mr.a,{placement:"top",title:"\u8fd0\u884c\u547d\u4ee4"},o.a.createElement(_.a,{type:"code"})),o.a.createElement("span",null,c.cmd)),!!c.cmd_response_time&&o.a.createElement("div",{className:"".concat(u,"-cmd-response-time")},o.a.createElement(Mr.a,{placement:"top",title:"\u8fd4\u56de\u65f6\u95f4"},o.a.createElement(_.a,{type:"clock-circle"})),o.a.createElement("span",null,c.cmd_response_time,"ms")),void 0!==c.return_code&&o.a.createElement("div",{className:"".concat(u,"-return-code")},o.a.createElement(Mr.a,{placement:"top",title:"\u8fd4\u56de\u4ee3\u7801"},o.a.createElement(_.a,{type:"bulb"})),o.a.createElement("span",null,c.return_code)),!!c.return_message&&o.a.createElement("div",{className:"".concat(u,"-return-message")},o.a.createElement(Mr.a,{placement:"top",title:"\u8fd4\u56de\u6d88\u606f"},o.a.createElement(_.a,{type:"message"})),o.a.createElement("span",null,c.return_message))),o.a.createElement("div",{className:"".concat(u,"-status")},o.a.createElement("div",null,!!l&&o.a.createElement(Mr.a,{placement:"top",title:"Websocket"},o.a.createElement(_.a,{type:"wifi",className:"success"})),!!l&&o.a.createElement("span",null,"\u5df2\u8fde\u63a5"),!l&&o.a.createElement(Mr.a,{placement:"top",title:"Websocket"},o.a.createElement(_.a,{type:"wifi",className:"danger"})),!l&&o.a.createElement("span",null,"\u672a\u8fde\u63a5")),o.a.createElement("div",{className:m?"info":"disabled"},o.a.createElement(Mr.a,{placement:"top",title:"State Code"},o.a.createElement(_.a,{style:{color:d,fill:d},fill:d,type:"check-circle",className:"info",theme:"filled"})),o.a.createElement("span",null,m||"\u65e0\u72b6\u6001")),o.a.createElement("div",{className:i?"success":"disabled"},o.a.createElement(Mr.a,{placement:"top",title:"Current Plan"},o.a.createElement(_.a,{style:{color:d,fill:d},fill:d,type:"setting",theme:"filled",spin:!!i})),o.a.createElement("span",null,i?"\u8fd0\u52a8\u4e2d":"\u505c\u6b62"))))},n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return console.log("Footer render()"),o.a.createElement(v.ConfigConsumer,null,this.renderContent)}}]),t}(r.Component)),xr=Object(xe.a)(function(e){return e.robot.currentCommand},nt,function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.state_code},function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.current_plan},function(e,t,n,a){return{currentCommand:e,websocketConnected:t,stateCode:n,currentPlan:a}});var _r=Object(s.b)(function(e){return xr(e)},{})(Sr),Rr=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).renderApp=function(e){var t=e.getPrefixCls,a=n.props,r=(a.location.pathname,a.dashboards),c=(a.navigate,a.prefixCls),l=(a.createCell,a.dashboard,a.updateDashboard,t("app",c));return r?o.a.createElement("div",{className:l},o.a.createElement(yr,null),o.a.createElement("div",{className:"".concat(l,"-content")},n.renderErrorMessage(),hr),o.a.createElement(_r,null)):o.a.createElement("div",{className:l},"Loading...")},n.handleChange=n.handleChange.bind(Object(p.a)(n)),n.handleDismissClick=n.handleDismissClick.bind(Object(p.a)(n)),n.getData(),n}return Object(b.a)(t,e),Object(u.a)(t,[{key:"getData",value:function(){}},{key:"componentWillMount",value:function(){this.props.loadInterfaceConfig(),this.props.updateRouterState({pathname:this.props.location.pathname,params:this.props.params}),this.props.ws&&this.props.startWebsocket(this.props.ws)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalTimer),this.props.stopWebsocket()}},{key:"componentWillReceiveProps",value:function(e,t){var n=this;if(this.props.location.pathname!==e.location.pathname&&this.props.updateRouterState({pathname:e.location.pathname,params:e.params}),this.props.ws!==e.ws&&e.ws&&this.props.startWebsocket(e.ws),this.props.getInterval!==e.getInterval&&e.getInterval){this.intervalTimer&&clearInterval(this.intervalTimer);var a=e.sendCmd,r=e.getInterval;this.intervalTimer=setInterval(function(){var e=n.props,t=e.websocketConnected,r=e.xml;t&&(a("get","get"),r||a("get_xml","xml"))},r)}}},{key:"handleDismissClick",value:function(e){this.props.resetErrorMessage(),e.preventDefault()}},{key:"handleChange",value:function(e){this.props.navigate("/".concat(e))}},{key:"renderErrorMessage",value:function(){var e=this.props.errorMessage;return e?o.a.createElement("p",{style:{backgroundColor:"#e99",padding:10}},o.a.createElement("b",null,e)," (",o.a.createElement("a",{href:"#",onClick:this.handleDismissClick},"Dismiss"),")"):null}},{key:"render",value:function(){return console.log("App render()"),o.a.createElement(v.ConfigConsumer,null,this.renderApp)}}]),t}(r.Component);var Pr=Object(s.b)(function(e){return{dashboards:Ye(e),dashboard:tt(e),xml:Ze(e),errorMessage:e.errorMessage,websocketConnected:e.robot.websocketConnected,getInterval:ot(e),ws:at(e)}},{loadInterfaceConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return V(z,{requiredFields:e})},navigate:te,updateRouterState:function(e){return V($,{state:e})},resetErrorMessage:function(){return V("RESET_ERROR_MESSAGE")},startWebsocket:ce,stopWebsocket:function(){return V(ae,{stopped:!0})},createCell:K,sendCmd:ue,updateDashboard:G})(Rr),wr=n(88),Nr=(n(1155),n(191)),kr=(n(1156),n(1160),{resultsByChannel:{},websocketConnected:!1,websocketError:null,channelsById:{},commandsById:{},currentCommand:{},robotStatus:4,toolIds:Object(f.a)(Array(16).keys()),coordinateIds:Object(f.a)(Array(32).keys()),currentToolId:1,currentCoordinateId:1,currentMotionVelPercent:0,firstGet:!0,createRobotModelModalVisible:!1,currentRobotBrand:null,currentRobotModel:null,esiFileUploadingSuccess:null,esiFileUploadingRequest:null,esiFileUploadingFailure:null,esiPathFetchingSuccess:null,esiPathFetchingRequest:null,esiPathFetchingFailure:null,esiPath:null,xml:null}),Ir={};function Tr(e,t,n){var a=new DataView(e),r=(a.getInt32(0),a.getInt32(4,!0),a.getFloat64(16,!0));if(t[r])try{var o=function(e){var t,n,a,r,o,c;for(t="",a=e.length,n=0;n<a;)switch((r=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(r);break;case 12:case 13:o=e[n++],t+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=e[n++],c=e[n++],t+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&c)<<0)}return t}(new Uint8Array(e,40));return Object(h.a)({},JSON.parse(o),{id:r,cmd_response_time:Date.now()-r})}catch(c){console.error(c)}}var Fr=Object(wr.c)({config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INTERFACE_CONFIG_FETCH_REQUEST":case"INTERFACE_CONFIG_FETCH_FAILURE":return{};case"INTERFACE_CONFIG_FETCH_SUCCESS":return Object(h.a)({},e,t.response);case q:var n=t.dashboard,a=Object(f.a)(e.dashboards);return a.forEach(function(e,t){e.i===n.i&&(a[t]=Object(h.a)({},a[t],n))}),Object(h.a)({},e,{dashboards:a});case"DASHBOARD_UPDATE_SUCCESS":var r=t.dashboard,o=Object(f.a)(e.dashboards);return o.forEach(function(e,t){e.i===r.i&&(o[t]=Object(h.a)({},o[t],r))}),Object(h.a)({},e,{dashboards:o});case"CELL_CREATE_SUCCESS":var c=t.dashboardId,l=t.cell,s=Object(f.a)(e.dashboards);return s.forEach(function(e,t){e.i===c&&(s[t]=Object(h.a)({},s[t]),s[t].cells=[].concat(Object(f.a)(s[t].cells),[l]))}),Object(h.a)({},e,{dashboards:s});case"CELL_DELETE_SUCCESS":var i=t.dashboardId,u=t.cell,d=Object(f.a)(e.dashboards);return d.forEach(function(e,t){e.i===i&&(d[t]=Object(h.a)({},d[t]),d[t].cells=d[t].cells.filter(function(e){return e.i!==u.i}))}),Object(h.a)({},e,{dashboards:d});default:return e}return e},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.error,r=t.errorType;return"RESET_ERROR_MESSAGE"===n?r?e[r]&&delete(e=Object(h.a)({},e))[r]:e={}:a&&((e=Object(h.a)({},e))[n]=a),e},router:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pathname:"/"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return t.state;default:return e}},robot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WEBSOCKET_CONNECTED":return Object(h.a)({},e,{websocketConnected:!0});case"WEBSOCKET_DISCONNECTED":return Object(h.a)({},e,{websocketConnected:!1});case"WEBSOCKET_ERROR":return Object(h.a)({},e,{websocketError:t.payload});case re:var n=t.id,a=t.channel,r=t.cmd,o=t.callback;if(a){var c=Object(h.a)({},e.channelsById);c[n]=a;var l=e.commandsById,s=e.currentCommand;return"get"!==a&&((l=Object(h.a)({},l))[n]=r,o&&(Ir[n]=o),s={id:n,cmd:r,channel:a,isRunning:!0}),Object(h.a)({},e,{channelsById:c,commandsById:l,currentCommand:s})}return e;case oe:var i=t.data,u=e.channelsById,d=e.resultsByChannel,m=e.commandsById,p=e.currentCommand,b=e.firstGet,f=Tr(i,e.channelsById,e.model);if(f){var v=(u=Object(h.a)({},u))[f.id],E=Ir[f.id];return delete u[f.id],delete Ir[f.id],E&&"function"===typeof E&&E(f),"get"!==v&&m[f.id]&&delete(m=Object(h.a)({},m))[f.id],v&&((d=Object(h.a)({},d))[v]=f),p.id===f.id&&(p=Object(h.a)({},p,f,{isRunning:!1})),b&&"get"===v?Object(h.a)({},e,{channelsById:u,resultsByChannel:d,commandsById:m,currentCommand:p,currentMotionVelPercent:f.vel_percent||0,firstGet:!1}):Object(h.a)({},e,{channelsById:u,resultsByChannel:d,commandsById:m,currentCommand:p})}return e;case"DELETE_RESULT_BY_CHANNEL":var g=t.channel,O=Object(h.a)({},e.resultsByChannel);return delete O[g],Object(h.a)({},e,{resultsByChannel:O});case"UPDATE_MOTION_VEL_PERCENT":return Object(h.a)({},e,{currentMotionVelPercent:t.motionVelPercent});case"UPDATE_COORDINATE_ID":return Object(h.a)({},e,{currentCoordinateId:t.coordinateId});case"UPDATE_TOOL_ID":return Object(h.a)({},e,{currentToolId:t.toolId});case"ROBOT_MODELS_FETCH_SUCCESS":var C=t.robotModels;return Object(h.a)({},e,{robotModels:C});case"ROBOT_MODEL_DELETE_SUCCESS":var y=t.model,j=Object(h.a)({},e.robotModels);return j[y.brand]=Object(h.a)({},j[y.brand]),delete j[y.brand][y.model],Xt()(j[y.brand])&&delete j[y.brand],Object(h.a)({},e,{robotModels:j});case"ROBOT_MODEL_PART_UPLOAD_SUCCESS":var M=t.model,S=Object(h.a)({},e.robotModels);return S[M.brand]=Object(h.a)({},S[M.brand]),S[M.brand][M.model]=M,Object(h.a)({},e,{robotModels:S});case"ROBOT_MODEL_PART_DELETE_SUCCESS":var x=t.model,_=Object(h.a)({},e.robotModels);return _[x.brand]=Object(h.a)({},_[x.brand]),_[x.brand][x.model]=x,Object(h.a)({},e,{robotModels:_});case"ROBOT_MODEL_CREATE_REQUEST":return Object(h.a)({},e,{creatingRobotModel:!0,creatingRobotModelError:!1,creatingRobotModelResult:null});case"ROBOT_MODEL_CREATE_SUCCESS":var R=t.model,P=Object(h.a)({},e.robotModels);return P[R.brand]=Object(h.a)({},P[R.brand]),P[R.brand][R.model]=R,Object(h.a)({},e,{robotModels:P,currentRobotBrand:R.brand,currentRobotModel:R.model,createRobotModelModalVisible:!1,creatingRobotModel:!1,creatingRobotModelError:!1,creatingRobotModelResult:R});case"ROBOT_MODEL_CREATE_FAILURE":var w=t.error;return console.log(t),Object(h.a)({},e,{creatingRobotModel:!1,creatingRobotModelError:w,creatingRobotModelResult:!1});case"SHOW_CREATE_ROBOT_MODEL_MODAL":return Object(h.a)({},e,{createRobotModelModalVisible:!0,creatingRobotModel:!1,creatingRobotModelError:null,creatingRobotModelResult:null});case"HIDE_CREATE_ROBOT_MODEL_MODAL":return Object(h.a)({},e,{createRobotModelModalVisible:!1});case"SELECT_CURRENT_ROBOT_BRAND":console.log(t);var N=t.brand;return Object(h.a)({},e,{currentRobotBrand:N});case"SELECT_CURRENT_ROBOT_MODEL":console.log(t);var k=t.model;return Object(h.a)({},e,{currentRobotModel:k});case"UPLOAD_ESI_FILE_REQUEST":return Object(h.a)({},e,{esiFileUploadingSuccess:null,esiFileUploadingRequest:!0,esiFileUploadingFailure:null});case"UPLOAD_ESI_FILE_FAILURE":return Object(h.a)({},e,{esiFileUploadingSuccess:null,esiFileUploadingRequest:!1,esiFileUploadingFailure:t.error});case"UPLOAD_ESI_FILE_SUCCESS":return Object(h.a)({},e,{esiFileUploadingRequest:!1,esiFileUploadingSuccess:!0,esiFileUploadingFailure:!1});case"ESI_PATH_FETCH_REQUEST":return Object(h.a)({},e,{esiPath:null,esiPathFetchingRequest:!0,esiPathFetchingSuccess:!1,esiPathFetchingFailure:!1});case"ESI_PATH_FETCH_FAILURE":return Object(h.a)({},e,{esiPath:null,esiPathFetchingRequest:!1,esiPathFetchingSuccess:!1,esiPathFetchingFailure:t.error});case"ESI_PATH_FETCH_SUCCESS":return Object(h.a)({},e,{esiPath:t.path,esiPathFetchingRequest:!1,esiPathFetchingSuccess:!0,esiPathFetchingFailure:!1});case"CONFIG_XML_FETCH_SUCCESS":return console.log(t),Object(h.a)({},e,{xml:t.xml});default:return e}return e}}),Ar=function(){return function(e){return function(t){if(void 0===performance.mark)return e(t);performance.mark("".concat(t.type,"_start"));var n=e(t);return performance.mark("".concat(t.type,"_end")),performance.measure("".concat(t.type),"".concat(t.type,"_start"),"".concat(t.type,"_end")),n}}},Lr="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):wr.d;var Dr=n(22),Ur=n.n(Dr),Br=n(5);n(1222),n(303),n(1223);function Xr(e){return fetch(e).then(function(e){return e.json().then(function(t){return{json:t,response:e}})}).then(function(e){var t=e.json;return e.response.ok?t:Promise.reject(t)}).then(function(e){return{response:e}},function(e){return{error:e.message||e.error||"Something bad happened"}})}function Vr(e,t){return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json().then(function(t){return{json:t,response:e}})}).then(function(e){var t=e.json;return e.response.ok?t:Promise.reject(t)}).then(function(e){return{response:e}},function(e){return{error:e.message||e.error||"Something bad happened"}})}function zr(e,t){return fetch(e,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json().then(function(t){return{json:t,response:e}})}).then(function(e){var t=e.json;return e.response.ok?t:Promise.reject(t)}).then(function(e){return{response:e}},function(e){return{error:e.message||"Something bad happened"}})}var Jr=function(){return Xr("/api/config/interface")},qr=function(e){return t="/api/dashboards/".concat(e.i),n=e,fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(e){return e.json().then(function(t){return{json:t,response:e}})}).then(function(e){var t=e.json;return e.response.ok?t:Promise.reject(t)}).then(function(e){return{response:e}},function(e){return{error:e.message||e.error||"Something bad happened"}});var t,n},Hr=function(e,t){return Vr("/api/dashboards/".concat(e,"/cells"),Object(h.a)({},t))},Gr=function(e,t){return zr("/api/dashboards/".concat(e,"/cells/").concat(t),{})},Wr=function(){return Xr("/api/robots")},Zr=function(e,t,n){return zr("/api/robots/".concat(e,"/").concat(t,"/parts/").concat(n))},Kr=function(e,t){return zr("/api/robots/".concat(e,"/").concat(t))},Qr=function(e){return Vr("/api/robots",e)},Yr=function(){return Xr("/api/esi/path")},$r=function(){return fetch("/api/config/robot/xml").then(function(e){return e.text().then(function(t){return{text:t,response:e}})}).then(function(e){var t=e.text;return e.response.ok?t:Promise.reject(t)}).then(function(e){return{response:e}},function(e){return{error:e.message||e.error||"Something bad happened"}})},eo=n(91),to=a,no=Object(eo.a)(),ao=Ur.a.mark(ho),ro=Ur.a.mark(vo),oo=Ur.a.mark(Eo),co=Ur.a.mark(go),lo=Ur.a.mark(Oo),so=Ur.a.mark(Co),io=Ur.a.mark(yo),uo=Ur.a.mark(jo),mo=Ur.a.mark(Mo),po=Ur.a.mark(So),bo=Ur.a.mark(xo),fo=J;function ho(){var e,t,n;return Ur.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Br.f)(fo.request());case 2:return a.next=4,Object(Br.b)(to.fetchInterfaceConfig);case 4:if(e=a.sent,t=e.response,n=e.error,!t){a.next=12;break}return a.next=10,Object(Br.f)(fo.success(t));case 10:a.next=14;break;case 12:return a.next=14,Object(Br.f)(fo.failure(n));case 14:case"end":return a.stop()}},ao)}function vo(e){var t,n;return Ur.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.requiredFields,a.next=3,Object(Br.c)(50);case 3:return a.next=5,Object(Br.h)(Rt);case 5:if(n=a.sent,!Xt()(n)&&!t.some(function(e){return!n.hasOwnProperty(e)})){a.next=9;break}return a.next=9,Object(Br.b)(ho);case 9:case"end":return a.stop()}},ro)}function Eo(){var e,t,n;return Ur.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Br.f)(Se.request());case 2:return a.next=4,Object(Br.b)(to.fetchConfigXml);case 4:if(e=a.sent,t=e.response,n=e.error,console.log(t,n),!t){a.next=13;break}return a.next=11,Object(Br.f)(Se.success(t));case 11:a.next=15;break;case 13:return a.next=15,Object(Br.f)(Se.failure(n));case 15:case"end":return a.stop()}},oo)}function go(e){var t,n,a,r;return Ur.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.dashboard,o.next=3,Object(Br.c)(500);case 3:return o.next=5,Object(Br.h)($e,t.i);case 5:if(t=o.sent,console.log("updateDashboard after 200ms",t),Xt()(t)){o.next=22;break}return o.next=10,Object(Br.f)(H.request());case 10:return o.next=12,Object(Br.b)(to.updateDashboard,t);case 12:if(n=o.sent,a=n.response,r=n.error,!a){o.next=20;break}return o.next=18,Object(Br.f)(H.success(a));case 18:o.next=22;break;case 20:return o.next=22,Object(Br.f)(H.failure(r));case 22:case"end":return o.stop()}},co)}function Oo(e){var t,n,a,r,o;return Ur.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.dashboardId,n=e.cell,c.next=3,Object(Br.c)(50);case 3:return c.next=5,Object(Br.f)(Z.request());case 5:return c.next=7,Object(Br.b)(to.createCell,t,n);case 7:if(a=c.sent,r=a.response,o=a.error,!r){c.next=15;break}return c.next=13,Object(Br.f)(Z.success(t,r));case 13:c.next=17;break;case 15:return c.next=17,Object(Br.f)(Z.failure(o));case 17:case"end":return c.stop()}},lo)}function Co(e){var t,n,a,r,o;return Ur.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.dashboardId,n=e.cellId,c.next=3,Object(Br.c)(50);case 3:return c.next=5,Object(Br.f)(Y.request(t,n));case 5:return c.next=7,Object(Br.b)(to.deleteCell,t,n);case 7:if(a=c.sent,r=a.response,o=a.error,!r){c.next=15;break}return c.next=13,Object(Br.f)(Y.success(t,r));case 13:c.next=17;break;case 15:return c.next=17,Object(Br.f)(Y.failure(o));case 17:case"end":return c.stop()}},so)}function yo(){return Ur.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Br.j)(q,go);case 2:case"end":return e.stop()}},io)}function jo(){return Ur.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Br.j)(W,Oo);case 2:case"end":return e.stop()}},uo)}function Mo(){return Ur.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Br.j)(z,vo);case 2:case"end":return e.stop()}},mo)}function So(){return Ur.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Br.j)(Q,Co);case 2:case"end":return e.stop()}},po)}function xo(){return Ur.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Br.j)(Me,Eo);case 2:case"end":return e.stop()}},bo)}var _o=[Object(Br.e)(Mo),Object(Br.e)(yo),Object(Br.e)(jo),Object(Br.e)(So),Object(Br.e)(xo)],Ro=Ur.a.mark(Fo),Po=Ur.a.mark(Ao),wo=Ur.a.mark(Lo),No=Ur.a.mark(Do);function ko(e,t){var n=t.split("&");if(n.length>3){var a=parseInt(n[0]),r=parseInt(n[1]),o=parseInt(n[2]),c=parseInt(n[3]),l=parseInt(n[4]),s=n[5].length,i=new ArrayBuffer(40+s),u=new DataView(i);u.setInt32(0,s,!0),u.setInt32(4,a,!0),u.setInt32(8,r,!0),u.setFloat64(16,o,!0),u.setInt32(24,c,!0),u.setInt32(32,l,!0);for(var d=0;d<s;d++)u.setUint8(40+d,n[5].charCodeAt(d));e.send(u.buffer)}}function Io(e){return new Promise(function(t,n){var a=new WebSocket(e||window.location.origin.replace("https","wss").replace("http","ws"));a.onopen=function(){a.binaryType="arraybuffer",t(a)},a.onerror=function(e){n(e)}})}function To(e){return Object(Nr.c)(function(t){e.onmessage=function(e){e.data instanceof ArrayBuffer&&t({data:e.data,type:oe})},e.onclose=function(){t(se())},e.onerror=function(e){t(ie(e.message))};return function(){e.onmessage=null,e.onerror=null}})}function Fo(e){var t,n,a;return Ur.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(Br.i)(re);case 3:t=r.sent,n=t.cmd,a=t.id,r.t0=e.readyState,r.next=r.t0===WebSocket.CONNECTING?9:r.t0===WebSocket.OPEN?10:r.t0===WebSocket.CLOSING?11:r.t0===WebSocket.CLOSED?12:13;break;case 9:return r.abrupt("break",13);case 10:"get"===n?ko(e,"0&1&"+a+"&0&0&"+n):(console.log("sendCmd",n),ko(e,"1&1&"+a+"&0&0&"+n));case 11:case 12:return r.abrupt("break",13);case 13:r.next=0;break;case 15:case"end":return r.stop()}},Ro)}function Ao(e){var t;return Ur.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0;case 1:return n.next=4,Object(Br.i)(e);case 4:return t=n.sent,n.next=7,Object(Br.f)(t);case 7:n.next=1;break;case 9:return n.prev=9,console.log("message channel closed"),n.finish(9);case 12:case"end":return n.stop()}},Po,null,[[0,,9,12]])}function Lo(e){return Ur.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Br.c)(5e3);case 2:return t.next=4,Object(Br.f)(ce(e));case 4:case"end":return t.stop()}},wo)}function Do(){var e,t,n,a,r,o,c;return Ur.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=3,Object(Br.i)(ne);case 3:return a=l.sent,r=a.url,l.prev=5,l.next=8,Object(Br.b)(Io,r);case 8:return e=l.sent,l.next=11,Object(Br.b)(To,e);case 11:return t=l.sent,l.next=14,Object(Br.f)(le());case 14:return l.next=16,Object(Br.g)({internal:Object(Br.b)(Fo,e),external:Object(Br.b)(Ao,t),cancel:Object(Br.i)(ae)});case 16:o=l.sent,c=o.cancel,n=c,l.next=26;break;case 21:return l.prev=21,l.t0=l.catch(5),console.log(l.t0),l.next=26,Object(Br.f)(ie(l.t0.message));case 26:return l.prev=26,e&&(e.close(),e=null),l.next=30,Object(Br.f)(se());case 30:if(t&&(t.close(),t=null),n){l.next=34;break}return l.next=34,Object(Br.e)(Lo,r);case 34:return l.finish(26);case 35:l.next=0;break;case 37:case"end":return l.stop()}},No,null,[[5,21,26,35]])}var Uo=[Object(Br.e)(Do)],Bo=Ur.a.mark(tc),Xo=Ur.a.mark(nc),Vo=Ur.a.mark(ac),zo=Ur.a.mark(rc),Jo=Ur.a.mark(oc),qo=Ur.a.mark(cc),Ho=Ur.a.mark(lc),Go=Ur.a.mark(sc),Wo=Ur.a.mark(ic),Zo=Ur.a.mark(uc),Ko=he,Qo=Ee,Yo=Oe,$o=be,ec=je;function tc(){var e,t,n;return Ur.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Br.f)($o.request());case 2:return a.next=4,Object(Br.b)(to.fetchRobotModels);case 4:if(e=a.sent,t=e.response,n=e.error,!t){a.next=12;break}return a.next=10,Object(Br.f)($o.success(t));case 10:a.next=14;break;case 12:return a.next=14,Object(Br.f)($o.failure(n));case 14:case"end":return a.stop()}},Bo)}function nc(){var e,t,n;return Ur.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Br.f)(ec.request());case 2:return a.next=4,Object(Br.b)(to.fetchESIPath);case 4:if(e=a.sent,t=e.response,n=e.error,!t){a.next=12;break}return a.next=10,Object(Br.f)(ec.success(t.path));case 10:a.next=14;break;case 12:return a.next=14,Object(Br.f)(ec.failure(t&&(t.error||t.message)||n));case 14:case"end":return a.stop()}},Xo)}function ac(e){var t,n,a,r,o,c;return Ur.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.brand,n=e.model,a=e.part,l.next=3,Object(Br.f)(Ko.request());case 3:return l.next=5,Object(Br.b)(to.deleteRobotModelPart,t,n,a);case 5:if(r=l.sent,o=r.response,c=r.error,!o){l.next=13;break}return l.next=11,Object(Br.f)(Ko.success(o));case 11:l.next=15;break;case 13:return l.next=15,Object(Br.f)(Ko.failure(c));case 15:case"end":return l.stop()}},Vo)}function rc(e){var t,n,a,r,o;return Ur.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.brand,n=e.model,c.next=3,Object(Br.f)(Qo.request());case 3:return c.next=5,Object(Br.b)(to.deleteRobotModel,t,n);case 5:if(a=c.sent,r=a.response,o=a.error,!r){c.next=13;break}return c.next=11,Object(Br.f)(Qo.success(r));case 11:c.next=15;break;case 13:return c.next=15,Object(Br.f)(Qo.failure(o));case 15:case"end":return c.stop()}},zo)}function oc(e){var t,n,a,r;return Ur.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.model,o.next=3,Object(Br.f)(Yo.request());case 3:return o.next=5,Object(Br.b)(to.createRobotModel,t);case 5:if(n=o.sent,a=n.response,r=n.error,!a){o.next=13;break}return o.next=11,Object(Br.f)(Yo.success(a));case 11:o.next=15;break;case 13:return o.next=15,Object(Br.f)(Yo.failure(r));case 15:case"end":return o.stop()}},Jo)}function cc(){return Ur.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Br.j)(pe,tc);case 2:case"end":return e.stop()}},qo)}function lc(){return Ur.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Br.j)(fe,ac);case 2:case"end":return e.stop()}},Ho)}function sc(){return Ur.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Br.j)(ve,rc);case 2:case"end":return e.stop()}},Go)}function ic(){return Ur.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Br.j)(ge,oc);case 2:case"end":return e.stop()}},Wo)}function uc(){return Ur.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Br.j)(ye,nc);case 2:case"end":return e.stop()}},Zo)}var dc=[Object(Br.e)(cc),Object(Br.e)(lc),Object(Br.e)(sc),Object(Br.e)(ic),Object(Br.e)(uc)],mc=Ur.a.mark(bc),pc=Ur.a.mark(fc);function bc(){var e,t;return Ur.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(Br.i)(ee);case 3:return e=n.sent,t=e.pathname,n.next=7,no.push(t);case 7:n.next=0;break;case 9:case"end":return n.stop()}},mc)}function fc(){return Ur.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Br.a)([].concat(Object(f.a)(_o),Object(f.a)(Uo),Object(f.a)(dc),[Object(Br.e)(bc)]));case 2:case"end":return e.stop()}},pc)}n(1225);var hc=function(e){var t=Object(Nr.b)(),n=Object(wr.e)(Fr,e,Lr(Object(wr.a)(t,Ar)));return n.runSaga=t.run,n.close=function(){return n.dispatch(Nr.a)},n}();hc.runSaga(fc),Object(c.render)(o.a.createElement(s.a,{store:hc},o.a.createElement(E.a,{prefixCls:"rchmi"},o.a.createElement(l.b,{history:no},o.a.createElement(l.a,{path:"/",component:Pr})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},534:function(e,t,n){e.exports=n.p+"static/media/six_axes.090ff2c1.png"},535:function(e,t,n){e.exports=n.p+"static/media/seven_axes.10605d29.png"},537:function(e,t,n){e.exports=n(1226)}},[[537,1,2]]]);
//# sourceMappingURL=main.b9e33612.chunk.js.map