(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1256:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"fetchInterfaceConfig",function(){return zl}),n.d(a,"updateDashboard",function(){return ql}),n.d(a,"createCell",function(){return Ql}),n.d(a,"deleteCell",function(){return Hl}),n.d(a,"fetchRobotModels",function(){return Zl}),n.d(a,"deleteRobotModelPart",function(){return Yl}),n.d(a,"deleteRobotModel",function(){return Kl}),n.d(a,"createRobotModel",function(){return $l}),n.d(a,"fetchESIPath",function(){return ec}),n.d(a,"fetchConfigXml",function(){return tc}),n.d(a,"fetchPrograms",function(){return nc}),n.d(a,"fetchProgram",function(){return ac}),n.d(a,"createProgram",function(){return rc}),n.d(a,"updateProgram",function(){return oc}),n.d(a,"deleteProgram",function(){return lc}),n.d(a,"renameProgram",function(){return cc});var r=n(0),o=n.n(r),l=n(24);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(119),s=n(26),i=n(7),u=n(17),d=n(6),p=n(8),m=n(28),f=n(9),b=n(18),g=n(32),h=n(196),O=n(13),v=n.n(O),E=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).renderDashboard=function(e){var t=e.getPrefixCls,a=n.props,r=(a.dashboard,t("dashboard-empty",a.prefixCls));return o.a.createElement("div",{className:"".concat(r)},"\u5f53\u524d\u9762\u677f\u6ca1\u6709\u4efb\u4f55\u529f\u80fd\u5355\u5143")},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderDashboard)}}]),t}(r.Component),y=n(338),C=n.n(y),P=n(103),F=n.n(P),R=n(243),j=n.n(R),S=n(14),w=n.n(S),_=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).renderLogger=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=(a.cell,t("logger",r));return o.a.createElement("div",{className:"".concat(l)},o.a.createElement(w.a,{type:"area-chart",style:{fontSize:50}}))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderLogger)}}]),t}(r.Component);_.NAME="\u65e5\u5fd7\u56de\u653e";var x=_,N=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).renderLogger=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=a.cell,c=t("unknown-cell-type",r);return o.a.createElement("div",{className:"".concat(c)},o.a.createElement("div",null,"\u4e0d\u652f\u6301\u7684\u7ec4\u4ef6\u7c7b ",l.type))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderLogger)}}]),t}(r.Component),I=n(339),M=n.n(I),T=n(248),D=n.n(T);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var L=Date.now();function U(e){return A({type:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}var B="LOAD_INTERFACE_CONFIG",V={request:function(){return U("INTERFACE_CONFIG_FETCH_REQUEST",{})},success:function(e){return(e=A({},e)).dashboards&&(e.dashboards=e.dashboards.map(function(e){return(e=A({},e)).cells=e.cells.map(function(e){e=A({},e),console.log(e.type,"before",e.options);try{e.options=JSON.parse(e.options)}catch(t){e.options={}}return console.log(e.options),e}),e})),U("INTERFACE_CONFIG_FETCH_SUCCESS",{response:e})},failure:function(e){return U("INTERFACE_CONFIG_FETCH_FAILURE",{error:e})}},W="UPDATE_DASHBOARD",J={request:function(e){return U("DASHBOARD_UPDATE_REQUEST",{dashboard:e})},success:function(e){return e.cells&&((e=A({},e)).cells=e.cells.map(function(e){if((e=A({},e)).options){console.log(e.type,"before",e.options);try{e.options=JSON.parse(e.options)}catch(t){e.options={}}console.log(e.type,e.options)}return e})),U("DASHBOARD_UPDATE_SUCCESS",{dashboard:e})},failure:function(e){return U("DASHBOARD_UPDATE_FAILURE",{error:e})}},X=function(e){return U(W,{dashboard:e})},G="CREATE_CELL",z={request:function(e){return U("CELL_CREATE_REQUEST",{dashboardId:e})},success:function(e,t){if((t=A({},t)).options)try{t.options=JSON.parse(t.options)}catch(n){t.options={}}return U("CELL_CREATE_SUCCESS",{dashboardId:e,cell:t})},failure:function(e){return U("CELL_CREATE_FAILURE",{error:e})}},q=function(e,t){return U(G,{dashboardId:e,cell:t})},Q="DELETE_CELL",H={request:function(e,t){return U("CELL_DELETE_REQUEST",{dashboardId:e,cellId:t})},success:function(e,t){return U("CELL_DELETE_SUCCESS",{dashboardId:e,cell:t})},failure:function(e){return U("CELL_DELETE_FAILURE",{error:e})}},Z="UPDATE_ROUTER_STATE",Y="NAVIGATE",K=function(e){return U(Y,{pathname:e})},$="START_WEBSOCKET",ee="STOP_WEBSOCKET",te="SEND_CMD",ne="CMD_RESPONSE",ae=function(e){return U($,{url:e})},re=function(){return U("WEBSOCKET_CONNECTED")},oe=function(){return U("WEBSOCKET_DISCONNECTED")},le=function(e){return U("WEBSOCKET_ERROR",{error:e})},ce=function(e,t,n){var a=Date.now();return a<=L?L+=1:L=a,U(te,{cmd:e,id:L,channel:t,callback:n})},se=function(e){return U("DELETE_RESULT_BY_CHANNEL",{channel:e})},ie="LOAD_ROBOT_MODELS",ue={request:function(){return U("ROBOT_MODELS_FETCH_REQUEST",{})},success:function(e){return U("ROBOT_MODELS_FETCH_SUCCESS",{robotModels:e})},failure:function(e){return U("ROBOT_MODELS_FETCH_FAILURE",{error:e})}},de="DELETE_ROBOT_MODEL_PART",pe={request:function(){return U("ROBOT_MODEL_PART_DELETE_REQUEST",{})},success:function(e){return U("ROBOT_MODEL_PART_DELETE_SUCCESS",{model:e})},failure:function(e){return U("ROBOT_MODEL_PART_DELETE_FAILURE",{error:e})}},me="DELETE_ROBOT_MODEL",fe={request:function(){return U("ROBOT_MODEL_DELETE_REQUEST",{})},success:function(e){return U("ROBOT_MODEL_DELETE_SUCCESS",{model:e})},failure:function(e){return U("ROBOT_MODEL_DELETE_FAILURE",{error:e})}},be="CREATE_ROBOT_MODEL",ge={request:function(e){return U("ROBOT_MODEL_CREATE_REQUEST",{model:e})},success:function(e){return U("ROBOT_MODEL_CREATE_SUCCESS",{model:e})},failure:function(e){return U("ROBOT_MODEL_CREATE_FAILURE",{error:e})}},he={request:function(){return U("UPLOAD_ESI_FILE_REQUEST")},success:function(e){return U("UPLOAD_ESI_FILE_SUCCESS",{path:e})},failure:function(e){return U("UPLOAD_ESI_FILE_FAILURE",{error:e})}},Oe="LOAD_ESI_PATH",ve={request:function(){return U("ESI_PATH_FETCH_REQUEST")},success:function(e){return U("ESI_PATH_FETCH_SUCCESS",{path:e})},failure:function(e){return U("ESI_PATH_FETCH_FAILURE",{error:e})}},Ee="LOAD_CONFIG_XML",ye={request:function(){return U("CONFIG_XML_FETCH_REQUEST")},success:function(e){return U("CONFIG_XML_FETCH_SUCCESS",{xml:e})},failure:function(e){return U("CONFIG_XML_FETCH_FAILURE",{error:e})}},Ce="LOAD_PROGRAMS",Pe={request:function(){return U("PROGRAMS_FETCH_REQUEST")},success:function(e){return U("PROGRAMS_FETCH_SUCCESS",{programs:e})},failure:function(e){return U("PROGRAMS_FETCH_FAILURE",{error:e})}},Fe=function(){return U(Ce)},Re="LOAD_PROGRAM",je={request:function(){return U("PROGRAM_FETCH_REQUEST")},success:function(e){return U("PROGRAM_FETCH_SUCCESS",{program:e})},failure:function(e){return U("PROGRAM_FETCH_FAILURE",{error:e})}},Se=function(e){return U(Re,{name:e})},we="CREATE_PROGRAM",_e={request:function(){return U("PROGRAM_CREATE_REQUEST")},success:function(e){return U("PROGRAM_CREATE_SUCCESS",{program:e})},failure:function(e){return U("PROGRAM_CREATE_FAILURE",{error:e})}},xe=function(e){var t=e.name;return U(we,{name:t})},Ne="UPDATE_PROGRAM",Ie={request:function(e,t){return U("PROGRAM_UPDATE_REQUEST",{name:e,program:t})},success:function(e){return U("PROGRAM_UPDATE_SUCCESS",{program:e})},failure:function(e){return U("PROGRAM_UPDATE_FAILURE",{error:e})}},Me="DELETE_PROGRAM",Te={request:function(e){return U("PROGRAM_DELETE_REQUEST",{program:e})},success:function(e){return U("PROGRAM_DELETE_SUCCESS",{program:e})},failure:function(e){return U("PROGRAM_DELETE_FAILURE",{error:e})}},De=function(e){return U(Me,{name:e})},ke="RENAME_PROGRAM",Ae={request:function(e,t,n){return U("PROGRAM_RENAME_REQUEST",{name:e,newName:t,copy:n})},success:function(e,t,n){return U("PROGRAM_RENAME_SUCCESS",{name:e,program:t,copy:n})},failure:function(e){return U("PROGRAM_RENAME_FAILURE",{error:e})}},Le=function(e,t,n){return U(ke,{name:e,newName:t,copy:n})},Ue=n(27),Be=n(242),Ve=n.n(Be),We=n(167),Je=n.n(We),Xe=n(52),Ge=n.n(Xe),ze=n(77),qe=n.n(ze);function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ze=Object(Ue.b)(Ve.a,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return e+"-"+JSON.stringify(t)},"")}),Ye=function(e,t){return e.robot.resultsByChannel[t.cell.i]},Ke=function(e,t){return e.robot.resultsByChannel[t]},$e=(Ze(Ye,function(e){return e}),Ze(Ke,function(e){return e}),function(e,t){var n=t.cell,a="command"===He({},n.options).channel?n.i:"get",r=e.robot.resultsByChannel[a];return r?Object.keys(r).filter(function(e){return!!Je()(r[e])||!(!Ge()(r[e])||!Je()(r[e][0]))}):[]}),et=Ze($e,function(e){return e}),tt=Ze(function(e,t){var n=t.cell,a="command"===He({},n.options).channel?n.i:"get",r=e.robot.resultsByChannel[a],o={};r&&$e(e,{cell:n}).forEach(function(e){Ge()(r[e])&&Je()(r[e][0])&&(o[e]=r[e].map(function(e,t){return t}))});return o},function(e){return e}),nt=function(e,t){var n=t.cell;return"command"===n.options.channel?{cell:n,result:Ke(e,n.i)}:{cell:n,result:Ke(e,"get")}},at=(Object(Ue.a)(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.ai},function(e){return e}),Object(Ue.a)(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.di},function(e){return e}),Ze(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.end_pe},function(e){return e})),rt=function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.end_pq},ot=(Object(Ue.a)(rt,function(e){return e}),Object(Ue.a)(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.motion_acc},function(e){return e}),Ze(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.motion_pos},function(e){return e})),lt=Ze(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.motion_state},function(e){return e}),ct=(Ze(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.motion_toq},function(e){return e}),Ze(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.part_pq},function(e){return e})),st=Ze(ct,function(e){return e&&e.join("&")}),it=Object(Ue.a)(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.slave_al_state},function(e){return e}),ut=(Ze(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.slave_link_num},function(e){return e}),Ze(function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.slave_online_state},function(e){return e})),dt=function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.current_plan},pt=function(e){return e.robot.toolIds},mt=function(e){return e.robot.currentToolId},ft=function(e){return e.robot.currentWorkObjectId},bt=function(e){return e.robot.currentCoordinateId},gt=function(e){return e.robot.currentMotionVelPercent||0},ht=function(e){return e.robot.xml},Ot=function(e){return e.router.pathname},vt=function(e){return e.config.dashboards},Et=Object(Ue.a)(vt,function(e){return e&&e.map(function(e){return{name:e.name,i:e.i,editable:e.editable}})}),yt=function(e,t){var n=vt(e);if(n)return n.filter(function(e){return e.i===t})[0]},Ct=Object(Ue.a)(vt,Ot,function(e,t){if("/"!==t&&-1!==t.indexOf("/dashboards/")){var n=t.replace("/dashboards/",""),a=e&&e.filter(function(e){return e.i===n})[0];if(a)return a}return e&&e[0]}),Pt=(Object(Ue.a)(Et,Ot,function(e,t){if("/"!==t&&-1!==t.indexOf("/dashboards/")){var n=t.replace("/dashboards/",""),a=e&&e.filter(function(e){return e.i===n})[0];if(a)return a.i}return e&&e[0].i}),Object(Ue.a)(Et,Ot,function(e,t){if("/"!==t&&-1!==t.indexOf("/dashboards/")){var n=t.replace("/dashboards/",""),a=e&&e.filter(function(e){return e.i===n})[0];if(a)return a}return e&&e[0]})),Ft=function(e){return e.robot.websocketConnected},Rt=function(e){var t=e.config;return t.ws&&t.ws.url},jt=function(e){var t=e.config;return t.ws&&t.ws.commandSendInterval},St=function(e){var t=e.config;return t.ws&&t.ws.getInterval},wt=function(e){var t=e.config;return t.ws&&t.ws.commandSendDelay},_t=function(e){var t=e.config;return t.ws&&t.ws.unityUpdateInterval},xt=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).renderLogger=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=(a.cell,t("view3d",r));return o.a.createElement("div",{className:"".concat(l),ref:function(e){return n.container=e}},o.a.createElement(M.a,{unityContent:n.unityContent}))},n.unityContent=new I.UnityContent("/unity/8.json","/unity/UnityLoader.js"),n.state={},n.unityContent.on("progress",function(e){n.setState({progression:e}),1===e&&(n.unityContent.send("empt","GetUrlFromJs",window.location.origin),n.props.xml&&n.unityContent.send("empt","GetRobotXmlFromJS",n.props.xml),n.props.partPQ&&n.unityContent.send("empt","ReceiveDataFromJs",n.props.partPQ),n.unityContent.send("empt","SetCameraBackGround","0&0&0"),n.unityContent.send("empt","SetFPS","20"))}),n.throttleSend=D()(n.unityContent.send.bind(n.unityContent),n.props.unityUpdateInterval),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.deleteResultByChannel("xml"),this.props.loadConfigXml()}},{key:"componentWillUnmount",value:function(){this.unityContent.remove("progress")}},{key:"shouldComponentUpdate",value:function(e,t,n){var a=this;return e.xml!==this.props.xml&&e.xml&&1===this.state.progression&&this.unityContent.send("empt","GetRobotXmlFromJS",e.xml),e.partPQ!==this.props.partPQ&&e.partPQ&&1===this.state.progression&&setTimeout(function(){a.throttleSend("empt","ReceiveDataFromJs",e.partPQ)},0),!1}},{key:"unityProgress",value:function(e,t){e.Module&&this.setState({progress:e.progress})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderLogger)}}]),t}(r.Component);var Nt=Object(s.b)(function(e){return{xml:ht(e),partPQ:st(e),unityUpdateInterval:_t(e)}},{loadConfigXml:function(){return U(Ee)},deleteResultByChannel:se})(xt);Nt.NAME="\u4e09\u7ef4\u89c6\u56fe";var It=Nt,Mt=n(1),Tt=n.n(Mt),Dt=n(23),kt=n.n(Dt),At=n(21),Lt=n.n(At);function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Vt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).interval=null,n.timeout=null,n.sendCmd=function(e,t){var a=n.props,r=a.sendCmd,o=a.cell;r(e,t||o.i)},n.getSendCmdFn=function(e,t){return function(){n.sendCmd(e,t)}.bind(Object(m.a)(n))},n.getOnMouseDownFn=function(e,t){return function(){n.interval&&clearInterval(n.interval);var a=n.props,r=a.commandSendInterval,o=a.commandSendDelay,l=function(){n.sendCmd(e,t)},c=Object(m.a)(n);c.timeout=setTimeout(function(){c.interval=setInterval(l,r)},o)}.bind(Object(m.a)(n))},n.getOnMouseUpFn=function(e,t){return function(){n.timeout&&clearTimeout(n.timeout),n.interval&&clearInterval(n.interval),n.timeout&&n.interval&&e&&t&&(setTimeout(function(){n.sendCmd(e,t)},10),n.timeout=null,n.interval=null)}.bind(Object(m.a)(n))},n.getOptions=function(){var e=n.props.cell;return e.options?e.options:{}},n.updateOptions=function(e){var t=Bt({},n.props.cell);t.options=Bt({},t.options,{},e),n.props.onCellUpdate(t)},n.renderContent=function(e){e.prefixCls;throw new Error("renderComponent not implemented")},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderContent)}}]),t}(r.Component),Wt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).renderJogCoordinate=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=a.endPE,c=a.motionVelPercent,s=a.coordinateId,i=a.toolId,u=a.workObjectId,d=a.cell,p=t("jog-coordinate",r),m=["x","y","z","rx","ry","rz"];return o.a.createElement("div",{className:"".concat(p)},["X","Y","Z","RX","RY","RZ"].map(function(e,t){return o.a.createElement(kt.a,{key:e},o.a.createElement(Lt.a,{type:"primary",size:"large",onClick:function(){n.getSendCmdFn("j".concat(m[t]," --vel_percent=").concat(c," --direction=-1 --cor=").concat(s," --tool=tool").concat(i," --wobj=wobj").concat(u),d.i)()},onMouseDown:function(){n.getOnMouseDownFn("j".concat(m[t]," --vel_percent=").concat(c," --direction=-1 --cor=").concat(s," --tool=tool").concat(i," --wobj=wobj").concat(u),d.i)()},onMouseUp:function(){n.getOnMouseUpFn("j".concat(m[t]," --stop"),d.i)()},onMouseOut:function(){n.getOnMouseUpFn("j".concat(m[t]," --stop"),d.i)()}},e,"-"),o.a.createElement(Lt.a,{type:"primary",size:"large",onClick:function(){n.getSendCmdFn("j".concat(m[t]," --vel_percent=").concat(c," --direction=1 --cor=").concat(s," --tool=tool").concat(i," --wobj=wobj").concat(u),d.i)()},onMouseDown:function(){n.getOnMouseDownFn("j".concat(m[t]," --vel_percent=").concat(c," --direction=1 --cor=").concat(s," --tool=tool").concat(i," --wobj=wobj").concat(u),d.i)()},onMouseUp:function(){n.getOnMouseUpFn("j".concat(m[t]," --stop"),d.i)()},onMouseOut:function(){n.getOnMouseUpFn("j".concat(m[t]," --stop"),d.i)()}},e,"+"))}),o.a.createElement(kt.a,{className:"".concat(p,"-end_pe")},o.a.createElement("div",null,o.a.createElement("span",null,"X"),o.a.createElement("span",null,l&&(l[0]||0===l[0])?(1e3*l[0]).toFixed(3):"null")),o.a.createElement("div",null,o.a.createElement("span",null,"Y"),o.a.createElement("span",null,l&&(l[1]||0===l[1])?(1e3*l[1]).toFixed(3):"null")),o.a.createElement("div",null,o.a.createElement("span",null,"Z"),o.a.createElement("span",null,l&&(l[2]||0===l[2])?(1e3*l[2]).toFixed(3):"null"))),o.a.createElement(kt.a,{className:"".concat(p,"-end_pe")},o.a.createElement("div",null,o.a.createElement("span",null,"RX"),o.a.createElement("span",null,l&&(l[3]||0===l[3])?(l[3]/Math.PI*180).toFixed(3):"null")),o.a.createElement("div",null,o.a.createElement("span",null,"RY"),o.a.createElement("span",null,l&&(l[4]||0===l[4])?(l[4]/Math.PI*180).toFixed(3):"null")),o.a.createElement("div",null,o.a.createElement("span",null,"RZ"),o.a.createElement("span",null,l&&(l[5]||0===l[5])?(l[5]/Math.PI*180).toFixed(3):"null"))))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderJogCoordinate)}}]),t}(Vt);Wt.propTypes={cell:Tt.a.object.isRequired,sendCmd:Tt.a.func.isRequired,motionVelPercent:Tt.a.number,coordinateId:Tt.a.number.isRequired,toolId:Tt.a.number.isRequired,workObjectId:Tt.a.number.isRequired,endPE:Tt.a.array};var Jt=Object(Ue.a)(gt,bt,mt,ft,at,function(e,t,n,a,r){return{coordinateId:t,motionVelPercent:e,toolId:n,workObjectId:a,endPE:r}});var Xt=Object(s.b)(function(e){return Jt(e)},{sendCmd:ce})(Wt);Xt.NAME="\u624b\u52a8\u7b1b\u5361\u5c14\u5750\u6807\u7cfbJog\u7ec4\u4ef6";var Gt=Xt,zt=function(e){return o.a.createElement("svg",Object.assign({width:"90px",height:"76px",viewBox:"0 0 90 76",version:"1.1"},e),o.a.createElement("rect",{fillRule:"nonzero",x:"0",y:"55.243",width:"18.306",height:"20.204"}),o.a.createElement("rect",{fillRule:"nonzero",x:"23.711",y:"37.304",width:"18.493",height:"38.143"}),o.a.createElement("rect",{fillRule:"nonzero",x:"47.609",y:"18.929",width:"18.493",height:"56.518"}),o.a.createElement("rect",{fillRule:"nonzero",x:"71.507",y:"0.38",width:"18.493",height:"75.067"}))},qt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).renderJogJoint=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=a.cell,c=a.slaveOnlineState,s=a.slaveAlState,i=a.motionState,u=a.motionPos,d=a.motionVelPercent,p=t("jog-joint",r);return o.a.createElement("div",{className:"".concat(p)},[0,1,2,3,4,5].map(function(e){return o.a.createElement(kt.a,{key:e},o.a.createElement(Lt.a,{type:"primary",size:"large",onClick:function(){n.sendCmd("j".concat(e+1," --direction=-1 --vel_percent=").concat(d),l.i)},onMouseDown:function(){n.getOnMouseDownFn("j".concat(e+1," --direction=-1 --vel_percent=").concat(d),l.i)()},onMouseUp:function(){n.getOnMouseUpFn("j".concat(e+1," --stop"),l.i)()},onMouseOut:function(){n.getOnMouseUpFn("j".concat(e+1," --stop"),l.i)()}},"J",e+1,"-"),o.a.createElement("div",{className:"".concat(p,"-status")},o.a.createElement("span",null,u&&(u[e]||0===u[e])?(u[e]/Math.PI*180).toFixed(3):"null"),o.a.createElement("div",{className:"".concat(p,"-status-icons")},o.a.createElement(w.a,{component:zt,className:"".concat(c&&c[e]?"".concat(p,"-slave-online-state ").concat(p,"-slave-online-state-").concat(s&&s[e]):"".concat(p,"-slave-online-state disabled"))}),!(!i||!i[e])&&o.a.createElement(w.a,{type:"check-circle",theme:"filled",className:"success"}),!(i&&i[e])&&o.a.createElement(w.a,{type:"check-circle",theme:"filled",className:"disabled"}))),o.a.createElement(Lt.a,{type:"primary",size:"large",onClick:function(){n.sendCmd("j".concat(e+1," --direction=1 --vel_percent=").concat(d),l.i)},onMouseDown:function(){n.getOnMouseDownFn("j".concat(e+1," --direction=1 --vel_percent=").concat(d),l.i)()},onMouseUp:function(){n.getOnMouseUpFn("j".concat(e+1," --stop"),l.i)()},onMouseOut:function(){n.getOnMouseUpFn("j".concat(e+1," --stop"),l.i)()}},"J",e+1,"+"))}))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderJogJoint)}}]),t}(Vt);qt.propTypes={cell:Tt.a.object.isRequired,sendCmd:Tt.a.func.isRequired,vel:Tt.a.number,motionPos:Tt.a.array,slaveOnlineState:Tt.a.array};var Qt=Object(Ue.a)(gt,ot,lt,ut,it,function(e,t,n,a,r){return{motionVelPercent:e,motionPos:t,motionState:n,slaveOnlineState:a,slaveAlState:r}});var Ht=Object(s.b)(function(e){return Qt(e)},{sendCmd:ce})(qt);Ht.NAME="\u624b\u52a8\u5173\u8282\u5750\u6807\u7cfbJog\u7ec4\u4ef6";var Zt=Ht,Yt=function(e){var t=e.robot;return t.resultsByChannel&&t.resultsByChannel.get&&t.resultsByChannel.get.state_code},Kt=function(e){var t=e.config;return t&&t.layoutConfig&&t.layoutConfig.cols},$t=function(e){var t=e.config;return t&&t.layoutConfig&&t.layoutConfig.rowHeight},en=function(e){var t=e.config;return t&&t.layoutConfig&&t.layoutConfig.margin},tn=function(e){var t=e.config;return t&&t.layoutConfig&&t.layoutConfig.containerPadding},nn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).renderJogJoint=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=(a.cell,a.websocketConnected),c=a.stateCode;c||(c=100);console.log("robot state code",c);var s={100:"#AAAAAA",200:"#FF851B",300:"#FF4136",400:"#0074D9",500:"#01FF70"}[c],i={100:"\u53bb\u4f7f\u80fd",200:"\u624b\u52a8",300:"\u51c6\u5907\u81ea\u52a8",400:"\u81ea\u52a8",500:"\u9519\u8bef\u505c\u76ee"}[c],u=t("robot-status",r);return o.a.createElement("div",{className:"".concat(u)},o.a.createElement("div",null,!!l&&o.a.createElement(w.a,{type:"wifi",className:"success"}),!!l&&o.a.createElement("span",null,"\u5df2\u8fde\u63a5"),!l&&o.a.createElement(w.a,{type:"wifi",className:"danger"}),!l&&o.a.createElement("span",null,"\u672a\u8fde\u63a5")),o.a.createElement("div",null,o.a.createElement(w.a,{style:{color:s,fill:s},fill:s,type:"check-circle",className:"info",theme:"filled"}),o.a.createElement("span",null,i||"\u65e0\u72b6\u6001")))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderJogJoint)}}]),t}(r.Component);var an=Object(s.b)(function(e){return{stateCode:Yt(e),websocketConnected:Ft(e)}})(nn);an.NAME="\u673a\u5668\u4eba\u72b6\u6001";var rn=an,on=n(330),ln=n.n(on),cn=n(60),sn=n.n(cn),un=n(90),dn=n.n(un),pn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={enable:!0},n.onChange=function(e){var t=n.props.cell;e?(n.sendCmd("md","".concat(t.i,"-md")),n.sendCmd("rc","".concat(t.i,"-rc")),n.sendCmd("en","".concat(t.i,"-en")),n.setState({enable:!0})):(n.sendCmd("ds","".concat(t.i,"-ds")),n.setState({enable:!1}))},n.resetEnable=function(){var e=n.props.cell;n.props.deleteResultByChannel("".concat(e.i,"-md")),n.props.deleteResultByChannel("".concat(e.i,"-rc")),n.props.deleteResultByChannel("".concat(e.i,"-en")),n.setState({enable:!1})},n.resetDisable=function(){var e=n.props.cell;n.props.deleteResultByChannel("".concat(e.i,"-ds")),n.setState({enable:!0})},n.renderManualSwitch=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=a.cell,c=a.stateCode,s=a.resultMD,i=a.resultRC,u=a.resultEN,d=a.resultDS,p=(Math.floor(c),Math.floor(c),t("manual-switch",r)),f=(Object(m.a)(n),n.state.enable),b=f&&s&&i&&u&&(0!==s.return_code||0!==i.return_code||0!==u.return_code),g=!f&&d&&0!==d.return_code;return o.a.createElement("div",{className:"".concat(p)},o.a.createElement("div",null,o.a.createElement(ln.a,{checkedChildren:"\u5f00",unCheckedChildren:"\u5173",checked:f&&s&&i&&u&&0===s.return_code&&0===i.return_code&&0===u.return_code,onChange:n.onChange}),o.a.createElement("span",null,100===c?"\u4f7f\u80fd":"\u672a\u4f7f\u80fd")),o.a.createElement("div",null,o.a.createElement(w.a,{type:"drag",onClick:function(){n.sendCmd("mvJoint",l.i)}}),o.a.createElement("span",null,"\u62d6\u52a8")),o.a.createElement("div",null,o.a.createElement(w.a,{type:"pause-circle",onClick:function(){n.sendCmd("FCStop",l.i)}}),o.a.createElement("span",null,"\u505c\u6b62\u529b\u63a7")),o.a.createElement("div",null,o.a.createElement(w.a,{type:"swap",onClick:function(){n.sendCmd("mvf",l.i)}}),o.a.createElement("span",null,"\u8f68\u8ff9\u590d\u73b0")),o.a.createElement("div",null,o.a.createElement(w.a,{type:"rollback",onClick:function(){n.sendCmd("rs --pos={0.5,0.39252,0.7899,0.5,0.5,0.5} --vel=0.02",l.i)}}),o.a.createElement("span",null,"\u56de\u96f6\u70b9")),o.a.createElement(sn.a,{visible:b,title:"\u4f7f\u80fd\u9519\u8bef",onOk:n.resetEnable,onCancel:n.resetEnable,centered:!0,footer:[o.a.createElement(Lt.a,{key:"close",onClick:n.resetEnable},"\u5173\u95ed")]},!(!s||0===s.return_code)&&o.a.createElement("p",{className:"danger"},"MD ",s&&(s.return_message?"\u8fd4\u56de\u7801\uff1a".concat(s.return_code," \u8fd4\u56de\u6d88\u606f\uff1a").concat(s.return_message," "):"\u8fd4\u56de\u7801\uff1a".concat(s.return_code))),!(!i||0===i.return_code)&&o.a.createElement("p",{className:"danger"},"RC ",i&&(i.return_message?"\u8fd4\u56de\u7801\uff1a".concat(i.return_code," \u8fd4\u56de\u6d88\u606f\uff1a").concat(i.return_message," "):"\u8fd4\u56de\u7801\uff1a".concat(i.return_code))),!(!u||0===u.return_code)&&o.a.createElement("p",{className:"danger"},"EN ",u&&(u.return_message?"\u8fd4\u56de\u7801\uff1a".concat(u.return_code," \u8fd4\u56de\u6d88\u606f\uff1a").concat(u.return_message," "):"\u8fd4\u56de\u7801\uff1a".concat(u.return_code)))),o.a.createElement(sn.a,{visible:g,title:"\u53bb\u4f7f\u80fd\u9519\u8bef",onOk:n.resetDisable,onCancel:n.resetDisable,centered:!0,footer:[o.a.createElement(Lt.a,{key:"close",onClick:n.resetDisable},"\u5173\u95ed")]},o.a.createElement("span",{className:"danger"},d&&(d.return_message?"\u8fd4\u56de\u7801\uff1a".concat(d.return_code," \u8fd4\u56de\u6d88\u606f\uff1a").concat(d.return_message," "):"\u8fd4\u56de\u7801\uff1a".concat(d.return_code)))))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderManualSwitch)}}]),t}(Vt);pn.propTypes={cell:Tt.a.object.isRequired,stateCode:Tt.a.number};var mn=Object(s.b)(function(){var e=Ze(function(e,t){return e.robot.resultsByChannel["".concat(t.cell.i,"-md")]},function(e,t){return e.robot.resultsByChannel["".concat(t.cell.i,"-rc")]},function(e,t){return e.robot.resultsByChannel["".concat(t.cell.i,"-en")]},function(e,t){return e.robot.resultsByChannel["".concat(t.cell.i,"-ds")]},function(e,t,n,a){return{resultMD:e,resultRC:t,resultEN:n,resultDS:a}});return function(t,n){return e(t,n)}},{deleteResultByChannel:se})(pn);mn.NAME="\u624b\u52a8\u63a7\u5236\u5f00\u5173";var fn=mn,bn=(n(280),n(548)),gn=n.n(bn),hn=(n(706),n(708),n(709),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){console.log("change",e)},n.renderJogJoint=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=(a.cell,t("code-editor",r));return o.a.createElement("div",{className:"".concat(l)},o.a.createElement(gn.a,{mode:"javascript",theme:"monokai",width:"100%",height:"100%",value:'\nfunction onLoad(editor) {\n  console.log("i\'ve loaded");\n}\nfunction onLoad(editor) {\n  console.log("i\'ve loaded");\n}\nfunction onLoad(editor) {\n  console.log("i\'ve loaded");\n}\nfunction onLoad(editor) {\n  console.log("i\'ve loaded");\n}\nfunction onLoad(editor) {\n  console.log("i\'ve loaded");\n}\nfunction onLoad(editor) {\n  console.log("i\'ve loaded");\n}\n    ',onChange:n.onChange,name:"UNIQUE_ID_OF_DIV",editorProps:{$blockScrolling:!0}}))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderJogJoint)}}]),t}(r.Component));var On=Object(s.b)(function(e){return{robotStatus:e.robot.robotStatus}})(hn);On.NAME="\u4ee3\u7801\u7f16\u8f91";var vn=n(47),En=n.n(vn),yn=n(549),Cn=n.n(yn),Pn=En.a.TextArea,Fn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).interval=null,n.timeout=null,n.getSendCmdFn=function(){return function(){var e=n.props,t=e.sendCmd,a=e.cell,r=n.getOptions();r.command&&r.command.split("\n").forEach(function(e){(e=e.trim())&&(t(e,a.i),n.terminal.runCommandOnActive("showCmd "+e))})}.bind(Object(m.a)(n))},n.getOnMouseDownFn=function(){return function(){n.interval&&clearInterval(n.interval);var e=n.getSendCmdFn(),t=Object(m.a)(n),a=n.props,r=a.commandSendInterval,o=a.commandSendDelay;t.timeout=setTimeout(function(){t.interval=setInterval(e,r)},o)}.bind(Object(m.a)(n))},n.getOnMouseUpFn=function(){return function(){n.interval&&clearInterval(n.interval),n.timeout&&clearTimeout(n.timeout)}.bind(Object(m.a)(n))},n.renderContent=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=(a.cell,a.results,n.getOptions()),c=t("debugger",r),s=Object(m.a)(n);return o.a.createElement("div",{className:"".concat(c)},o.a.createElement(kt.a,null,o.a.createElement(Pn,{rows:2,value:l.command,onChange:function(e){n.updateOptions({command:e.target.value})},placeholder:"\u8bf7\u8f93\u5165\u4e00\u884c\u673a\u5668\u4eba\u6307\u4ee4"}),o.a.createElement(Lt.a,{onClick:n.getSendCmdFn(),onMouseDown:n.getOnMouseDownFn(),onMouseUp:n.getOnMouseUpFn(),onMouseOut:n.getOnMouseUpFn(),type:"primary",shape:"round",icon:"play-circle",size:"large"},"Send"),o.a.createElement("div",{className:"".concat(c,"-terminal")},o.a.createElement(Cn.a,{color:"green",backgroundColor:"black",barColor:"black",hideTopBar:!0,allowTabs:!1,commands:{showCmd:function(e,t,n){if(e[1])t(e.slice(1).join(" "));else{var a=s.getOptions();a.command&&t(a.command)}},send:function(e,t,n){s.props.sendCmd(e[1],s.props.cell.i)},showResult:function(e,t,a){t(JSON.stringify(n.result))}},descriptions:{send:'\u53d1\u9001\u6307\u4ee4\u7ed9\u673a\u5668\u4eba, "send [\u673a\u5668\u4eba\u6307\u4ee4]", \u4f8b\u5982 "send get"',showResult:"\u663e\u793a\u6700\u8fd1\u4e00\u6761\u8fd4\u56de\u503c",showCmd:"\u663e\u793a\u5f53\u524d\u6307\u4ee4\u503c"},ref:function(e){return n.terminal=e}}))))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"shouldComponentUpdate",value:function(e,t,n){return e.result!==this.props.result&&(this.result=e.result,this.terminal.runCommandOnActive("showResult")),e.cell!==this.props.cell||e.result!==this.props.result}}]),t}(Vt);Fn.propTypes={results:Tt.a.array.isRequired};var Rn=Object(s.b)(function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=[];return Object(Ue.a)(Ye,function(n,a){console.log(a),n&&t.push(n);var r=t.length;return r>e&&t.splice(0,r-e),t})}(10);return function(t,n){return{results:e(t,n),result:Ke(t,n.cell.i)}}})(Fn);Rn.NAME="\u8c03\u8bd5\u9762\u677f";var jn=Rn;function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _n=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).getOptions=function(){var e=n.props.cell;return e.options?e.options:{}},n.updateOptions=function(e){var t=wn({},n.props.cell);t.options=wn({},t.options,{},e),n.props.onCellUpdate(t)},n.showConfig=function(){var e=n.getOptions();n.updateOptions(wn({},e,{showConfig:!0}))},n.hideConfig=function(){console.log("hideConfig");var e=n.getOptions();n.updateOptions(wn({},e,{showConfig:null}))},n.renderContent=function(e){e.prefixCls;throw new Error("renderContent not implemented")},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderContent)}}]),t}(r.Component),xn=n(49),Nn=n.n(xn),In=n(57),Mn=n.n(In),Tn=n(38),Dn=n.n(Tn),kn=n(36),An=n.n(kn),Ln=n(48),Un=n.n(Ln);function Bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bn(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Wn=En.a.Search,Jn=Mn.a.Group,Xn=Nn.a.Item,Gn=Dn.a.Option,zn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={sources:[]},n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){if(!e){var a=n.getOptions();n.updateOptions(Vn({},a,{},t,{sources:t.sources,showConfig:!1}))}})},n.remove=function(e){n.setState({sources:n.state.sources.filter(function(t,n){return n!==e})})},n.add=function(){n.setState({sources:[].concat(Object(b.a)(n.state.sources),[{}])})},n.renderContent=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=a.cell,c=a.sendCmd,s=n.getOptions(),i=n.props.form.getFieldDecorator,u=t("realtime-chart-config",r),d=s.interval||1e3;return o.a.createElement(sn.a,{title:"\u6dfb\u52a0\u6570\u636e",visible:!!s.showConfig,maskClosable:!1,okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",width:"80%",onOk:n.handleSubmit,onCancel:n.hideConfig,wrapClassName:"".concat(u)},o.a.createElement(Nn.a,{layout:"horizontal"},o.a.createElement(Xn,{label:"\u6570\u636e\u6765\u6e90"},i("channel",{initialValue:"command"===s.channel?"command":"get",rules:[{type:"string",required:!0,message:"\u8bf7\u9009\u62e9\u6570\u636e\u6765\u6e90"}]})(o.a.createElement(Jn,{onChange:function(e){n.updateOptions(Vn({},s,{channel:e.target.value}))}},o.a.createElement(Mn.a,{value:"get"},"\u9ed8\u8ba4GET"),o.a.createElement(Mn.a,{value:"command"},"\u81ea\u5b9a\u4e49\u547d\u4ee4")))),"command"===s.channel&&o.a.createElement(kt.a,null,o.a.createElement(An.a,{span:20},o.a.createElement(Xn,{label:"\u8fd0\u884c\u6307\u4ee4",labelCol:{span:4},wrapperCol:{span:20}},i("command",{initialValue:s.command,rules:[{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u6307\u4ee4"}]})(o.a.createElement(Wn,{onSearch:function(e){c(e,l.i)},enterButton:"\u8fd0\u884c"})))),o.a.createElement(An.a,{span:4},o.a.createElement(Xn,{label:"\u8fd0\u884c\u95f4\u9694",labelCol:{span:12},wrapperCol:{span:12}},i("interval",{initialValue:d,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6307\u4ee4"}]})(o.a.createElement(Un.a,{min:30,step:1,formatter:function(e){return"".concat(e,"\u6beb\u79d2")},parser:function(e){return e.replace("\u6beb\u79d2","")}}))))),n.renderDataSources(s)))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){var a=e.cell,r=e.dataSources,o=this.props,l=o.cell,c=o.dataSources;if(!qe()(a,l)&&l&&l.options&&l.options&&l.options.sources)try{this.setState({sources:l.options.sources})}catch(s){}qe()(r,c)||this.setState({sources:this.state.sources.filter(function(e){return!e.source||-1!==c.indexOf(e.source)})})}},{key:"renderDataSources",value:function(e){var t=this,n=this.props.form,a=n.getFieldDecorator,l=(n.getFieldValue,n.getFieldsValue),c=this.props,s=c.dataSources,i=c.dataIndexes;(e.sources||[]).forEach(function(e,t){a("sources[".concat(t,"].source"),{initialValue:e.source})});var u=this.state.sources;if(!s||!i)return o.a.createElement("div",null,"\u6570\u636e\u7b49\u5f85\u4e2d...");if(0===Object.keys(s).length)return o.a.createElement("div",{style:{textAlign:"center"},className:"error"},"\u65e0\u53ef\u6dfb\u52a0\u6570\u636e\u9879\uff0c\u8bf7\u8f93\u5165\u5e76\u8fd0\u884c\u6307\u4ee4\uff0c\u5e76\u786e\u8ba4\u8fd4\u56de\u7ed3\u679c\u4e2d\u5305\u542b\u6570\u503c\u3002");var d=l().sources;d||(d=[]);var p=u.map(function(e,n){return o.a.createElement(kt.a,{key:n},o.a.createElement(An.a,{span:10},o.a.createElement(Xn,{label:"\u6570\u636e\u9879",labelCol:{span:8},wrapperCol:{span:16}},a("sources[".concat(n,"].source"),{initialValue:e.source,rules:[{type:"string",required:!0,message:"\u8bf7\u9009\u62e9\u6570\u636e\u9879"}]})(o.a.createElement(Dn.a,{style:{width:"100%"},size:"small",placeholder:"\u9009\u62e9\u6570\u636e\u9879"},s.map(function(e){return o.a.createElement(Gn,{key:e,value:e},e)}))))),o.a.createElement(An.a,{span:10},!!d[n]&&!!i[d[n].source]&&o.a.createElement(Xn,{label:"index",labelCol:{span:8},wrapperCol:{span:16}},a("sources[".concat(n,"].index"),{initialValue:e.index,rules:[{type:"number",required:!0,message:"\u8bf7\u9009\u62e9index"}]})(o.a.createElement(Dn.a,{style:{width:"100%"},size:"small",placeholder:"\u9009\u62e9index"},i[d[n].source].map(function(e){return o.a.createElement(Gn,{key:e.toString(),value:e},e)}))))),o.a.createElement(An.a,{span:4},o.a.createElement(Nn.a.Item,{style:{paddingLeft:20}},o.a.createElement(Lt.a,{onClick:t.remove.bind(t,n),type:"danger"},o.a.createElement(w.a,{type:"minus"})," \u79fb\u9664"))))});return o.a.createElement(r.Fragment,null,p,o.a.createElement(Nn.a.Item,{wrapperCol:{span:24},style:{textAlign:"center"}},o.a.createElement(Lt.a,{type:"dashed",onClick:this.add},o.a.createElement(w.a,{type:"plus"})," \u6dfb\u52a0\u6570\u636e\u9879")))}}]),t}(_n),qn=Object(Ue.a)(et,tt,function(e,t){return{dataSources:e,dataIndexes:t}});var Qn=Object(s.b)(function(e,t){return qn(e,t)},{sendCmd:ce,deleteResultByChannel:se})(Nn.a.create({mapPropsToFields:function(e){var t=e.sources;e.cell;return function e(t){return Object.keys(t).reduce(function(n,a){return Vn({},n,Object(g.a)({},a,"object"!==typeof t[a]||"value"in t[a]?Nn.a.createFormField(Vn({},t[a],{value:t[a]&&t[a].value})):Ge()(t[a])?t[a].map(function(t){return e(t)}):e(t[a])))},{})}({sources:t})},onValuesChange:function(e,t){}})(zn)),Hn=n(554),Zn=n.n(Hn),Yn=n(333),Kn=n.n(Yn),$n=["#dd6b6699","#759aa099","#e69d8799","#8dc1a999","#ea7e5399","#eedd7899","#73a37399","#73b9bc99","#7289ab99","#91ca8c99","#f49f4299"],ea={color:$n,backgroundColor:"#111",tooltip:{axisPointer:{lineStyle:{color:"#555"},crossStyle:{color:"#555"}}},legend:{textStyle:{color:"#555"}},textStyle:{color:"#555"},title:{textStyle:{color:"#555"}},toolbox:{iconStyle:{normal:{borderColor:"#555"}}},dataZoom:{textStyle:{color:"#555"}},visualMap:{textStyle:{color:"#555"}},timeline:{lineStyle:{color:"#555"},itemStyle:{normal:{color:$n[1]}},label:{normal:{textStyle:{color:"#555"}}},controlStyle:{normal:{color:"#555",borderColor:"#555"}}},timeAxis:{axisLine:{lineStyle:{color:"#555"}},axisTick:{lineStyle:{color:"#555"}},axisLabel:{textStyle:{color:"#555"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#555"}}},logAxis:{axisLine:{lineStyle:{color:"#555"}},axisTick:{lineStyle:{color:"#555"}},axisLabel:{textStyle:{color:"#555"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#555"}}},valueAxis:{axisLine:{lineStyle:{color:"#555"}},axisTick:{lineStyle:{color:"#555"}},axisLabel:{textStyle:{color:"#555"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#555"}}},categoryAxis:{axisLine:{lineStyle:{color:"#555"}},axisTick:{lineStyle:{color:"#555"}},axisLabel:{textStyle:{color:"#555"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#555"}}},line:{symbol:"circle"},graph:{color:$n},gauge:{title:{textStyle:{color:"#555"}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};ea.categoryAxis.splitLine.show=!1,Kn.a.registerTheme("robot_theme",ea);var ta=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dataChannel,n=e.results;if(0===Object.keys(n).length)return null;var a={title:{text:"\u6570\u636e\u6765\u6e90 "+t,x:"center",y:"bottom",textStyle:{fontSize:12}},legend:{data:Object.keys(n)},xAxis:{splitLine:{show:!1},boundaryGap:!0,min:"dataMin",max:"dataMax",type:"category"},yAxis:{splitLine:{show:!1},type:"value"},series:Object.keys(n).map(function(e){return{name:e,data:n[e],symbol:"none",type:"line"}})};return o.a.createElement(r.Fragment,null,o.a.createElement(Zn.a,{style:{width:"100%",height:"100%"},theme:"robot_theme",option:a,notMerge:!0,lazyUpdate:!0}))}}]),t}(r.Component);function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var aa=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).interval=null,n.state={playing:!0},n.resetInterval=function(){clearInterval(n.interval);var e=n.props,t=e.cell,a=e.sendCmd;if(t.options&&!t.options.showConfig&&"command"===t.options.channel&&t.options.command&&t.options.interval&&!t.options.paused){var r=t.options.command,o=t.i;n.interval=setInterval(function(){a(r,o)},t.options.interval)}},n.handleChange=function(e){var t=n.getOptions();n.updateOptions(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{channel:e}))},n.renderContent=function(e){var t=e.getPrefixCls,a=n.props,l=a.prefixCls,c=a.cell,s=a.results,i=t("realtime-chart",l),u=c.options&&c.options.channel&&c.options.sources&&c.options.sources.length>0,d="".concat("get"===c.options.channel?"get":c.options.command);return o.a.createElement("div",{className:"".concat(i," ").concat(!u&&i+"-no-data")},!u&&o.a.createElement("div",null,o.a.createElement("span",null,"\u672a\u914d\u7f6e\u6570\u636e\u6e90 \u6216 \u672a\u5173\u8054\u6570\u636e\u9879"),o.a.createElement("div",{style:{marginTop:20}},o.a.createElement(Lt.a,{type:"primary",onClick:function(){n.updateOptions({showConfig:!0})}},"\u6dfb\u52a0\u914d\u7f6e\u6570\u636e"))),u&&o.a.createElement(r.Fragment,null,o.a.createElement(ta,{dataChannel:d,prefixCls:i,results:s}),c.options.paused&&o.a.createElement(w.a,{type:"play-circle",className:"".concat(i,"-play ").concat(i,"-play-start"),onClick:function(){n.updateOptions({paused:!1})}}),!c.options.paused&&o.a.createElement(w.a,{type:"pause-circle",className:"".concat(i,"-play"),onClick:function(){n.updateOptions({paused:!0})}})))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentDidMount",value:function(){this.resetInterval(),this.start=new Date}},{key:"shouldComponentUpdate",value:function(e,t,n){var a=new Date;return a-this.start>1e3&&(this.start=a,!0)}},{key:"componentDidUpdate",value:function(e,t,n){var a=e.cell,r=this.props.cell;qe()(a,r)||this.resetInterval(),r.options.showConfig!==a.options.showConfig&&r.options.showConfig&&this.props.deleteResultByChannel(r.i)}}]),t}(Vt);aa.propTypes={results:Tt.a.object.isRequired};var ra=Object(s.b)(function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t={},n=null;return Object(Ue.a)(nt,function(a){var r=a.result,o=a.cell;if(o.options.paused)return t;if(qe()(o.options.sources,n)||(n=o.options.sources?Object(b.a)(o.options.sources):[],t={}),t=He({},t),r){var l=new Date,c=l.getHours(),s=l.getMinutes();s<10&&(s="0"+s);var i=l.getSeconds();i<10&&(i="0"+i);var u=l.toString(),d="".concat(c,":").concat(s,":").concat(i);n.map(function(n){var a=n.source;(n.index||0===n.index)&&(a="".concat(a,"_").concat(n.index)),t[a]||(t[a]=[]),Ge()(r[n.source])&&Je()(r[n.source][n.index])?t[a]=[].concat(Object(b.a)(t[a]),[{name:u,value:[d,r[n.source][n.index]]}]):Je()(r[n.source])?t[a]=[].concat(Object(b.a)(t[a]),[{name:u,value:[d,r[n.source]]}]):t[a]=[].concat(Object(b.a)(t[a]),[{name:u,value:[d,0]}]);var o=t[a].length;o>e&&t[a].splice(0,o-e)})}return t})}(1e3);return function(t,n){return{results:e(t,n)}}},{deleteResultByChannel:se})(aa);ra.NAME="\u5b9e\u65f6\u7ed8\u56fe",ra.CONFIG=Qn;var oa=ra,la=n(335),ca=n.n(la),sa=n(200),ia=n.n(sa);function ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var da=Dn.a.Option,pa={UserInput:"\u76f4\u63a5\u8f93\u5165\u5de5\u5177\u5750\u6807\u7cfb\u7684\u4f4d\u7f6e\u548c\u8d44\u6001(\u6b27\u62c9\u89d2)",CalibT4P:"\u4ee5\u6cd5\u5170\u5750\u6807\u7cfb\u4e3a\u53c2\u8003\u5750\u6807\u7cfb\uff0c\u6807\u5b9a\u51fa\u5de5\u5177\u5750\u6807\u7cfb\u539f\u70b9\u7684\u4f4d\u7f6e\u504f\u79fb\u91cf\uff0c\u5de5\u5177\u5750\u6807\u7cfb\u7684\u59ff\u6001\u9ed8\u8ba4\u4e0e\u6cd5\u5170\u5750\u6807\u7cfb\u4e00\u81f4\u3002",CalibT5P:"\u4ee5\u6cd5\u5170\u5750\u6807\u7cfb\u4e3a\u53c2\u8003\u5750\u6807\u7cfb\uff0c\u6807\u5b9a\u51fa\u5de5\u5177\u5750\u6807 \u7cfb\u539f\u70b9\u7684\u4f4d\u7f6e\u504f\u79fb\u91cf\u4ee5 \u53ca\u5de5\u5177\u5750\u6807\u7cfb Z \u8f74\u7684\u65b9 \u5411\u3002",CalibT6P:"\u4ee5\u6cd5\u5170\u5750\u6807\u7cfb\u4e3a\u53c2\u8003\u5750\u6807\u7cfb\uff0c\u6807\u5b9a\u51fa\u5de5\u5177\u5750\u6807\u7cfb\u7684\u4f4d\u59ff\u3002"},ma={CalibT4P:o.a.createElement("div",{style:{maxWidth:300}},o.a.createElement("p",null,"1)\u9009\u62e9\u6cd5\u5170\u5750\u6807\u7cfb\u4e3a\u5f53\u524d\u5de5\u5177\u5750\u6807\u7cfb\uff0c\u673a\u5668\u4eba\u5e95\u5ea7\u5750\u6807\u7cfb\u4e3a \u5f53\u524d\u5de5\u4ef6\u5750\u6807\u7cfb; "),o.a.createElement("p",null," 2)\u624b\u52a8\u793a\u6559\uff0c\u4ee5\u4e0d\u540c\u59ff\u6001\u4f7f\u79fb\u52a8\u5de5\u5177\u4f7f\u5de5\u5177\u4e2d\u5fc3\u70b9\u6cbf\u67d0\u4e00\u65b9 \u5411\u4e0e\u5916\u90e8\u56fa\u5b9a\u70b9\u63a5\u89e6\uff0c\u5e76\u4fdd\u5b58\u6b64\u65f6\u7684\u4f4d\u59ff\uff0c\u4f9d\u6b21\u6cbf 4 \u4e2a\u4e0d\u540c \u65b9\u5411\u83b7\u53d6\u793a\u6559\u70b9\u7684\u4f4d\u59ff\u6570\u636e;"),o.a.createElement("p",null,"3)\u786e\u8ba4\u6807\u5b9a\u7ed3\u679c\u3002")),CalibT5P:o.a.createElement("div",{style:{maxWidth:300}},o.a.createElement("p",null,"1)\u9009\u62e9\u6cd5\u5170\u5750\u6807\u7cfb\u4e3a\u5f53\u524d\u5de5\u5177\u5750\u6807\u7cfb\uff0c\u673a\u5668\u4eba\u5e95\u5ea7\u5750\u6807\u7cfb\u4e3a \u5f53\u524d\u5de5\u4ef6\u5750\u6807\u7cfb;"),o.a.createElement("p",null,"2)\u624b\u52a8\u793a\u6559\uff0c\u4ee5\u4e0d\u540c\u59ff\u6001\u4f7f\u79fb\u52a8\u5de5\u5177\u4f7f\u5de5\u5177\u4e2d\u5fc3\u70b9\u6cbf\u67d0\u4e00\u65b9 \u5411\u4e0e\u5916\u90e8\u56fa\u5b9a\u70b9\u63a5\u89e6\uff0c\u5e76\u4fdd\u5b58\u6b64\u65f6\u7684\u4f4d\u59ff\uff0c\u4f9d\u6b21\u6cbf 4 \u4e2a\u4e0d\u540c \u65b9\u5411\u83b7\u53d6\u793a\u6559\u70b9\u7684\u4f4d\u59ff\u6570\u636e; "),o.a.createElement("p",null,"3)\u4ee5\u7b2c 4 \u70b9\u7684\u5de5\u5177\u4f4d\u59ff\u4e3a\u57fa\u51c6\uff0c\u4fdd\u6301\u5de5\u5177\u59ff\u6001\u4e0d\u53d8\uff0c\u5c06\u5de5\u5177 \u5750\u6807\u7cfb Z \u8f74\u6b63\u65b9\u5411\u4e0a\u67d0\u4e00\u7279\u5f81\u70b9\u4e0e\u5916\u90e8\u56fa\u5b9a\u70b9\u63a5\u89e6\uff0c\u4fdd\u5b58\u7b2c 5 \u4e2a\u793a\u6559\u70b9\u7684\u4f4d\u59ff; "),o.a.createElement("p",null,"4)\u786e\u8ba4\u6807\u5b9a\u7ed3\u679c\u3002")),CalibT6P:o.a.createElement("div",{style:{maxWidth:300}},o.a.createElement("p",null,"1)\u9009\u62e9\u6cd5\u5170\u5750\u6807\u7cfb\u4e3a\u5f53\u524d\u5de5\u5177\u5750\u6807\u7cfb\uff0c\u673a\u5668\u4eba\u5e95\u5ea7\u5750\u6807\u7cfb\u4e3a \u5f53\u524d\u5de5\u4ef6\u5750\u6807\u7cfb; "),o.a.createElement("p",null,"2)\u624b\u52a8\u793a\u6559\uff0c\u4ee5\u4e0d\u540c\u59ff\u6001\u4f7f\u79fb\u52a8\u5de5\u5177\u4f7f\u5de5\u5177\u4e2d\u5fc3\u70b9\u6cbf\u67d0\u4e00\u65b9 \u5411\u4e0e\u5916\u90e8\u56fa\u5b9a\u70b9\u63a5\u89e6\uff0c\u5e76\u4fdd\u5b58\u6b64\u65f6\u7684\u4f4d\u59ff\uff0c\u4f9d\u6b21\u6cbf 4 \u4e2a\u4e0d\u540c \u65b9\u5411\u83b7\u53d6\u793a\u6559\u70b9\u7684\u4f4d\u59ff\u6570\u636e;"),o.a.createElement("p",null,"3)\u4ee5\u7b2c 4 \u70b9\u7684\u5de5\u5177\u4f4d\u59ff\u4e3a\u57fa\u51c6\uff0c\u4fdd\u6301\u5de5\u5177\u59ff\u6001\u4e0d\u53d8\uff0c\u5c06\u5de5\u5177 \u5750\u6807\u7cfb Z \u8f74\u6b63\u65b9\u5411\u4e0a\u67d0\u4e00\u7279\u5f81\u70b9\u4e0e\u5916\u90e8\u56fa\u5b9a\u70b9\u63a5\u89e6\uff0c\u4fdd\u5b58\u7b2c 5 \u4e2a\u793a\u6559\u70b9\u7684\u4f4d\u59ff;")),UserInput:o.a.createElement("div",{style:{maxWidth:300}},o.a.createElement("p",null,"\u7528\u6237\u8f93\u5165\u6807\u5b9a \u76f4\u63a5\u8f93\u5165\u5de5\u5177\u5750\u6807\u7cfb\u7684\u4f4d\u7f6e\u548c\u59ff\u6001\uff08\u6b27\u62c9\u89d2\uff09\uff0c \u4f9d\u6b21\u8f93\u5165\u5de5\u5177\u5750\u6807\u7cfb\u7684\u4f4d\u7f6e\u548c\u59ff\u6001\uff0c\u7136\u540e\u70b9\u51fb\u4fdd\u5b58"))},fa={UserInput:"\u7528\u6237\u8f93\u5165",CalibT4P:"\u56db\u70b9\u6807\u5b9a\u6cd5",CalibT5P:"\u4e94\u70b9\u6807\u5b9a\u6cd5",CalibT6P:"\u516d\u70b9\u6807\u5b9a\u6cd5"},ba={CalibT4P:4,CalibT5P:5,CalibT6P:6},ga=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={calibMethod:"CalibT4P",toolId:0,toolName:"",pes:[],showCalibResult:!1,showSaveResult:!1,userInput:{x:0,y:0,z:0,a:0,b:0,c:0}},n.handleNameChange=function(e){n.setState({toolName:e.target.value,showCalibResult:!1,showSaveResult:!1})},n.handleSelectToolId=function(e){n.setState({toolId:e,pes:[],showCalibResult:!1,toolName:null,showSaveResult:!1})},n.handleSelectCalibMethod=function(e){n.setState({calibMethod:e,pes:[],showCalibResult:!1,toolName:null,showSaveResult:!1})},n.renderTable=function(e){var t=function(t,n){return n.last?o.a.createElement("span",{className:"".concat(e,"-table-cell ").concat(e,"-table-cell-last")},t):o.a.createElement("span",{className:"".concat(e,"-table-cell")},t)},a=[{title:"\u7f16\u53f7",dataIndex:"rowName",key:"rowName",align:"center"},{title:"X[mm]",dataIndex:"x",key:"xi",render:t,align:"center"},{title:"Y[mm]",dataIndex:"y",key:"yi",render:t,align:"center"},{title:"Z[mm]",dataIndex:"z",key:"zi",render:t,align:"center"},{title:"A",dataIndex:"a",key:"ai",render:t,align:"center"},{title:"B",dataIndex:"b",key:"bi",render:t,align:"center"},{title:"C",dataIndex:"c",key:"ci",render:t,align:"center"}],r=n.props,l=r.endPE,c=(r.cell,[]);n.state.pes.map(function(e,t){c.push({rowName:"\u6807\u5b9a\u70b9".concat(t+1),rowKey:t,key:t,xi:"x".concat(t),yi:"y".concat(t),zi:"z".concat(t),ai:"a".concat(t),bi:"b".concat(t),ci:"c".concat(t),x:e[0].toFixed(3),y:e[1].toFixed(3),z:e[2].toFixed(3),a:e[3].toFixed(3),b:e[4].toFixed(3),c:e[5].toFixed(3)})}),l&&n.state.pes.length<ba[n.state.calibMethod]&&c.push({rowName:"\u6807\u5b9a\u70b9".concat(c.length+1),rowKey:"last",key:"last".concat(c.length+1),xi:"xlast",yi:"ylast",zi:"zlast",ai:"alast",bi:"blast",ci:"clast",x:l[0].toFixed(3),y:l[1].toFixed(3),z:l[2].toFixed(3),a:l[3].toFixed(3),b:l[4].toFixed(3),c:l[5].toFixed(3),last:!0});var s=Object(m.a)(n),i=o.a.createElement("div",{className:"".concat(e,"-table-footer")},s.state.pes.length>0&&o.a.createElement(Lt.a,{type:"danger",onClick:function(){s.setState({showCalibResult:!1,showSaveResult:!1,pes:[]})}},"\u6e05\u7a7a\u6570\u636e"),!!(l&&s.state.pes.length<ba[n.state.calibMethod])&&o.a.createElement(Lt.a,{type:"primary",onClick:function(){var e=s.props.endPE;s.setState({pes:[].concat(Object(b.a)(s.state.pes),[e])})}},"\u63d2\u5165\u6570\u636e"),s.state.pes.length===ba[n.state.calibMethod]&&o.a.createElement(Lt.a,{type:"primary",onClick:function(){var e=s.state,t=e.pes,n=e.calibMethod,a=s.props,r=a.cell;(0,a.deleteResultByChannel)(r.i),s.setState({showCalibResult:!0,showSaveResult:!1}),s.sendCmd("".concat(n," --pose={").concat(t.join(",").replace(/ /g,","),"}"))}},"\u5f00\u59cb\u6807\u5b9a"));return o.a.createElement(ia.a,{className:"".concat(e,"-table"),dataSource:c,columns:a,size:"small",locale:{emptyText:"endPE\u6570\u636e\u8f7d\u5165\u4e2d..."},bordered:!0,pagination:!1,footer:function(){return i}})},n.getUserInputUpdateFn=function(e){var t=Object(m.a)(n);return function(n){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ua(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ua(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t.state.userInput);a[e]=n,t.setState({userInput:a})}},n.getCellRenderer=function(e){var t=Object(m.a)(n);return function(n,a){return o.a.createElement(Un.a,{step:.001,size:"small",value:a[e],onChange:t.getUserInputUpdateFn(e)})}},n.renderUserInput=function(e){var t=n.state.userInput,a=[{title:"X[mm]",dataIndex:"x",key:"xi",align:"center",render:n.getCellRenderer("x")},{title:"Y[mm]",dataIndex:"y",key:"yi",align:"center",render:n.getCellRenderer("y")},{title:"Z[mm]",dataIndex:"z",key:"zi",align:"center",render:n.getCellRenderer("z")},{title:"A",dataIndex:"a",key:"ai",align:"center",render:n.getCellRenderer("a")},{title:"B",dataIndex:"b",key:"bi",align:"center",render:n.getCellRenderer("b")},{title:"C",dataIndex:"c",key:"ci",align:"center",render:n.getCellRenderer("c")}],r=[{xi:"xlast",yi:"ylast",zi:"zlast",ai:"alast",bi:"blast",ci:"clast",rowKey:"result",x:t.x,y:t.y,z:t.z,a:t.a,b:t.b,c:t.c,last:!0}],l=Object(m.a)(n),c=o.a.createElement("div",{className:"".concat(e,"-table-footer")},o.a.createElement(Lt.a,{type:"primary",onClick:function(){var e=l.state,t=e.toolId,n=e.toolName,a=e.userInput;n=n||"Tool".concat(t);var r=l.props,o=r.cell,c=r.deleteResultByChannel;l.setState({showSaveResult:!0}),c(o.i);var s=[a.x,a.y,a.z,a.a,a.b,a.c];l.sendCmd("SetTF --tool_id=".concat(t," --tool_name=").concat(n," --tool_pe={").concat(s.join(",").replace(/ /g,","),"}"),o.i)}},"\u4fdd\u5b58"));return o.a.createElement("div",{className:"".concat(e,"-calib-userinput")},o.a.createElement(ia.a,{className:"".concat(e,"-table"),dataSource:r,columns:a,size:"small",locale:{emptyText:"\u6807\u5b9a\u7ed3\u679c\u8f7d\u5165\u4e2d..."},bordered:!0,pagination:!1,footer:function(){return c}}))},n.renderResult=function(e){var t=n.state.showCalibResult,a=n.props,r=a.result;a.cell;if(!t||!r)return null;if(0!==r.return_code||!r.tool_pe)return o.a.createElement("div",{className:"".concat(e,"-calib-result error")},o.a.createElement("div",null,"\u6807\u5b9a\u9519\u8bef"),o.a.createElement("div",{className:"error"},"\u4ee3\u7801:",r.return_code),o.a.createElement("div",{className:"error"},"\u9519\u8bef:",r.return_message));var l=[{xi:"xlast",yi:"ylast",zi:"zlast",ai:"alast",bi:"blast",ci:"clast",rowKey:"result",x:r.tool_pe[0].toFixed(3),y:r.tool_pe[1].toFixed(3),z:r.tool_pe[2].toFixed(3),a:r.tool_pe[3].toFixed(3),b:r.tool_pe[4].toFixed(3),c:r.tool_pe[5].toFixed(3),last:!0}],c=Object(m.a)(n),s=o.a.createElement("div",{className:"".concat(e,"-table-footer")},o.a.createElement(Lt.a,{type:"primary",onClick:function(){var e=c.state,t=e.toolId,n=e.toolName,a=r.tool_pe.map(function(e){return e});n=n||"Tool".concat(t);var o=c.props,l=o.cell,s=o.deleteResultByChannel;c.setState({showCalibResult:!1,showSaveResult:!0}),s(l.i),c.sendCmd("SetTF --tool_id=".concat(t," --tool_name=").concat(n," --tool_pe={").concat(a.join(",").replace(/ /g,","),"}"),l.i)}},"\u4fdd\u5b58"));return o.a.createElement("div",{className:"".concat(e,"-calib-result")},o.a.createElement("div",null,"\u6807\u5b9a\u7ed3\u679c"),o.a.createElement(ia.a,{className:"".concat(e,"-table"),dataSource:l,columns:[{title:"X[mm]",dataIndex:"x",key:"xi",align:"center"},{title:"Y[mm]",dataIndex:"y",key:"yi",align:"center"},{title:"Z[mm]",dataIndex:"z",key:"zi",align:"center"},{title:"A",dataIndex:"a",key:"ai",align:"center"},{title:"B",dataIndex:"b",key:"bi",align:"center"},{title:"C",dataIndex:"c",key:"ci",align:"center"}],size:"small",locale:{emptyText:"\u6807\u5b9a\u7ed3\u679c\u8f7d\u5165\u4e2d..."},bordered:!0,pagination:!1,footer:function(){return s}}),o.a.createElement("div",{className:"".concat(e,"-calib-result-message")},r.CalibrationInfo))},n.renderSaveResult=function(e){var t=n.state.showSaveResult,a=n.props,r=a.result;a.cell;return t&&r?0!==r.return_code?o.a.createElement("div",{className:"".concat(e,"-save-result error")},o.a.createElement("div",null,"\u4fdd\u5b58\u51fa\u9519"),o.a.createElement("div",{className:"error"},"\u4ee3\u7801:",r.return_code),!!r.CalibrationInfo&&o.a.createElement("div",{className:"error"},"\u9519\u8bef:",r.CalibrationInfo),!!r.return_message&&o.a.createElement("div",{className:"error"},"\u9519\u8bef:",r.return_message)):o.a.createElement("div",{className:"".concat(e,"-save-result success")},o.a.createElement("div",null,"\u4fdd\u5b58\u6210\u529f"),!!r.CalibrationInfo&&o.a.createElement("div",{className:"".concat(e,"-save-result-message success")},r.CalibrationInfo),!!r.return_message&&o.a.createElement("div",{className:"success"},r.return_message)):null},n.renderContent=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=(a.cell,a.toolIds),c=t("calib-tool",r),s=Object(m.a)(n);return o.a.createElement("div",{className:"".concat(c)},o.a.createElement(kt.a,null,o.a.createElement(An.a,{lg:10,className:"".concat(c,"-user-input-container")},o.a.createElement("div",null,o.a.createElement("span",null,"\u6807\u5b9a\u65b9\u6cd5"),o.a.createElement(Dn.a,{size:"small",placeholder:"\u9009\u62e9\u6807\u5b9a\u65b9\u6cd5",onChange:n.handleSelectCalibMethod,value:n.state.calibMethod},Object.keys(fa).map(function(e){return o.a.createElement(da,{value:e,key:e},fa[e])})),o.a.createElement(ca.a,{placement:"bottom",title:o.a.createElement("span",null,fa[n.state.calibMethod]),content:ma[n.state.calibMethod],trigger:"click"},o.a.createElement(w.a,{type:"question"}))),o.a.createElement("div",null,o.a.createElement("span",null,"\u5de5\u5177\u53f7"),o.a.createElement(Dn.a,{size:"small",placeholder:"\u9009\u62e9\u5de5\u5177\u53f7",onChange:n.handleSelectToolId,value:n.state.toolId},l.map(function(e){return o.a.createElement(da,{value:e,key:e},"\u5de5\u5177",e)}))),o.a.createElement("div",null,o.a.createElement("span",null,"\u540d\u79f0"),o.a.createElement(En.a,{value:n.state.toolName,size:"small",placeholder:"Tool".concat(n.state.toolId),onChange:n.handleNameChange}),!!n.state.toolName&&o.a.createElement(Lt.a,{size:"small",type:"primary",style:{marginLeft:5},onClick:function(){s.setState({pes:[],showCalibResult:!1});var e=s.state,t=e.toolName,n=e.toolId;s.sendCmd("RenameT --tool_id=".concat(n," --tool_name=").concat(t))}},"\u4fee\u6539"))),o.a.createElement(An.a,{lg:14,className:"".concat(c,"-hints-container")},pa[n.state.calibMethod])),"UserInput"===n.state.calibMethod&&o.a.createElement(kt.a,null,n.renderUserInput(c)),"UserInput"!==n.state.calibMethod&&o.a.createElement(kt.a,null,n.renderTable(c)),"UserInput"!==n.state.calibMethod&&o.a.createElement(kt.a,null,n.renderResult(c)),o.a.createElement(kt.a,null,n.renderSaveResult(c)))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderContent)}}]),t}(Vt);ga.propTypes={endPE:Tt.a.array,result:Tt.a.object,toolIds:Tt.a.array};var ha=Object(Ue.a)(at,Ye,pt,function(e,t,n){return{endPE:e,result:t,toolIds:n}});var Oa=Object(s.b)(function(e,t){return ha(e,t)},{deleteResultByChannel:se})(ga);Oa.NAME="\u5de5\u5177\u5750\u6807\u7cfb\u6807\u5b9a";var va=Oa,Ea=Dn.a.Option,ya=Mn.a.Group,Ca=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).calibMethods={CalibZF:"\u65e0\u8d1f\u8f7d\u9996\u6b21\u6807\u5b9a",CalibZO:"\u5de5\u5177\u8d1f\u8f7d\u96f6\u4f4d\u504f\u79fb\u91cf\u6807\u5b9a",CalibZL:"\u5916\u90e8\u8d1f\u8f7d\u7684\u96f6\u70b9\u6807\u5b9a"},n.state={calibMethod:"CalibZF",toolId:0,toolName:"",pes:[],showCalibResult:!1},n.handleSelectToolId=function(e){n.setState({toolId:e,pes:[],showCalibResult:!1})},n.handleSelectCalibMethod=function(e){n.setState({calibMethod:e.target.value,showCalibResult:!1})},n.renderContent=function(e){var t=e.getPrefixCls,a=Object(m.a)(n),r=a.props,l=r.prefixCls,c=r.cell,s=r.toolIds,i=r.deleteResultByChannel,u=a.state,d=u.toolId,p=u.calibMethod,f=t("zero-calib",l);return o.a.createElement("div",{className:"".concat(f)},o.a.createElement(kt.a,null,o.a.createElement(An.a,null,o.a.createElement(ya,{onChange:n.handleSelectCalibMethod,value:p,className:"".concat(f,"-options")},Object.keys(a.calibMethods).map(function(e){return o.a.createElement(Mn.a,{key:e,value:e},a.calibMethods[e])})))),"CalibZF"!==p&&o.a.createElement(kt.a,null,o.a.createElement(An.a,{className:"".concat(f,"-select")},o.a.createElement(Dn.a,{size:"small",placeholder:"\u9009\u62e9\u5de5\u5177",onChange:a.handleSelectToolId,value:d},s.map(function(e){return o.a.createElement(Ea,{value:e,key:e},"\u5de5\u5177",e)})),o.a.createElement("span",null,"tool_",d))),o.a.createElement(kt.a,null,o.a.createElement(An.a,{className:"".concat(f,"-buttons")},[0,1,2].map(function(e){return o.a.createElement(kt.a,{key:e},o.a.createElement(Lt.a,{type:"primary",onClick:function(){i(c.i),a.setState({showCalibResult:!0}),"CalibZF"===p?a.sendCmd("".concat(p," --axis_id=").concat(2*e),c.i):a.sendCmd("".concat(p," --axis_id=").concat(2*e," --tool_id=").concat(d),c.i)},onMouseDown:function(){i(c.i),a.setState({showCalibResult:!0}),"CalibZF"===p?a.getOnMouseDownFn("".concat(p," --axis_id=").concat(2*e),c.i)():a.getOnMouseDownFn("".concat(p," --axis_id=").concat(2*e," --tool_id=").concat(d),c.i)()},onMouseUp:function(){a.getOnMouseUpFn()()},onMouseOut:function(){a.getOnMouseUpFn()()}},"\u6821\u6b63A",2*e+1),o.a.createElement(Lt.a,{type:"primary",onClick:function(){i(c.i),a.setState({showCalibResult:!0}),"CalibZF"===p?a.sendCmd("".concat(p," --axis_id=").concat(2*e+1),c.i):a.sendCmd("".concat(p," --axis_id=").concat(2*e+1," --tool_id=").concat(d),c.i)},onMouseDown:function(){i(c.i),a.setState({showCalibResult:!0}),"CalibZF"===p?a.getOnMouseDownFn("".concat(p," --axis_id=").concat(2*e+1),c.i)():a.getOnMouseDownFn("".concat(p," --axis_id=").concat(2*e+1," --tool_id=").concat(d),c.i)()},onMouseUp:function(){a.getOnMouseUpFn()()},onMouseOut:function(){a.getOnMouseUpFn()()}},"\u6821\u6b63A",2*e+2))}))),o.a.createElement(kt.a,null,n.renderResult(f)))},n.renderResult=function(e){var t=n.state.showCalibResult,a=n.props.result;if(!t||!a)return null;var r=["cmd_response_time","id"];return 0!==a.return_code?o.a.createElement("div",{className:"".concat(e,"-calib-result error")},o.a.createElement("div",null,"\u6807\u5b9a\u9519\u8bef"),Object.keys(a).map(function(e){return!!a[e]&&-1===r.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,a[e]))})):o.a.createElement("div",{className:"".concat(e,"-calib-result success")},o.a.createElement("div",null,"\u6807\u5b9a\u6210\u529f"),Object.keys(a).map(function(e){return!!a[e]&&-1===r.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,a[e]))}))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderContent)}}]),t}(Vt);Ca.propTypes={toolIds:Tt.a.array.isRequired,result:Tt.a.object};var Pa=Object(Ue.a)(pt,Ye,function(e,t){return{toolIds:e,result:t}});var Fa=Object(s.b)(function(e,t){return Pa(e,t)},{deleteResultByChannel:se})(Ca);Fa.NAME="\u96f6\u70b9\u6807\u5b9a";var Ra=Fa,ja=(En.a.Search,function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).name="\u6574\u673a\u52a8\u529b\u5b66\u6807\u5b9a",n.state={motionPos:[0,0,0,0,0,0,0,0,0,0,0,0],showCalibResult:!1,showSaveResult:!1},n.handleInsert=function(e,t){var a=Object(b.a)(n.state.motionPos);a[e]=Math.floor(t/Math.PI*180),n.setState({motionPos:a,showCalibResult:!1,showSaveResult:!1})},n.renderContent=function(e){var t=e.getPrefixCls,a=Object(m.a)(n),r=a.props,l=r.prefixCls,c=r.cell,s=r.deleteResultByChannel,i=r.currentMotionPos,u=a.state.motionPos,d=t("motion-and-load-calib",l);return i?o.a.createElement("div",{className:"".concat(d)},[0,1,2,3,4,5].map(function(e){return o.a.createElement(kt.a,{key:e,className:"".concat(d,"-buttons")},o.a.createElement("div",null,o.a.createElement("span",null," A",e+1,"+ "),o.a.createElement(Un.a,{step:1,min:-360,max:360,size:"small",value:u[2*e],onChange:function(t){var a=Object(b.a)(n.state.motionPos);a[2*e]=t,n.setState({motionPos:a,showCalibResult:!1,showSaveResult:!1})}}),o.a.createElement(Lt.a,{size:"small",type:"primary",onClick:function(){n.handleInsert(2*e,i[e])}},"\u63d2\u5165")),o.a.createElement("div",null,o.a.createElement("span",null," A",e+1,"- "),o.a.createElement(Un.a,{step:1,min:-360,max:360,size:"small",value:u[2*e+1],onChange:function(t){var a=Object(b.a)(n.state.motionPos);a[2*e+1]=t,n.setState({motionPos:a,showCalibResult:!1,showSaveResult:!1})}}),o.a.createElement(Lt.a,{size:"small",type:"primary",onClick:function(){n.handleInsert(2*e+1,i[e])}},"\u63d2\u5165")))}),o.a.createElement(kt.a,{className:"".concat(d,"-calib-button")},o.a.createElement(Lt.a,{type:"primary",onClick:function(){a.setState({showCalibResult:!0,showSaveResult:!1}),s(c.i);var e=a.state.motionPos,t=a.props.currentMotionVelPercent;a.sendCmd("JointDyna --A1P=".concat(e[0]/180*Math.PI," --A1N=").concat(e[1]/180*Math.PI," --A2P=").concat(e[2]/180*Math.PI," --A2N=").concat(e[3]/180*Math.PI," --A3P=").concat(e[4]/180*Math.PI," --A3N=").concat(e[5]/180*Math.PI," --A4P=").concat(e[6]/180*Math.PI," --A4N=").concat(e[7]/180*Math.PI," --A5P=").concat(e[8]/180*Math.PI," --A5N=").concat(e[9]/180*Math.PI," --A6P=").concat(e[10]/180*Math.PI," --A6N=").concat(e[11]/180*Math.PI," --VEL=").concat(t))}},"\u5f00\u59cb\u6807\u5b9a")),o.a.createElement(kt.a,null,n.renderResult(d)),o.a.createElement(kt.a,null,n.renderSaveResult(d))):o.a.createElement("div",{className:"".concat(d," loading")},"motion pos \u8f7d\u5165\u4e2d...")},n.renderSaveResult=function(e){var t=n.state.showSaveResult,a=n.props.result;if(!t||!a)return null;var r=["cmd_response_time","id"];return 0!==a.return_code?o.a.createElement("div",{className:"".concat(e,"-calib-result error")},o.a.createElement("div",null,"\u4fdd\u5b58\u9519\u8bef"),Object.keys(a).map(function(e){return!!a[e]&&-1===r.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,a[e]))})):o.a.createElement("div",{className:"".concat(e,"-calib-result success")},o.a.createElement("div",null,"\u4fdd\u5b58\u6210\u529f"),Object.keys(a).map(function(e){return!!a[e]&&-1===r.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,a[e]))}))},n.renderResult=function(e){var t=n.state.showCalibResult,a=n.props,r=a.result,l=a.deleteResultByChannel,c=a.cell,s=Object(m.a)(n);if(!t||!r)return null;var i=["cmd_response_time","id"];return 0===r.return_code&&r.link_param?o.a.createElement("div",{className:"".concat(e,"-calib-result success")},o.a.createElement("div",null,"\u6807\u5b9a\u6210\u529f"),Object.keys(r).map(function(e){return!!r[e]&&-1===i.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,r[e]))}),o.a.createElement(Lt.a,{type:"primary",onClick:function(){s.setState({showCalibResult:!1,showSaveResult:!0}),l(c.i);var e="JointDynaSave";r.link_param.forEach(function(t,n){e+=" --P".concat(n+1,"=").concat(t)}),s.sendCmd(e,c.i)}},"\u4fdd\u5b58")):o.a.createElement("div",{className:"".concat(e,"-calib-result error")},o.a.createElement("div",null,"\u6807\u5b9a\u9519\u8bef"),Object.keys(r).map(function(e){return!!r[e]&&-1===i.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,r[e]))}))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderContent)}}]),t}(Vt));ja.propTypes={toolIds:Tt.a.array.isRequired,result:Tt.a.object};var Sa=Object(Ue.a)(pt,Ye,ot,gt,function(e,t,n,a){return{toolIds:e,result:t,currentMotionPos:n,currentMotionVelPercent:a}});var wa=Object(s.b)(function(e,t){return Sa(e,t)},{deleteResultByChannel:se})(ja);wa.NAME="\u6574\u673a\u52a8\u529b\u5b66\u6807\u5b9a";var _a=wa,xa=(En.a.Search,Mn.a.Group),Na=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).name="\u672b\u7aef\u8d1f\u8f7d\u6807",n.state={motionPos:[0,0,0,0,0,0],input:[0,0,0,0,0,0,0,0,0,0],method:"input",showLoadedCalibResult:!1,showLoadedSaveResult:!1,showUnloadedCalibResult:!1,showUnloadedSaveResult:!1,showInputSaveResult:!1},n.inputLabels=["mass","cogx","cogy","cogz","ixx","iyy","izz","ixy","iyz","ixz"],n.updateInput=function(e,t){var a=Object(b.a)(n.state.input);a[e]=t,n.setState({input:a,showLoadedCalibResult:!1,showLoadedSaveResult:!1,showUnloadedCalibResult:!1,showUnloadedSaveResult:!1,showInputSaveResult:!1})},n.updateMotionPos=function(e,t){var a=Object(b.a)(n.state.motionPos);a[e]=t,n.setState({motionPos:a,showLoadedCalibResult:!1,showLoadedSaveResult:!1,showUnloadedCalibResult:!1,showUnloadedSaveResult:!1,showInputSaveResult:!1})},n.handleInsert=function(e,t){var a=Object(b.a)(n.state.motionPos);a[e]=Math.floor(t/Math.PI*180),n.setState({motionPos:a,showLoadedCalibResult:!1,showLoadedSaveResult:!1,showUnloadedCalibResult:!1,showUnloadedSaveResult:!1,showInputSaveResult:!1})},n.handleSelectInputMethod=function(e){n.setState({method:e.target.value,showLoadedCalibResult:!1,showLoadedSaveResult:!1,showUnloadedCalibResult:!1,showUnloadedSaveResult:!1,showInputSaveResult:!1})},n.renderInput=function(e){var t=n.state,a=t.input,l=t.showInputSaveResult,c=Object(m.a)(n),s=c.props,i=s.deleteResultByChannel,u=s.cell;return o.a.createElement(r.Fragment,null,[0,1,2,3,4].map(function(t,r){return o.a.createElement(kt.a,{key:t,className:"".concat(e,"-input")},o.a.createElement("div",null,o.a.createElement("span",null," ",n.inputLabels[2*t]," "),o.a.createElement(Un.a,{step:1,min:-360,max:360,value:a[2*t],size:"small",onChange:function(e){c.updateInput(2*t,e)}})),o.a.createElement("div",null,o.a.createElement("span",null," ",n.inputLabels[2*t+1]," "),o.a.createElement(Un.a,{step:1,min:-360,max:360,value:a[2*t+1],size:"small",onChange:function(e){c.updateInput(2*t+1,e)}})))}),o.a.createElement(kt.a,{className:"".concat(e,"-calib-button")},o.a.createElement(Lt.a,{type:"primary",onClick:function(){c.setState({showLoadedCalibResult:!1,showLoadedSaveResult:!1,showUnloadedCalibResult:!1,showUnloadedSaveResult:!1,showInputSaveResult:!0}),i(u.i);var e="LoadDynaSave1";a.forEach(function(t,n){e+=" --P".concat(n+1,"=").concat(t/180*Math.PI)}),c.sendCmd(e,u.i)}},"\u4fdd\u5b58")),l&&n.renderSaveResult(e))},n.renderContent=function(e){var t=e.getPrefixCls,a=Object(m.a)(n),r=a.props,l=r.prefixCls,c=r.cell,s=r.deleteResultByChannel,i=r.currentMotionPos,u=a.state,d=u.motionPos,p=u.method,f=t("motion-and-load-calib",l);return i?o.a.createElement("div",{className:"".concat(f)},o.a.createElement(kt.a,null,o.a.createElement(An.a,null,o.a.createElement(xa,{onChange:n.handleSelectInputMethod,value:p,className:"".concat(f,"-options")},o.a.createElement(Mn.a,{key:"calib",value:"calib"},"\u6807\u5b9a"),o.a.createElement(Mn.a,{key:"input",value:"input"},"\u8f93\u5165")))),"input"===p&&n.renderInput(f),"calib"===p&&o.a.createElement(kt.a,{className:"".concat(f,"-title")},"\u8f93\u5165\u5173\u8282\u5141\u8fd0\u52a8\u8303\u56f4"),"calib"===p&&[3,5,6].map(function(e,t){return o.a.createElement(kt.a,{key:e,className:"".concat(f,"-buttons")},o.a.createElement("div",null,o.a.createElement("span",null," A",e,"+ "),o.a.createElement(Un.a,{step:1,min:-360,max:360,size:"small",value:d[2*t],onChange:function(e){n.updateMotionPos(2*t,e)}}),o.a.createElement(Lt.a,{size:"small",type:"primary",onClick:function(){n.handleInsert(2*t,i[e-1])}},"\u63d2\u5165")),o.a.createElement("div",null,o.a.createElement("span",null," A",e,"- "),o.a.createElement(Un.a,{step:1,min:-360,max:360,size:"small",value:d[2*t+1],onChange:function(e){n.updateMotionPos(2*t+1,e)}}),o.a.createElement(Lt.a,{size:"small",type:"primary",onClick:function(){n.handleInsert(2*t+1,i[e-1])}},"\u63d2\u5165")))}),"calib"===p&&o.a.createElement(kt.a,{className:"".concat(f,"-calib-boxes")},o.a.createElement(An.a,null,o.a.createElement(Lt.a,{type:"primary",onClick:function(){a.setState({showLoadedCalibResult:!1,showLoadedSaveResult:!1,showUnloadedCalibResult:!0,showUnloadedSaveResult:!1,showInputSaveResult:!1}),s(c.i);var e=a.state.motionPos,t=a.props.currentMotionVelPercent;a.sendCmd("LoadDyna --A3P=".concat(e[0]/180*Math.PI," --A3N=").concat(e[1]/180*Math.PI," --A5P=").concat(e[2]/180*Math.PI," --A5N=").concat(e[3]/180*Math.PI," --A6P=").concat(e[4]/180*Math.PI," --A6N=").concat(e[5]/180*Math.PI," --VEL=").concat(t," --TYPE=1"))}},"\u65e0\u8d1f\u8f7d\u6807\u5b9a"),a.state.showUnloadedCalibResult&&a.renderResult(f,"LoadDynaSave0",{showLoadedCalibResult:!1,showLoadedSaveResult:!1,showUnloadedCalibResult:!1,showUnloadedSaveResult:!0,showInputSaveResult:!1}),a.state.showUnloadedSaveResult&&a.renderSaveResult(f)),o.a.createElement(An.a,null,o.a.createElement(Lt.a,{type:"primary",onClick:function(){a.setState({showLoadedCalibResult:!0,showLoadedSaveResult:!1,showUnloadedCalibResult:!1,showUnloadedSaveResult:!1,showInputSaveResult:!1}),s(c.i);var e=a.state.motionPos,t=a.props.currentMotionVelPercent;a.sendCmd("LoadDyna --A3P=".concat(e[0]/180*Math.PI," --A3N=").concat(e[1]/180*Math.PI," --A5P=").concat(e[2]/180*Math.PI," --A5N=").concat(e[3]/180*Math.PI," --A6P=").concat(e[4]/180*Math.PI," --A6N=").concat(e[5]/180*Math.PI," --VEL=").concat(t," --TYPE=-1"))}},"\u8d1f\u8f7d\u6807\u5b9a"),a.state.showLoadedCalibResult&&a.renderResult(f,"LoadDynaSave1",{showLoadedCalibResult:!1,showLoadedSaveResult:!0,showUnloadedCalibResult:!1,showUnloadedSaveResult:!1,showInputSaveResult:!1}),a.state.showLoadedSaveResult&&a.renderSaveResult(f)))):o.a.createElement("div",{className:"".concat(f," loading")},"motion pos \u8f7d\u5165\u4e2d...")},n.renderSaveResult=function(e){var t=n.props.result;if(!t)return null;var a=["cmd_response_time","id"];return 0!==t.return_code?o.a.createElement("div",{className:"".concat(e,"-box-result error")},o.a.createElement("div",null,"\u4fdd\u5b58\u9519\u8bef"),Object.keys(t).map(function(e){return!!t[e]&&-1===a.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,t[e]))}),o.a.createElement("div",null)):o.a.createElement("div",{className:"".concat(e,"-box-result success")},o.a.createElement("div",null,"\u4fdd\u5b58\u6210\u529f"),Object.keys(t).map(function(e){return!!t[e]&&-1===a.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,t[e]))}),o.a.createElement("div",null))},n.renderResult=function(e,t,a){var r=Object(m.a)(n),l=["cmd_response_time","id"],c=r.props,s=c.result,i=c.cell,u=c.deleteResultByChannel;return s?0===s.return_code&&s.link_param?o.a.createElement("div",{className:"".concat(e,"-box-result success")},o.a.createElement("div",null,"\u6807\u5b9a\u6210\u529f"),Object.keys(s).map(function(e){return!!s[e]&&-1===l.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,s[e]))}),o.a.createElement("div",null,o.a.createElement(Lt.a,{type:"primary",onClick:function(){r.setState(a),u(i.i);var e=t;s.link_param.forEach(function(t,n){e+=" --P".concat(n+1,"=").concat(t)}),r.sendCmd(e,i.i)}},"\u4fdd\u5b58"))):o.a.createElement("div",{className:"".concat(e,"-box-result error")},o.a.createElement("div",null,"\u6807\u5b9a\u9519\u8bef"),Object.keys(s).map(function(e){return!!s[e]&&-1===l.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,s[e]))}),o.a.createElement("div",null)):null},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderContent)}}]),t}(Vt);Na.propTypes={toolIds:Tt.a.array.isRequired,result:Tt.a.object};var Ia=Object(Ue.a)(pt,Ye,ot,gt,function(e,t,n,a){return{toolIds:e,result:t,currentMotionPos:n,currentMotionVelPercent:a}});var Ma=Object(s.b)(function(e,t){return Ia(e,t)},{deleteResultByChannel:se})(Na);Ma.NAME="\u672b\u7aef\u8d1f\u8f7d\u6807\u5b9a";var Ta=Ma,Da=n(556),ka=n.n(Da),Aa=n(557),La=n.n(Aa);function Ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var Ba=Dn.a.Option,Va=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).name="\u6784\u578b\u53c2\u6570\u914d",n.width=24,n.height=12,n.icon=function(e){return o.a.createElement(w.a,e)},n.state={type:"six_axes",inputs:{},showSaveResult:!1},n.handleSelectType=function(e){var t=n.props;(0,t.deleteResultByChannel)(t.cell.i),n.setState({type:e,inputs:{},showSaveResult:!1})},n.updateInput=function(e,t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ua(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ua(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n.state.inputs);a[e]=t,n.setState({inputs:a})},n.renderSixAxesInput=function(e){var t=n.state,a=t.inputs,l=t.showSaveResult,c=Object(m.a)(n),s=c.props,i=s.deleteResultByChannel,u=s.cell;return o.a.createElement(r.Fragment,null,["a1","a2","a3","d1","d3","d4","tool0"].map(function(t,n){return o.a.createElement(kt.a,{key:t,className:"".concat(e,"-input")},o.a.createElement("span",null," ",t," "),o.a.createElement(Un.a,{disabled:l,step:1,value:a[t],size:"small",onChange:function(e){c.updateInput(t,e)}}))}),o.a.createElement(kt.a,{className:"".concat(e,"-save-button")},o.a.createElement(Lt.a,{type:"primary",disabled:l,onClick:function(){c.setState({showSaveResult:!0}),i(u.i);var e=c.state.inputs,t="setdh --six_axes";Object.keys(e).forEach(function(n){t+=" --".concat(n,"_six_axes=").concat(e[n]/1e3)}),c.sendCmd(t,u.i)}},"\u4fdd\u5b58")))},n.renderSevenAxesInput=function(e){var t=n.state,a=t.inputs,l=t.showSaveResult,c=Object(m.a)(n),s=c.props,i=s.deleteResultByChannel,u=s.cell;return o.a.createElement(r.Fragment,null,["d1","d3","d5","tool0"].map(function(t){return o.a.createElement(kt.a,{key:t,className:"".concat(e,"-input")},o.a.createElement("span",null," ",t," "),o.a.createElement(Un.a,{disabled:l,step:1,value:a[t],size:"small",onChange:function(e){c.updateInput(t,e)}}))}),o.a.createElement(kt.a,{className:"".concat(e,"-save-button")},o.a.createElement(Lt.a,{type:"primary",disabled:l,onClick:function(){c.setState({showSaveResult:!0}),i(u.i);var e=c.state.inputs,t="setdh --seven_axes";Object.keys(e).forEach(function(n){t+=" --".concat(n,"_seven_axes=").concat(e[n]/1e3)}),c.sendCmd(t,u.i)}},"\u4fdd\u5b58")))},n.renderContent=function(e){var t=e.getPrefixCls,a=Object(m.a)(n),r=t("setdh",a.props.prefixCls),l=n.state,c=l.type,s=l.showSaveResult;return o.a.createElement("div",{className:"".concat(r)},o.a.createElement(kt.a,null,o.a.createElement(An.a,{span:12},o.a.createElement(kt.a,{className:"".concat(r,"-input")},o.a.createElement(Dn.a,{size:"small",placeholder:"\u9009\u62e9\u5de5\u5177",onChange:a.handleSelectType,value:c},o.a.createElement(Ba,{value:"six_axes",key:"six_axes"},"\u516d\u8f74\u673a\u5668\u4eba"),o.a.createElement(Ba,{value:"seven_axes",key:"seven_axes"},"\u4e03\u8f74\u673a\u5668\u4eba"))),"six_axes"===c&&n.renderSixAxesInput(r),"seven_axes"===c&&n.renderSevenAxesInput(r)),o.a.createElement(An.a,{span:12,className:"".concat(r,"-bg"),style:{backgroundImage:"url(".concat("six_axes"===c?ka.a:La.a,")")}}),o.a.createElement(sn.a,{visible:s,title:"\u4fdd\u5b58",centered:!0,onCancel:function(){a.setState({showSaveResult:!1})},footer:[o.a.createElement(Lt.a,{key:"close",onClick:function(){a.setState({showSaveResult:!1})}},"\u5173\u95ed")]},n.renderResult(r))))},n.renderResult=function(e){var t=n.props,a=t.result,r=(t.deleteResultByChannel,t.cell,["cmd_response_time","id"]);return a?0===a.return_code&&a.link_param?o.a.createElement("div",{className:"".concat(e,"-result success")},o.a.createElement("div",null,"\u6210\u529f"),Object.keys(a).map(function(e){return!!a[e]&&-1===r.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,a[e]))})):o.a.createElement("div",{className:"".concat(e,"-result error")},o.a.createElement("div",null,"\u9519\u8bef"),Object.keys(a).map(function(e){return!!a[e]&&-1===r.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,a[e]))})):o.a.createElement("div",{className:"".concat(e,"-result info")},o.a.createElement("div",null,"\u4fdd\u5b58\u4e2d..."))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderContent)}}]),t}(Vt);Va.propTypes={result:Tt.a.object};var Wa=Object(Ue.a)(Ye,function(e){return{result:e}});var Ja=Object(s.b)(function(e,t){return Wa(e,t)},{deleteResultByChannel:se})(Va);Ja.NAME="\u6784\u578b\u53c2\u6570\u914d\u7f6e";var Xa=Ja,Ga=n(251),za=n.n(Ga),qa=Dn.a.Option,Qa={labelCol:{span:4},wrapperCol:{span:8}},Ha=Nn.a.Item,Za=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault();var t=n.props.createRobotModel;n.props.form.validateFields(function(e,n){e||t(n)})},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,n=(t.prefixCls,t.visible),a=t.creatingRobotModel,r=t.creatingRobotModelError,l=t.hideCreateRobotModelModal;return o.a.createElement(sn.a,{visible:n,title:"\u521b\u5efa\u673a\u5668\u4eba",onOk:this.handleSubmit,okText:"\u521b\u5efa",cancelText:"\u53d6\u6d88",onCancel:function(){l()},centered:!0},o.a.createElement(Nn.a,{onSubmit:this.handleSubmit,className:"login-form"},o.a.createElement(Ha,Object.assign({},Qa,{label:"\u54c1\u724c"}),e("brand",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u673a\u5668\u4eba\u54c1\u724c!"}]})(o.a.createElement(En.a,{placeholder:"Brand"}))),o.a.createElement(Ha,Object.assign({},Qa,{label:"\u578b\u53f7"}),e("model",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u673a\u5668\u4eba\u578b\u53f7!"}]})(o.a.createElement(En.a,{placeholder:"Model"})))),!!a&&o.a.createElement("span",{className:"info"},"\u521b\u5efa\u4e2d..."),!!r&&o.a.createElement("span",{className:"error"},r))}}]),t}(r.Component),Ya=Nn.a.create()(Za),Ka=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).name="\u4e09\u7ef4\u6a21\u578b\u914d\u7f6e",n.state={showCalibResult:!1,showSaveResult:!1,brand:null,model:null,showCreateModal:!1},n.renderContent=function(e){var t=e.getPrefixCls,a=Object(m.a)(n),r=a.props,l=r.prefixCls,c=r.cell,s=r.deleteResultByChannel,i=r.robotModels,u=r.robotModelPartUploadSuccess,d=r.deleteRobotModelPart,p=r.deleteRobotModel,f=r.creatingRobotModel,b=r.creatingRobotModelError,g=(r.creatingRobotModelResult,r.showCreateRobotModelModal),h=r.modalVisible,O=r.createRobotModel,v=r.selectCurrentRobotBrand,E=r.selectCurrentRobotModel,y=r.hideCreateRobotModelModal,C=r.model,P=r.brand,F=(a.state.motionPos,t("model-configuration",l));if(!i)return o.a.createElement("div",{className:"".concat(F," loading")},"\u53c2\u6570\u8f7d\u5165\u4e2d...");P&&i[P]||(P=Object.keys(i)[0]),P&&(C&&i[P][C]||(C=Object.keys(i[P])[0]));var R=[];return P&&C&&(R=Object.keys(i[P][C].parts).filter(function(e){return!i[P][C].parts[e]})),o.a.createElement("div",{className:F},!!i&&C&&P&&o.a.createElement(kt.a,{className:"".concat(F,"-brand"),style:{marginBottom:20}},o.a.createElement("span",null,"\u673a\u5668\u4eba\u54c1\u724c"),o.a.createElement(Dn.a,{size:"small",style:{width:200},placeholder:"\u9009\u62e9\u673a\u5668\u4eba\u54c1\u724c",onChange:function(e){n.setState({saving:!1}),s(c.i),v(e)},value:P},Object.keys(i).map(function(e){return o.a.createElement(qa,{value:e,key:e},e)}))),!!i&&C&&P&&C&&!!i[P]&&o.a.createElement(kt.a,{className:"".concat(F,"-model"),style:{marginBottom:20}},o.a.createElement("span",null,"\u673a\u5668\u4eba\u578b\u53f7"),o.a.createElement(Dn.a,{size:"small",style:{width:200},placeholder:"\u9009\u62e9\u673a\u5668\u4eba\u578b\u53f7",onChange:function(e){n.setState({saving:!1}),s(c.i),E(e)},value:C},Object.keys(i[P]).map(function(e){return o.a.createElement(qa,{value:e,key:e},e)})),o.a.createElement(Lt.a,{style:{marginLeft:10,marginBottom:20},size:"small",onClick:function(){n.setState({saving:!1}),s(c.i),p(P,C)}},"\u5220\u9664")),o.a.createElement(kt.a,{className:"".concat(F,"-model")},o.a.createElement(Lt.a,{size:"small",onClick:function(){n.setState({saving:!1}),s(c.i),g()}},"\u6dfb\u52a0\u673a\u5668\u4eba"),o.a.createElement(Ya,{visible:h,hideCreateRobotModelModal:y,centered:!0,createRobotModel:O,creatingRobotModel:f,creatingRobotModelError:b})),o.a.createElement(kt.a,{className:"".concat(F,"-parts")},!!i&&!!i[P]&&!!i[P][C]&&!!i[P][C].parts&&Object.keys(i[P][C].parts).map(function(e){return i[P][C].parts[e]&&[].push({uid:"-1",name:i[P][C].parts[e],status:"done",url:""}),o.a.createElement(kt.a,{className:"".concat(F,"-part ").concat(n.state.saving&&!i[P][C].parts[e]&&"error"),key:e},o.a.createElement("span",null,"PART ",e,":"),!!i[P][C].parts[e]&&o.a.createElement("span",{className:"".concat(F,"-part-file")},o.a.createElement(w.a,{type:"file-markdown"})," ",i[P][C].parts[e],o.a.createElement(w.a,{type:"close",className:"".concat(F,"-delete"),onClick:function(){d(P,C,e)}})),!i[P][C].parts[e]&&o.a.createElement(za.a,{className:"".concat(F,"-part-upload"),multiple:!1,action:"/api/robots/".concat(P,"/").concat(C,"/parts/").concat(e),showUploadList:!1,onChange:function(e){var t=e.file;e.fileList,e.event;"done"===t.status&&u(t.response)}},o.a.createElement(Lt.a,null,o.a.createElement(w.a,{type:"upload"}),"\u4e0a\u4f20")))})),o.a.createElement(kt.a,{className:"".concat(F,"-save")},o.a.createElement(Lt.a,{size:"large",type:"primary",onClick:function(){if(n.setState({saving:!0}),s(c.i),0===R.length){var e=i[P][C].parts,t=i[P][C].path;n.sendCmd("cs_stop");var a="setppath --file_path="+Object.keys(e).map(function(n){return"".concat(t,"/").concat(e[n])}).join(";");n.sendCmd(a),n.sendCmd("savexml")}}},"\u4fdd\u5b58"),n.state.saving&&R.length>0&&o.a.createElement("p",{className:"error"},"\u8bf7\u4e0a\u4f20\u673a\u5668\u4eba\u6a21\u578b  ",R.join(","))))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.loadRobotModels()}},{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderContent)}}]),t}(Vt);Ka.propTypes={result:Tt.a.object};var $a=Object(Ue.a)(Ye,function(e){return e.robot.robotModels},function(e){return e.robot.creatingRobotModel},function(e){return e.robot.creatingRobotModelError},function(e){return e.robot.creatingRobotModelResult},function(e){return e.robot.createRobotModelModalVisible},function(e){return e.robot.currentRobotBrand},function(e){return e.robot.currentRobotModel},function(e,t,n,a,r,o,l,c){return{robotModels:t,result:e,creatingRobotModel:n,creatingRobotModelError:a,creatingRobotModelResult:r,modalVisible:o,brand:l,model:c}});var er=Object(s.b)(function(e,t){return $a(e,t)},{deleteResultByChannel:se,loadRobotModels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return U(ie,{requiredFields:e})},robotModelPartUploadSuccess:function(e){return U("ROBOT_MODEL_PART_UPLOAD_SUCCESS",{model:e})},deleteRobotModelPart:function(e,t,n){return U(de,{brand:e,model:t,part:n})},deleteRobotModel:function(e,t){return U(me,{brand:e,model:t})},createRobotModel:function(e){return U(be,{model:e})},showCreateRobotModelModal:function(){return U("SHOW_CREATE_ROBOT_MODEL_MODAL")},hideCreateRobotModelModal:function(){return U("HIDE_CREATE_ROBOT_MODEL_MODAL")},selectCurrentRobotBrand:function(e){return U("SELECT_CURRENT_ROBOT_BRAND",{brand:e})},selectCurrentRobotModel:function(e){return U("SELECT_CURRENT_ROBOT_MODEL",{model:e})}})(Ka);er.NAME="\u4e09\u7ef4\u6a21\u578b\u914d\u7f6e";var tr=er,nr=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.filter,n=e.result;return t=t||[],o.a.createElement("div",this.props,Object.keys(n).map(function(e){return!!n[e]&&-1===t.indexOf(e)&&o.a.createElement("div",{key:e},o.a.createElement("span",null,e),":",o.a.createElement("span",null,n[e]))}))}}]),t}(r.Component),ar=function e(){Object(i.a)(this,e),this.toXML=function(){throw"toXML not implemented"},this.toJSON=function(){throw"toJSON not implemented"}};ar.FromXML=function(e){throw"FromXML not implemented"},ar.FromJSON=function(e){throw"FromJSON not implemented"},ar.GetNumber=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{return JSON.parse(e)}catch(n){return t}},ar.GetDegreeNumber=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{return JSON.parse(e)/Math.PI*180}catch(n){return t}},ar.ToRadian=function(e){return e/180*Math.PI},ar.ToXMLAttrString=function(e,t){return t||0===t?"".concat(e,'="').concat(t,'"'):""};var rr=ar,or=function(e){function t(e,n,a,r){var o;return Object(i.a)(this,t),(o=Object(d.a)(this,Object(p.a)(t).call(this))).toXML=function(){return"<PdoEntry ".concat(t.ToXMLAttrString("name",o.name)," ").concat(t.ToXMLAttrString("index",o.index),"  ").concat(t.ToXMLAttrString("subindex",o.subIndex)," ").concat(t.ToXMLAttrString("size",o.size)," />")},o.toJSON=function(){return{name:o.name,index:o.index,subIndex:o.subIndex,size:o.size}},o.name=e,o.index=n,o.subIndex=a,o.size=r,o}return Object(f.a)(t,e),t}(rr);or.FromXML=function(e){return new or(e.getAttribute("name"),e.getAttribute("index"),e.getAttribute("subindex"),e.getAttribute("size"))},or.FromJSON=function(e){var t=e.name,n=e.index,a=e.subIndex,r=e.size;return new or(t,n,a,r)};var lr=or,cr=function(e){function t(e,n,a){var r;return Object(i.a)(this,t),(r=Object(d.a)(this,Object(p.a)(t).call(this))).toXML=function(){return"<Pdo ".concat(t.ToXMLAttrString("name",r.name)," ").concat(t.ToXMLAttrString("index",r.index),">").concat(r.entries?r.entries.map(function(e){return e.toXML()}).join(""):"","</Pdo>")},r.toJSON=function(){return{name:r.name,index:r.index,entries:r.entries&&r.entries.map(function(e){return e.toJSON()})}},r.index=e,r.name=n,r.entries=a,r}return Object(f.a)(t,e),t}(rr);cr.FromXML=function(e){return new cr(e.getAttribute("index"),e.getAttribute("name"),Object(b.a)(e.getElementsByTagName("PdoEntry")).filter(function(e){return 1===e.nodeType}).map(lr.FromXML))},cr.FromJSON=function(e){var t=e.index,n=e.name,a=e.entries;return new cr(t,n,a&&a.map(lr.FromJSON))};var sr=cr,ir=function(e){function t(e,n){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this))).toXML=function(){return"<SyncManager ".concat(t.ToXMLAttrString("is_tx",a.isTx),">").concat(a.pdoes?a.pdoes.map(function(e){return e.toXML()}).join(""):"","</SyncManager>")},a.toJSON=function(){return{isTx:a.isTx,pdoes:a.pdoes&&a.pdoes.map(function(e){return e.toJSON()})}},null==e&&(e="false"),a.isTx=e,console.log(e),a.pdoes=n,a}return Object(f.a)(t,e),t}(rr);ir.FromXML=function(e){return new ir(e.getAttribute("is_tx"),Object(b.a)(e.getElementsByTagName("Pdo")).filter(function(e){return 1===e.nodeType}).map(sr.FromXML))},ir.FromJSON=function(e){var t=e.isTx,n=e.pdoes;return new ir(t,n&&n.map(sr.FromJSON))};var ur=ir,dr=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this))).toXML=function(){return"<SyncManagerPoolObject>".concat(n.syncManagers?n.syncManagers.map(function(e){return e.toXML()}).join(""):"","</SyncManagerPoolObject>")},n.toJSON=function(){return{syncManagers:n.syncManagers&&n.syncManagers.map(function(e){return e.toJSON()})}},n.syncManagers=e,n}return Object(f.a)(t,e),t}(rr);dr.FromXML=function(e){return new dr(Object(b.a)(e.getElementsByTagName("SyncManager")).filter(function(e){return 1===e.nodeType}).map(ur.FromXML))},dr.FromJSON=function(e){var t=e.syncManagers;return new dr(t&&t.map(ur.FromJSON))};var pr=dr,mr=function(e){function t(e,n,a,r,o,l,c,s){var u;Object(i.a)(this,t),(u=Object(d.a)(this,Object(p.a)(t).call(this))).toXML=function(){return"<EthercatSlave ".concat(t.ToXMLAttrString("phy_id",u.phyId)," ").concat(t.ToXMLAttrString("vendor_id",u.vendorId)," ").concat(t.ToXMLAttrString("product_code",u.productCode)," ").concat(t.ToXMLAttrString("sync0_shift_ns",u.sync0ShiftNs)," ").concat(t.ToXMLAttrString("revision_num",u.revisionNum)," ").concat(t.ToXMLAttrString("dc_assign_activate",u.dcAssignActivate),"> ").concat(u.syncManagerPoolObjects?u.syncManagerPoolObjects.map(function(e){return e.toXML()}).join(""):"","</EthercatSlave>")},u.toJSON=function(){return{uuid:u.uuid,isMotion:!1,phyId:u.phyId,vendorId:u.vendorId,productCode:u.productCode,sync0ShiftNs:u.sync0ShiftNs,revisionNum:u.revisionNum,dcAssignActivate:u.dcAssignActivate,syncManagerPoolObjects:u.syncManagerPoolObjects&&u.syncManagerPoolObjects.map(function(e){return e.toJSON()})}},u.uuid=e;try{u.phyId=JSON.parse(n)}catch(m){u.phyId=0}return u.vendorId=a,u.productCode=r,u.sync0ShiftNs=o,u.revisionNum=l,u.dcAssignActivate=c,u.syncManagerPoolObjects=s,u}return Object(f.a)(t,e),t}(rr);mr.FromXML=function(e){return new mr(Math.random().toString(36),e.getAttribute("phy_id"),e.getAttribute("vendor_id"),e.getAttribute("product_code"),e.getAttribute("sync0_shift_ns"),e.getAttribute("revision_num"),e.getAttribute("dc_assign_activate"),Object(b.a)(e.getElementsByTagName("SyncManagerPoolObject")).filter(function(e){return 1===e.nodeType}).map(pr.FromXML))},mr.FromJSON=function(e){var t=e.uuid,n=e.phyId,a=e.vendorId,r=e.productCode,o=e.sync0ShiftNs,l=e.revisionNum,c=e.dcAssignActivate,s=e.syncManagerPoolObjects;return new mr(t||Math.random().toString(36),n,a,r,o,l,c,s&&s.map(pr.FromJSON))};var fr=mr,br=function(e){function t(e,n,a,r,o,l,c,s,u,m,f,b,g,h,O,v,E,y,C){var P;return Object(i.a)(this,t),(P=Object(d.a)(this,Object(p.a)(t).call(this))).toXML=function(){return"<EthercatMotor ".concat(t.ToXMLAttrString("phy_id",P.phyId)," ").concat(t.ToXMLAttrString("vendor_id",P.vendorId)," ").concat(t.ToXMLAttrString("product_code",P.productCode)," ").concat(t.ToXMLAttrString("sync0_shift_ns",P.sync0ShiftNs)," ").concat(t.ToXMLAttrString("revision_num",P.revisionNum)," ").concat(t.ToXMLAttrString("dc_assign_activate",P.dcAssignActivate)," ").concat(t.ToXMLAttrString("max_pos",t.ToRadian(P.maxPos))," ").concat(t.ToXMLAttrString("min_pos",t.ToRadian(P.minPos)),"  ").concat(t.ToXMLAttrString("max_vel",t.ToRadian(P.maxVel))," ").concat(t.ToXMLAttrString("min_vel",t.ToRadian(P.minVel))," ").concat(t.ToXMLAttrString("max_acc",t.ToRadian(P.maxAcc))," ").concat(t.ToXMLAttrString("min_acc",t.ToRadian(P.minAcc))," ").concat(t.ToXMLAttrString("max_pos_following_error",P.maxPosFollowingError)," ").concat(t.ToXMLAttrString("max_vel_following_error",P.maxVelFollowingError)," ").concat(t.ToXMLAttrString("pos_factor",P.posFactor)," ").concat(t.ToXMLAttrString("pos_offset",t.ToRadian(P.posOffset))," ").concat(t.ToXMLAttrString("home_pos",t.ToRadian(P.homePos))," >").concat(P.syncManagerPoolObjects?P.syncManagerPoolObjects.map(function(e){return e.toXML()}).join(""):"","</EthercatMotor>")},P.toJSON=function(){return{uuid:P.uuid,isMotion:!0,phyId:P.phyId,vendorId:P.vendorId,productCode:P.productCode,sync0ShiftNs:P.sync0ShiftNs,revisionNum:P.revisionNum,dcAssignActivate:P.dcAssignActivate,maxPos:P.maxPos,minPos:P.minPos,maxVel:P.maxVel,minVel:P.minVel,maxAcc:P.maxAcc,minAcc:P.minAcc,maxPosFollowingError:P.maxPosFollowingError,maxVelFollowingError:P.maxVelFollowingError,posFactor:P.posFactor,posOffset:P.posOffset,homePos:P.homePos,syncManagerPoolObjects:P.syncManagerPoolObjects&&P.syncManagerPoolObjects.map(function(e){return e.toJSON()})}},P.uuid=e,console.log(o),console.log(n),P.phyId=n,P.vendorId=a,P.productCode=r,P.sync0ShiftNs=o,P.revisionNum=l,P.dcAssignActivate=c,P.maxPos=s,P.minPos=u,P.maxVel=m,P.minVel=f,P.maxAcc=b,P.minAcc=g,P.maxPosFollowingError=h,P.maxVelFollowingError=O,P.posFactor=v,P.posOffset=E,P.homePos=y,P.syncManagerPoolObjects=C,P}return Object(f.a)(t,e),t}(rr);br.FromXML=function(e){var t=br.GetNumber(e.getAttribute("phy_id")),n=e.getAttribute("vendor_id"),a=e.getAttribute("product_code"),r=e.getAttribute("revision_num"),o=e.getAttribute("sync0_shift_ns"),l=e.getAttribute("dc_assign_activate"),c=br.GetDegreeNumber(e.getAttribute("max_pos")),s=br.GetDegreeNumber(e.getAttribute("min_pos")),i=br.GetDegreeNumber(e.getAttribute("max_vel")),u=br.GetDegreeNumber(e.getAttribute("min_vel")),d=br.GetDegreeNumber(e.getAttribute("max_acc")),p=br.GetDegreeNumber(e.getAttribute("min_acc")),m=br.GetNumber(e.getAttribute("max_pos_following_error")),f=br.GetNumber(e.getAttribute("max_vel_following_error")),g=br.GetNumber(e.getAttribute("pos_factor")),h=br.GetDegreeNumber(e.getAttribute("pos_offset")),O=br.GetDegreeNumber(e.getAttribute("home_pos"));return new br(Math.random().toString(36),t,n,a,o,r,l,c,s,i,u,d,p,m,f,g,h,O,Object(b.a)(e.getElementsByTagName("SyncManagerPoolObject")).filter(function(e){return 1===e.nodeType}).map(pr.FromXML))},br.FromJSON=function(e){var t=e.uuid,n=e.phyId,a=e.vendorId,r=e.productCode,o=e.sync0ShiftNs,l=e.revisionNum,c=e.dcAssignActivate,s=e.maxPos,i=e.minPos,u=e.maxVel,d=e.minVel,p=e.maxAcc,m=e.minAcc,f=e.maxPosFollowingError,b=e.maxVelFollowingError,g=e.posFactor,h=e.posOffset,O=e.homePos,v=e.syncManagerPoolObjects;return new br(t||Math.random().toString(36),n,a,r,o,l,c,s,i,u,d,p,m,f,b,g,h,O,v&&v.map(pr.FromJSON))};var gr=br,hr=function(e){function t(e,n,a){var r;return Object(i.a)(this,t),(r=Object(d.a)(this,Object(p.a)(t).call(this))).toXML=function(){return"<SlavePoolObject ".concat(t.ToXMLAttrString("name",r.name),">").concat(r.slaves?r.slaves.map(function(e){return e.toXML()}).join(""):"").concat(r.motions?r.motions.map(function(e){return e.toXML()}).join(""):"","</SlavePoolObject>")},r.toJSON=function(){return{name:r.name,slaves:r.slaves&&r.slaves.map(function(e){return e.toJSON()}),motions:r.motions&&r.motions.map(function(e){return e.toJSON()})}},r.name=e,r.slaves=n,r.motions=a,r}return Object(f.a)(t,e),t}(rr);hr.FromXML=function(e){return new hr(e.getAttribute("name"),Object(b.a)(e.getElementsByTagName("EthercatSlave")).filter(function(e){return 1===e.nodeType}).map(fr.FromXML),Object(b.a)(e.getElementsByTagName("EthercatMotor")).filter(function(e){return 1===e.nodeType}).map(gr.FromXML))},hr.FromJSON=function(e){var t=e.name,n=e.slaves,a=e.motions;return new hr(t,n&&n.map(fr.FromJSON),a&&a.map(gr.FromJSON))};var Or=hr,vr=function(e){function t(e,n){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this))).toXML=function(){return'<EthercatController sample_period_ns="1000000" '.concat(t.ToXMLAttrString("name",a.name),">").concat(a.slavePoolObjects?a.slavePoolObjects.map(function(e){return e.toXML()}).join(""):"","</EthercatController>")},a.toJSON=function(){return{name:a.name,slavePoolObjects:a.slavePoolObjects&&a.slavePoolObjects.map(function(e){return e.toJSON()})}},a.name=e,a.slavePoolObjects=n,a}return Object(f.a)(t,e),t}(rr);vr.FromXML=function(e){return new vr(e.getAttribute("name"),Object(b.a)(e.getElementsByTagName("SlavePoolObject")).filter(function(e){return 1===e.nodeType}).map(Or.FromXML))},vr.FromJSON=function(e){var t=e.name,n=e.slavePoolObjects;return new vr(t,n&&n.map(Or.FromJSON))};var Er=vr,yr=function(e){function t(e,n,a){var r;return Object(i.a)(this,t),(r=Object(d.a)(this,Object(p.a)(t).call(this))).toXML=function(){return"<Device ".concat(t.ToXMLAttrString("Name",r.name)," ").concat(t.ToXMLAttrString("ProductCode",r.productCode)," ").concat(t.ToXMLAttrString("RevisionNo",r.revisionNo)," />")},r.toJSON=function(){return{name:r.name,productCode:r.productCode,revisionNo:r.revisionNo}},r.name=e,r.productCode=n,r.revisionNo=a,r}return Object(f.a)(t,e),t}(rr);yr.FromXML=function(e){return new yr(e.getAttribute("Name"),e.getAttribute("ProductCode"),e.getAttribute("RevisionNo"))},yr.FromJSON=function(e){var t=e.name,n=e.productCode,a=e.revisionNo;return new yr(t,n,a)};var Cr=yr,Pr=function(e){function t(e,n,a){var r;return Object(i.a)(this,t),(r=Object(d.a)(this,Object(p.a)(t).call(this))).toXML=function(){return"<Vendor ".concat(t.ToXMLAttrString("Id",r.id)," ").concat(t.ToXMLAttrString("Name",r.name),">").concat(r.devices&&r.devices.map(function(e){return e.toXML()}).join(""),"</Vendor>")},r.toJSON=function(){return{name:r.name,id:r.id,devices:r.devices&&r.devices.map(function(e){return e.toJSON()})}},r.id=e,r.name=n,r.devices=a,r}return Object(f.a)(t,e),t}(rr);Pr.FromXML=function(e){return new Pr(e.getAttribute("Id"),e.getAttribute("Name"),Object(b.a)(e.getElementsByTagName("Device")).map(Cr.FromXML))},Pr.FromJSON=function(e){var t=e.id,n=e.name,a=e.devices;return new Pr(t,n,a&&a.map(Cr.FromJSON))};var Fr=Pr,Rr=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this))).toXML=function(){return"<ethercat_master>".concat(n.vendors?n.vendors.map(function(e){return e.toXML()}).join(""):"","</ethercat_master>")},n.toJSON=function(){return{vendors:n.vendors&&n.vendors.map(function(e){return e.toJSON()})}},n.vendors=e,n}return Object(f.a)(t,e),t}(rr);Rr.FromXML=function(e){return new Rr(Object(b.a)(e.getElementsByTagName("Vendor")).map(Fr.FromXML))},Rr.FromJSON=function(e){var t=e.vendors;return new Rr(t&&t.map(Fr.FromJSON))};var jr=function(e,t){var n=t.cell;return e.robot.resultsByChannel["".concat(n.i,"-setesipath")]},Sr=function(e,t){var n=t.cell;return e.robot.resultsByChannel["".concat(n.i,"-scanslave")]},wr=Object(Ue.a)(Sr,function(e){if(e&&e.controller_xml){var t=(new DOMParser).parseFromString(e.controller_xml,"text/xml").getElementsByTagName("EthercatController");if(t&&t[0])return Er.FromXML(t[0]).toJSON()}return null}),_r=Object(Ue.a)(jr,function(e){if(e&&e.device_list_xml){var t=(new DOMParser).parseFromString(e.device_list_xml,"text/xml").getElementsByTagName("ethercat_master");if(t&&t[0])return Rr.FromXML(t[0]).toJSON()}return null}),xr=Object(Ue.a)(function(e,t){var n=t.cell;return e.robot.resultsByChannel["".concat(n.i,"-pdolist-for-device")]},function(e){if(e&&e.pdo_list_xml){var t=(new DOMParser).parseFromString(e.pdo_list_xml,"text/xml").getElementsByTagName("EthercatSlave");if(t&&t[0])return fr.FromXML(t[0]).toJSON()}return null}),Nr=Object(Ue.a)(function(e,t){var n=t.cell;return e.robot.resultsByChannel["".concat(n.i,"-pdolist-for-slave")]},function(e){return e&&e.device_list_xml,null}),Ir=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.sendCmd,a=e.cell,r=e.esiFileUploadRequest,l=e.esiFileUploadFailure,c=e.esiFileUploadSuccess,s=e.saveResult,i=e.ws,u=e.esiPath,d=e.esiFileUploadingRequest,p=e.esiFileUploadingSuccess,m=e.esiFileUploadingFailure,f=e.setEsiPathResult,b=e.scanSlaveResult,g=e.deleteResultByChannel,h=e.slaves,O=e.addSlave,v=e.saveSlaves,E=e.removeSlave,y=e.selectSlave,C=e.selectedSlave;return o.a.createElement("div",{className:"".concat(t,"-sidebar")},o.a.createElement(kt.a,{className:"".concat(t,"-buttons")},o.a.createElement(za.a,{className:"".concat(t,"-esi-upload"),accept:".xml",multiple:!1,action:"/api/esi",disabled:!i,showUploadList:!1,onChange:function(e){var t=e.file;e.fileList,e.event;"uploading"===t.status?(g("".concat(a.i,"-setesipath")),g("".concat(a.i,"-scanslave")),r()):"done"===t.status?(c(t.response.path),n("cs_stop","".concat(a.i,"-stop")),n("setesipath --path=".concat(u),"".concat(a.i,"-setesipath"))):"error"===t.status&&l(t.response.error)}},o.a.createElement(Lt.a,{disabled:!i},o.a.createElement(w.a,{type:"upload"}),"\u4e0a\u4f20ESI\u6587\u4ef6")),o.a.createElement(Lt.a,{className:"".concat(t,"-scanslave"),disabled:!i,onClick:function(){g("".concat(a.i,"-scanslave")),f&&!f.return_code||(n("cs_stop","".concat(a.i,"-stop")),n("setesipath --path=".concat(u),"".concat(a.i,"-setesipath"))),n("scanslave","".concat(a.i,"-scanslave"))}},o.a.createElement(w.a,{type:"monitor"}),"\u626b\u63cf\u4ece\u7ad9")),o.a.createElement(kt.a,{className:"".concat(t,"-info")},!b&&!f&&d&&o.a.createElement("span",{className:"info"},"ESI\u6587\u4ef6\u4e0a\u4f20\u4e2d..."),!b&&!f&&p&&o.a.createElement("span",{className:"success"},"ESI\u6587\u4ef6\u4e0a\u4f20\u6210\u529f!"),!b&&!f&&m&&o.a.createElement("span",{className:"info"},"ESI\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25! ERROR:",m),!b&&!!f&&!!f.return_code&&o.a.createElement(nr,{className:"error",filter:["cmd_response_time","id"],result:f}),!b&&!!f&&!f.return_code&&o.a.createElement("span",{className:"success"},"setesipath \u6210\u529f!"),!!b&&!!b.return_code&&o.a.createElement(nr,{className:"error",filter:["cmd_response_time","id"],result:f}),!!b&&!b.return_code&&o.a.createElement("span",{className:"success"},"scanslave \u6210\u529f!")),!!h&&o.a.createElement(kt.a,{className:"".concat(t,"-slaves-list")},h.map(function(e,n){return o.a.createElement("div",{key:n,className:"".concat(C===n?"".concat(t,"-selected-slave"):""," ").concat(t,"-slaves-list-item"),onClick:function(){y(n)}},e.isMotion?"\u7535\u673a":"\u4ece\u7ad9",e.phyId,o.a.createElement(Lt.a,{size:"small",onClick:function(e){e.preventDefault(),e.stopPropagation(),E(n)}},"\u5220\u9664"))}),o.a.createElement(kt.a,{className:"".concat(t,"-add-slave")},o.a.createElement(Lt.a,{onClick:v},"\u63d0\u4ea4\u4fee\u6539"),o.a.createElement(Lt.a,{onClick:O},"\u6dfb\u52a0\u4ece\u7ad9")),s&&o.a.createElement(kt.a,{className:"".concat(t,"-save-result")},0!==s.return_code&&o.a.createElement(nr,{result:s,className:"error"}),0===s.return_code&&o.a.createElement("p",{className:"success"},"\u4fdd\u5b58\u6210\u529f!",o.a.createElement("br",null),s.return_message))))}}]),t}(r.Component),Mr=Object(Ue.a)(function(e){return e.robot.esiPath},Ft,jr,Sr,wr,function(e){return e.robot.esiFileUploadingRequest},function(e){return e.robot.esiFileUploadingSuccess},function(e){return e.robot.esiFileUploadingFailure},_r,function(e,t,n,a,r,o,l,c,s){return{esiPath:e,ws:t,setEsiPathResult:n,scanSlaveResult:a,scanSlaveJsonResult:r,esiFileUploadingRequest:o,esiFileUploadingSuccess:l,esiFileUploadingFailure:c,setEsiPathJSONResult:s}});var Tr=Object(s.b)(function(e,t){return he.request(),Mr(e,t)},{esiFileUploadRequest:he.request,esiFileUploadFailure:he.failure,esiFileUploadSuccess:he.success,sendCmd:ce,deleteResultByChannel:se})(Ir),Dr=Dn.a.Option,kr=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={selectedVendor:null,selectedDevice:null},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=(e.sendCmd,e.cell,e.selectedVendor),a=(e.selectedDevice,e.selectDevice),r=e.selectVendor,l=this.props.vendors,c={size:"small",style:{width:200},placeholder:"\u9009\u62e9\u54c1\u724c",onChange:function(e){r(e)}};r&&r.id&&(c.value=r.id);var s={size:"small",style:{width:200},placeholder:"\u9009\u62e9\u578b\u53f7",onChange:function(e){a(e)}};return a&&a.name&&(s.value=a.name),o.a.createElement("div",{className:"".concat(t,"-header-bar")},l&&o.a.createElement(Dn.a,c,l.map(function(e){return o.a.createElement(Dr,{value:e.id,key:e.id},e.name)})),l&&n&&n.devices&&o.a.createElement(Dn.a,s,n.devices.map(function(e,t){return o.a.createElement(Dr,{value:e.name,key:t},e.name)})),o.a.createElement(Lt.a,{onClick:this.props.save,type:"primary"},"\u66f4\u65b0"))}}]),t}(r.Component),Ar=Object(Ue.a)(function(){},function(e){return{result:e}});var Lr=Object(s.b)(function(e,t){return Ar(e,t)},{sendCmd:ce})(kr),Ur=n(116),Br=n.n(Ur),Vr=n(1267);o.a.Component;function Wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wr(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Xr=Nn.a.Item,Gr={labelCol:{span:10},wrapperCol:{span:14}},zr=function(e,t,n){"string"===typeof t&&t.match(/^(?:0[xX])?[0-9a-fA-F]+$/)?n():n("not hex")},qr=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).name="Ethercat\u4ece\u7ad9\u914d\u7f6e",n.width=24,n.height=24,n.state={selectedVendor:null,selectedDevice:null,selectedSlave:null,flag_state:null},n.addSlave=function(){var e=n.props,t=e.cell,a=e.saveResultByChannel,r=Object(b.a)(n.state.slaves),o=1;dn()(r)||(o=Math.max.apply(Math,Object(b.a)(r.map(function(e){return e.phyId})))+1);var l={phyId:o,uuid:Math.random().toString(36)};delete l.syncManagerPoolObjects,r.push(l);var c={name:"slave_pool",motions:[],slaves:[]};r.map(function(e){e.isMotion?c.motions.push(e):c.slaves.push(e)});var s={name:"ethercat_controller",slavePoolObjects:[c]},i=Er.FromJSON(s);a("".concat(t.i,"-scanslave"),{controller_xml:i.toXML()}),n.setState({slaves:r,updateError:null})},n.selectSlave=function(e){var t=n.state.slaves;if(t[e]){var a=t[e],r=a.vendorId,o=a.productCode,l=a.revisionNum;r&&o&&l&&n.getEsiPdoListForDevice(r,o,l),n.setState({selectedSlave:e,updateError:null})}else n.setState({selectedSlave:null,updateError:null})},n.selectVendor=function(e){var t=n.state.vendors;n.setState({selectedVendor:t.filter(function(t){return t.id===e})[0],selectedDevice:null,updateError:null})},n.selectDevice=function(e){var t=n.state.selectedVendor;if(t){var a=t.devices.filter(function(t){return t.name===e})[0];if(n.setState({selectedDevice:a,updateError:null}),a){var r=t.id,o=a.productCode,l=a.revisionNo;r&&o&&l&&n.getEsiPdoListForDevice(r,o,l)}}},n.removeSlave=function(e){var t=Object(b.a)(n.state.slaves),a=n.props,r=a.cell,o=a.saveResultByChannel,l=n.state,c=l.updateError,s=l.selectedSlave;dn()(t)?(s=null,c=null):(e<t.length&&t.splice(e,1),s===e?(s=null,c=null):s>e&&(s-=1));var i={name:"slave_pool",motions:[],slaves:[]};t.map(function(e){e.isMotion?i.motions.push(e):i.slaves.push(e)});var u={name:"ethercat_controller",slavePoolObjects:[i]},d=Er.FromJSON(u);o("".concat(r.i,"-scanslave"),{controller_xml:d.toXML()}),n.setState({slaves:t,updateError:c,selectedSlave:s})},n.addPdo=function(e){var t=Object(b.a)(n.state.slaves),a=n.state.selectedSlave,r=Jr({},t[a]);r.syncManagerPoolObjects=Object(b.a)(r.syncManagerPoolObjects||[]),r.syncManagerPoolObjects[0].syncManagers=Object(b.a)(r.syncManagerPoolObjects[0].syncManagers||[]),r.syncManagerPoolObjects[0].syncManagers[e]=Jr({},r.syncManagerPoolObjects[0].syncManagers[e]||{}),r.syncManagerPoolObjects[0].syncManagers[e].pdoes=[].concat(Object(b.a)(r.syncManagerPoolObjects[0].syncManagers[e].pdoes||[]),[{}]),t[a]=r,r.rnd=Math.random(),n.setState({slaves:t,updateError:null})},n.removePdo=function(e,t){var a=Object(b.a)(n.state.slaves),r=n.state.selectedSlave,o=Jr({},a[r]);o.syncManagerPoolObjects=Object(b.a)(o.syncManagerPoolObjects||[]),o.syncManagerPoolObjects[0].syncManagers=Object(b.a)(o.syncManagerPoolObjects[0].syncManagers||[]),o.syncManagerPoolObjects[0].syncManagers[e]=Jr({},o.syncManagerPoolObjects[0].syncManagers[e]||{}),o.syncManagerPoolObjects[0].syncManagers[e].pdoes=Object(b.a)(o.syncManagerPoolObjects[0].syncManagers[e].pdoes||[]),o.syncManagerPoolObjects[0].syncManagers[e].pdoes.splice(t,1),a[r]=o,o.rnd=Math.random(),n.setState({slaves:a,updateError:null})},n.addPdoEntry=function(e,t){var a=Object(b.a)(n.state.slaves),r=n.state.selectedSlave,o=Jr({},a[r]);o.syncManagerPoolObjects=Object(b.a)(o.syncManagerPoolObjects||[]),o.syncManagerPoolObjects[0].syncManagers=Object(b.a)(o.syncManagerPoolObjects[0].syncManagers||{}),o.syncManagerPoolObjects[0].syncManagers[e]=Jr({},o.syncManagerPoolObjects[0].syncManagers[e]||{}),o.syncManagerPoolObjects[0].syncManagers[e].pdoes=Object(b.a)(o.syncManagerPoolObjects[0].syncManagers[e].pdoes||[]),o.syncManagerPoolObjects[0].syncManagers[e].pdoes[t]=Jr({},o.syncManagerPoolObjects[0].syncManagers[e].pdoes[t]||{}),o.syncManagerPoolObjects[0].syncManagers[e].pdoes[t].entries=[].concat(Object(b.a)(o.syncManagerPoolObjects[0].syncManagers[e].pdoes[t].entries||[]),[{}]),a[r]=o,o.rnd=Math.random(),n.setState({slaves:a,updateError:null})},n.removePdoEntry=function(e,t,a){var r=Object(b.a)(n.state.slaves),o=n.state.selectedSlave,l=Jr({},r[o]);l.syncManagerPoolObjects=Object(b.a)(l.syncManagerPoolObjects||[]),l.syncManagerPoolObjects[0].syncManagers=Object(b.a)(l.syncManagerPoolObjects[0].syncManagers||{}),l.syncManagerPoolObjects[0].syncManagers[e]=Jr({},l.syncManagerPoolObjects[0].syncManagers[e]||{}),l.syncManagerPoolObjects[0].syncManagers[e].pdoes=Object(b.a)(l.syncManagerPoolObjects[0].syncManagers[e].pdoes||[]),l.syncManagerPoolObjects[0].syncManagers[e].pdoes[t]=Jr({},l.syncManagerPoolObjects[0].syncManagers[e].pdoes[t]||{}),l.syncManagerPoolObjects[0].syncManagers[e].pdoes[t].entries=Object(b.a)(l.syncManagerPoolObjects[0].syncManagers[e].pdoes[t].entries||[]),l.syncManagerPoolObjects[0].syncManagers[e].pdoes[t].entries.splice(a,1),r[o]=l,l.rnd=Math.random(),n.setState({slaves:r,updateError:null})},n.renderSlaveInputs=function(e,t){return o.a.createElement(kt.a,null,[["phyId","physical id",t.phyId,[{type:"integer",message:"Please input integer"}]],["productCode","productCode",t.productCode,[{validator:zr,message:"Please input hex"}]],["sync0ShiftNs","sync0 shift ns",t.sync0ShiftNs,[{type:"integer",message:"Please input integer"}]],["vendorId","vendor id",t.vendorId,[{validator:zr,message:"Please input hex"}]],["revisionNum","revision No.",t.revisionNum,[{validator:zr,message:"Please input hex"}]],["dcAssignActivate","dc assign activate",t.dcAssignActivate,[{validator:zr,message:"Please input hex"}]]].map(function(t){var a;return(a=n).renderFormItemInput.apply(a,[e].concat(Object(b.a)(t),[7,!0]))}))},n.renderMotionInputs=function(e,t){return o.a.createElement(r.Fragment,null,n.renderSlaveInputs(e,t),o.a.createElement(kt.a,null,[["maxPos","max pos",t.maxPos,7,!0,.01,"\u5ea6",-1/0,1/0],["maxVel","max vel",t.maxVel,7,!0,.01,"\u5ea6/s",-1/0,1/0],["maxAcc","max acc",t.maxAcc,7,!0,.01,"\u5ea6/s2",-1/0,1/0],["minPos","min pos",t.minPos,7,!0,.01,"\u5ea6",-1/0,1/0],["minVel","min vel",t.minVel,7,!0,.01,"\u5ea6/s",-1/0,1/0],["minAcc","min acc",t.minAcc,7,!0,.01,"\u5ea6/s2",-1/0,1/0],["posFactor","pos factor",t.posFactor,7,!0,.01,"",-Number.MAX_VALUE,Number.MAX_VALUE],["posOffset","pos offset",t.posOffset,7,!0,.01,"\u5ea6",-1/0,1/0],["homePos","home pos",t.homePos,7,!0,.01,"\u5ea6",-1/0,1/0],["maxPosFollowingError","max pos following error",t.maxPosFollowingError,11,!0,1e-4,"",-Number.MAX_VALUE,Number.MAX_VALUE],["maxVelFollowingError","max vel following error",t.maxVelFollowingError,11,!0,1e-4,"",-Number.MAX_VALUE,Number.MAX_VALUE]].map(function(t){var a;return(a=n).renderFormItemNumberInput.apply(a,[e].concat(Object(b.a)(t)))})))},n.renderPdoEntry=function(e,t,a,r,l){var c=n.props.form.getFieldDecorator,s={name:[],index:[{validator:zr,message:"Please input hex"}],subIndex:[{validator:zr,message:"Please input hex"}],size:[{type:"integer",message:"Please input integer",transform:function(e){return Number(e)?Number(e):0}}]};return o.a.createElement(kt.a,{key:l,className:"".concat(e,"-sync-manager-pdo-entry")},o.a.createElement(An.a,{span:4},"PDO Entry"),["name","index","subIndex","size"].map(function(e){return o.a.createElement(An.a,{key:e,span:4},o.a.createElement(Xr,{hasFeedback:!0},c("slave.syncManagerPoolObjects[0].syncManagers[".concat(a,"].pdoes[").concat(r,"].entries[").concat(l,"].").concat(e),{initialValue:t[e],rules:[].concat(Object(b.a)(s[e]),[{required:!0,message:"Please input ".concat(e)}])})(o.a.createElement(En.a,{placeholder:"".concat(e),size:"small"}))))}),o.a.createElement(An.a,{span:4},o.a.createElement(Lt.a,{size:"small",type:"danger",onClick:function(){n.removePdoEntry(a,r,l)}},"DEL")))},n.renderPdo=function(e,t,a,r){var l=n.props.form.getFieldDecorator,c={name:[],index:[{validator:zr,message:"Please input hex"}]};return o.a.createElement("div",{className:"".concat(e,"-sync-manager-pdo"),key:r},o.a.createElement(kt.a,{className:"".concat(e,"-sync-manager-pdo-header")},o.a.createElement(An.a,{span:2},"Pdo ",r+1),["name","index"].map(function(e){return o.a.createElement(An.a,{span:6,key:e},o.a.createElement(Xr,Object.assign({},Gr,{label:e,hasFeedback:!0}),l("slave.syncManagerPoolObjects[0].syncManagers[".concat(a,"].pdoes[").concat(r,"].").concat(e),{initialValue:t[e],rules:[].concat(Object(b.a)(c[e]),[{required:!0,message:"Please input ".concat(e)}])})(o.a.createElement(En.a,{placeholder:"".concat(e),size:"small"}))))}),o.a.createElement(An.a,{span:8,offset:2,className:"".concat(e,"-sync-manager-pdo-delete")},o.a.createElement(Xr,null,o.a.createElement(Lt.a,{size:"small",type:"danger",onClick:function(){n.removePdo(a,r)}},"DEL")))),o.a.createElement("div",{className:"".concat(e,"-sync-manager-pdo-entries")},o.a.createElement(kt.a,{className:"".concat(e,"-sync-manager-pdo-entries-header")},o.a.createElement(An.a,{span:4}),["name","index","subIndex","size"].map(function(e){return o.a.createElement(An.a,{key:e,span:4},e)})),!!t.entries&&t.entries.map(function(t,o){return n.renderPdoEntry(e,t,a,r,o)}),o.a.createElement(kt.a,{className:"".concat(e,"-sync-manager-pdo-entries-add")},o.a.createElement(An.a,{span:20},o.a.createElement(Xr,null,o.a.createElement(Lt.a,{size:"small",type:"primary",onClick:function(){n.addPdoEntry(a,r)}},"Add Pdo Entry"))))))},n.renderSyncManager=function(e,t,a){var r=n.props.form.getFieldDecorator,l=n.state,c=l.slaves,s=l.selectedSlave;if(console.log(a),"true"==t.isTx)var i=!0;else if("false"==t.isTx)i=!1;return console.log(c[s].syncManagerPoolObjects[0].syncManagers[a]),o.a.createElement("div",{className:"".concat(e,"-sync-manager"),key:a},o.a.createElement(kt.a,{className:"".concat(e,"-sync-manager-header")},"Sync Manager ",a+1,r("slave.syncManagerPoolObjects[0].syncManagers[".concat(a,"].isTx"),{initialValue:!!i,valuePropName:"checked"})(o.a.createElement(Br.a,null,"is_tx")),o.a.createElement(Lt.a,{size:"small",type:"primary",onClick:n.addPdo.bind(Object(m.a)(n),a)},"Add PDO")),o.a.createElement("div",{className:"".concat(e,"-sync-manager-pdoes")},!!t.pdoes&&t.pdoes.map(function(t,r){return n.renderPdo(e,t,a,r)})))},n.renderForm=function(e){var t=n.state,a=t.slaves,r=t.selectedSlave,l=a[r];return o.a.createElement(Nn.a,null,!!l.isMotion&&n.renderMotionInputs(e,l),!l.isMotion&&n.renderSlaveInputs(e,l),o.a.createElement(kt.a,{className:"".concat(e,"-is-motion")},o.a.createElement(An.a,{span:23},o.a.createElement(Br.a,{checked:l.isMotion,onChange:function(e){(a=Object(b.a)(a))[r]=Jr({},l,{isMotion:e.target.checked}),n.setState({slaves:a,updateError:null})}},"isMotion"))),!!l&&l.syncManagerPoolObjects&&l.syncManagerPoolObjects[0]&&l.syncManagerPoolObjects[0].syncManagers&&l.syncManagerPoolObjects[0].syncManagers.map(function(t,a){return n.renderSyncManager(e,t,a)}))},n.saveSlaves=function(e){e.preventDefault();var t=n.props,a=t.cell,r=t.sendCmd,o=t.deleteResultByChannel,l=n.state.slaves,c={name:"slave_pool",motions:[],slaves:[]};l.map(function(e){e.isMotion?c.motions.push(e):c.slaves.push(e)});var s={name:"ethercat_controller",slavePoolObjects:[c]},i=Er.FromJSON(s);o("".concat(a.i,"-save")),r("set_xml --xml={<ControlServer>".concat(i.toXML(),"</ControlServer>}"),"".concat(a.i,"-save"))},n.update=function(e){e.preventDefault();var t=Object(m.a)(n),a=n.props,r=a.cell,o=a.saveResultByChannel;n.props.form.validateFields(function(e,a){var l=a.slave;if(e)t.setState({updateError:"\u8bf7\u4fee\u6b63\u4e0d\u5408\u7406\u7684\u8f93\u5165\u5185\u5bb9\uff01"});else{var c=n.state,s=c.slaves,i=c.selectedSlave,u=s[i];s[i]=Jr({syncManagerPoolObjects:[{syncManagers:[{},{},{},{}]}]},l,{uuid:u.uuid,isMotion:u.isMotion});var d={name:"slave_pool",motions:[],slaves:[]};s.map(function(e){e.isMotion?d.motions.push(e):d.slaves.push(e)});var p={name:"ethercat_controller",slavePoolObjects:[d]},m=Er.FromJSON(p);o("".concat(r.i,"-scanslave"),{controller_xml:m.toXML()}),n.setState({updateError:null})}})},n.renderContent=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=a.cell,c=a.saveResult,s=n.state,i=s.slaves,u=s.selectedSlave,d=s.vendors,p=s.selectedVendor,m=s.selectedDevice,f=s.updateError,b=t("ethercat-configuration",r);return o.a.createElement("div",{className:b},o.a.createElement(Tr,{prefixCls:b,slaves:i,saveResult:c,saveSlaves:n.saveSlaves,addSlave:n.addSlave,removeSlave:n.removeSlave,selectSlave:n.selectSlave,selectedSlave:u,getEsiPdoList:n.getEsiPdoListForSlave,cell:l}),!!i&&null!=u&&!!i[u]&&o.a.createElement("div",{className:"".concat(b,"-content"),onSubmit:function(){}},o.a.createElement(Lr,{cell:l,vendors:d,prefixCls:b,selectDevice:n.selectDevice,selectVendor:n.selectVendor,selectedVendor:p,selectedDevice:m,save:n.update,getEsiPdoList:n.getEsiPdoListForDevice}),o.a.createElement(kt.a,{className:"".concat(b,"-error")},f&&o.a.createElement("div",{className:"error"},f)),n.renderForm(b)))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"getEsiPdoListForDevice",value:function(e,t,n){var a=this.props,r=a.deleteResultByChannel,o=a.sendCmd,l=a.cell;r("".concat(l.i,"-pdolist")),o("getesipdolist --vendor_id=".concat(e," --product_code=").concat(t," --revision_num=").concat(n),"".concat(l.i,"-pdolist-for-device"))}},{key:"getEsiPdoListForSlave",value:function(e,t,n){var a=this.props,r=a.deleteResultByChannel,o=a.sendCmd,l=a.cell;r("".concat(l.i,"-pdolist")),o("getesipdolist --vendor_id=".concat(e," --product_code=").concat(t," --revision_num=").concat(n),"".concat(l.i,"-pdolist-for-slave"))}},{key:"shouldComponentUpdate",value:function(e,t,n){if(qe()(e.ethercatMaster,this.props.ethercatMaster)||e.ethercatMaster&&e.ethercatMaster.vendors&&this.setState({vendors:e.ethercatMaster.vendors,updateError:null}),!qe()(e.ethercatController,this.props.ethercatController)){if(e.ethercatController&&e.ethercatController.slavePoolObjects&&e.ethercatController.slavePoolObjects[0]){var a=[];e.ethercatController.slavePoolObjects[0].motions&&e.ethercatController.slavePoolObjects[0].motions.forEach(function(e){a.push(e)}),e.ethercatController.slavePoolObjects[0].slaves&&e.ethercatController.slavePoolObjects[0].slaves.forEach(function(e){a.push(e)}),this.setState({slaves:a,updateError:null})}return!1}var r=this.state,o=r.selectedSlave,l=r.slaves;return!(!qe()(e.pdoListForDevice,this.props.pdoListForDevice)&&!dn()(e.pdoListForDevice)&&null!=o&&l&&l[o])||((l=Object(b.a)(l))[o]=Jr({},e.pdoListForDevice,{phyId:l[this.state.selectedSlave].phyId}),this.setState({slaves:l,updateError:null}),!1)}},{key:"componentWillMount",value:function(){this.props.loadEsiPath()}},{key:"renderFormItemInput",value:function(e,t,n,a,r,l,c){var s=this.props.form.getFieldDecorator;return o.a.createElement(An.a,{span:l||7,offset:1,pull:1,key:t},o.a.createElement(Xr,Object.assign({},Gr,{label:n,hasFeedback:!0}),s("slave.".concat(t),{initialValue:a,rules:[{required:!!c,message:"Please input ".concat(n)}]})(o.a.createElement(En.a,{placeholder:"".concat(n),size:"small"}))))}},{key:"renderFormItemNumberInput",value:function(e,t,n,a,r,l,c,s,i,u){var d=this.props.form.getFieldDecorator;return console.log("slave.".concat(t)),o.a.createElement(An.a,{span:r||7,offset:1,pull:1,key:t},o.a.createElement(Xr,Object.assign({},Gr,{label:n,hasFeedback:!0}),d("slave.".concat(t),{initialValue:a,rules:[{required:!!l,message:"Please input ".concat(n)}]})(o.a.createElement(Un.a,{size:"small",step:c||.01,min:i||-1/0,max:u||1/0,placeholder:"".concat(n)})),!!s&&o.a.createElement("span",{className:"".concat(e,"-form-postfix")},s)))}}]),t}(Vt),Qr=Object(Ue.a)(_r,wr,xr,Nr,function(e,t){var n=t.cell;return e.robot.resultsByChannel["".concat(n.i,"-save")]},function(e,t,n,a,r){return{ethercatMaster:e,ethercatController:t,pdoListForDevice:n,pdoListForSlave:a,saveResult:r}});var Hr=Object(s.b)(function(e,t){return Qr(e,t)},{loadEsiPath:function(){return U(Oe)},deleteResultByChannel:se,saveResultByChannel:function(e,t){return console.log("SAVE_RESULT_BY_CHANNEL",e,t),U("SAVE_RESULT_BY_CHANNEL",{channel:e,data:t})}})(Nn.a.create({mapPropsToFields:function(e){return function e(t){return Object.keys(t).reduce(function(n,a){return Jr({},n,Object(g.a)({},a,"object"!==typeof t[a]||"value"in t[a]?Nn.a.createFormField(Jr({},t[a],{value:t[a]&&t[a].value})):Ge()(t[a])?t[a].map(function(t){return e(t)}):e(t[a])))},{})}({slave:e.slave})},onValuesChange:function(e,t){}})(qr));Hr.NAME="\u4ece\u7ad9\u914d\u7f6e";var Zr=Hr,Yr=n(341),Kr=n.n(Yr),$r=n(2),eo=n.n($r),to=function(e){return/^[a-zA-Z][a-zA-Z0-9_]*$/.test(e)?e:"error"},no=[["int","int"],["string","string"],["boolen","boolen"],["double","double"],["int[][]","array"]];eo.a.Blocks.base_variate={init:function(){var e=new eo.a.FieldDropdown(no,this.validate);this.appendDummyInput().appendField(new eo.a.FieldLabelSerializable("VAR"),"NAME").appendField(e,"DROPDOWN1"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")},validate:function(e){return this.getSourceBlock().updateConnections(e),e},updateConnections:function(e){this.removeInput("other",!0),this.removeInput("array1",!0);var t=new eo.a.FieldTextInput("p1",to);"int"==e?this.appendDummyInput("other").appendField(t,"INPUT1").appendField("=").appendField(new eo.a.FieldTextInput("result"),"RESULT"):"string"==e?this.appendDummyInput("other").appendField(t,"INPUT1").appendField("=").appendField(new eo.a.FieldTextInput("result"),"RESULT"):"boolen"==e?this.appendDummyInput("other").appendField(t,"INPUT1").appendField("=").appendField(new eo.a.FieldTextInput("result"),"RESULT"):"double"==e?this.appendDummyInput("other").appendField(t,"INPUT1").appendField("=").appendField(new eo.a.FieldTextInput("result"),"RESULT"):"array"==e&&this.appendDummyInput("array1").appendField(t,"INPUT1").appendField(new eo.a.FieldTextInput("p2"),"INPUT2").appendField("=").appendField(new eo.a.FieldTextInput("result"),"RESULT")}},eo.a.Blocks.load_variate={init:function(){this.appendDummyInput().appendField("VAR load","FIRST_FIELD").appendField(new eo.a.FieldTextInput("piece1",to),"VARIABLE").appendField("=").appendField("{").appendField(new eo.a.FieldTextInput("mass"),"MASS").appendField(",").appendField("{").appendField(new eo.a.FieldTextInput("cogx"),"COGX").appendField(",").appendField(new eo.a.FieldTextInput("cogy"),"COGY").appendField(",").appendField(new eo.a.FieldTextInput("cogz"),"COGZ").appendField("}").appendField(",").appendField("{").appendField(new eo.a.FieldTextInput("q1"),"Q1").appendField(",").appendField(new eo.a.FieldTextInput("q2"),"Q2").appendField(",").appendField(new eo.a.FieldTextInput("q3"),"Q3").appendField(",").appendField(new eo.a.FieldTextInput("q4"),"Q4").appendField("}").appendField(",").appendField("{").appendField(new eo.a.FieldTextInput("ix"),"IX").appendField(new eo.a.FieldTextInput("iy"),"IY").appendField(new eo.a.FieldTextInput("iz"),"IZ").appendField("}").appendField("}"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(120),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.pose_variate={init:function(){this.appendDummyInput().appendField("VAR pose","FIRST_FIELD").appendField(new eo.a.FieldTextInput("pose1",to),"POST1").appendField("=").appendField("{{").appendField(new eo.a.FieldTextInput("x"),"X").appendField(",").appendField(new eo.a.FieldTextInput("y"),"Y").appendField(",").appendField(new eo.a.FieldTextInput("z"),"Z").appendField("}").appendField(",").appendField("{").appendField(new eo.a.FieldTextInput("q1"),"Q1").appendField(",").appendField(new eo.a.FieldTextInput("q2"),"Q2").appendField(",").appendField(new eo.a.FieldTextInput("q3"),"Q3").appendField(",").appendField(new eo.a.FieldTextInput("q4"),"Q4").appendField("}}"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(120),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.jointtarget_variate={init:function(){this.appendDummyInput().appendField("VAR jointtarget","FIRST_FIELD").appendField(new eo.a.FieldTextInput("home",to),"HOME").appendField("=").appendField("{{").appendField(new eo.a.FieldTextInput("J1"),"J1").appendField(",").appendField(new eo.a.FieldTextInput("J2"),"J2").appendField(",").appendField(new eo.a.FieldTextInput("J3"),"J3").appendField(",").appendField(new eo.a.FieldTextInput("J4"),"J4").appendField(",").appendField(new eo.a.FieldTextInput("J5"),"J5").appendField(",").appendField(new eo.a.FieldTextInput("J6"),"J6").appendField("}").appendField("{").appendField(new eo.a.FieldTextInput("EJ"),"EJ").appendField("}}"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(120),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.robtarget_variate={init:function(){this.appendDummyInput().appendField("VAR robtarget","FIRST_FIELD").appendField(new eo.a.FieldTextInput("pB1",to),"INPUT1").appendField("=").appendField("{{").appendField(new eo.a.FieldTextInput("x"),"X").appendField(",").appendField(new eo.a.FieldTextInput("y"),"Y").appendField(",").appendField(new eo.a.FieldTextInput("z"),"Z").appendField("}").appendField(",").appendField("{").appendField(new eo.a.FieldTextInput("q1"),"Q1").appendField(",").appendField(new eo.a.FieldTextInput("q2"),"Q2").appendField(",").appendField(new eo.a.FieldTextInput("q3"),"Q3").appendField(",").appendField(new eo.a.FieldTextInput("q4"),"Q4").appendField("}}"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(120),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.speed_variate={init:function(){this.appendDummyInput().appendField("VAR speed","first_field").appendField(new eo.a.FieldTextInput("v1"),"V1").appendField("=").appendField("{").appendField(new eo.a.FieldTextInput("ter"),"TER").appendField(",").appendField(new eo.a.FieldTextInput("tcp"),"TCP").appendField(",").appendField(new eo.a.FieldTextInput("ori"),"ORI").appendField(",").appendField(new eo.a.FieldTextInput("exj_r"),"EXJ_R").appendField(",").appendField(new eo.a.FieldTextInput("exj_l"),"EXJ_L").appendField("}"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(120),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.zone_variate={init:function(){this.appendDummyInput().appendField("VAR zone","FIRST_FIELD").appendField(new eo.a.FieldTextInput("z100",to),"INPUT1").appendField("=").appendField("{").appendField(new eo.a.FieldTextInput("dis"),"DIS").appendField(",").appendField(new eo.a.FieldTextInput("per"),"PER").appendField("}"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(120),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.tool_variate={init:function(){this.appendDummyInput().appendField("VAR tool","FIRST_FIELD").appendField(new eo.a.FieldTextInput("tool2",to),"INPUT1").appendField("=").appendField("{").appendField(new eo.a.FieldDropdown([["true","true"],["false","false"]]),"CHOOSE").appendField(",").appendField("{{").appendField(new eo.a.FieldTextInput("x"),"X").appendField(",").appendField(new eo.a.FieldTextInput("y"),"Y").appendField(",").appendField(new eo.a.FieldTextInput("z"),"Z").appendField("}").appendField(",").appendField("{").appendField(new eo.a.FieldTextInput("q1"),"A1").appendField(",").appendField(new eo.a.FieldTextInput("q2"),"A2").appendField(",").appendField(new eo.a.FieldTextInput("q3"),"A3").appendField(",").appendField(new eo.a.FieldTextInput("q4"),"A4").appendField("}}").appendField(",").appendField("{").appendField(new eo.a.FieldTextInput("mass"),"MASS").appendField(",").appendField("{").appendField(new eo.a.FieldTextInput("cogx"),"COGX").appendField(",").appendField(new eo.a.FieldTextInput("cogy"),"XOGY").appendField(",").appendField(new eo.a.FieldTextInput("cogz"),"COGZ").appendField("}").appendField(",").appendField("{").appendField(new eo.a.FieldTextInput("q1"),"Q1").appendField(",").appendField(new eo.a.FieldTextInput("q2"),"Q2").appendField(",").appendField(new eo.a.FieldTextInput("q3"),"Q3").appendField(",").appendField(new eo.a.FieldTextInput("q4"),"Q4").appendField("}").appendField(",").appendField(new eo.a.FieldTextInput("ix"),"IX").appendField(",").appendField(new eo.a.FieldTextInput("iy"),"IY").appendField(",").appendField(new eo.a.FieldTextInput("iz"),"IZ").appendField("}}"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(120),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.wobj_variate={init:function(){this.appendDummyInput().appendField("VAR wobj","FIRST_FIELD").appendField(new eo.a.FieldTextInput("wobj2",to),"VALUE").appendField("=").appendField("{").appendField(new eo.a.FieldDropdown([["FALSE","FALSE"],["TRUE","TRUE"]]),"DropDown1").appendField(",").appendField(new eo.a.FieldDropdown([["TRUE","TRUE"],["FALSE","FALSE"]]),"DropDown2").appendField(",").appendField(new eo.a.FieldTextInput('"robot"'),"name_string").appendField(",").appendField("{").appendField(new eo.a.FieldTextInput("x"),"X").appendField(",").appendField(new eo.a.FieldTextInput("y"),"Y").appendField(",").appendField(new eo.a.FieldTextInput("z"),"Z").appendField("}").appendField(",").appendField("{").appendField(new eo.a.FieldTextInput("q1"),"Q1").appendField(",").appendField(new eo.a.FieldTextInput("q2"),"Q2").appendField(",").appendField(new eo.a.FieldTextInput("q3"),"Q3").appendField(",").appendField(new eo.a.FieldTextInput("q4"),"Q4").appendField("}").appendField(",").appendField(new eo.a.FieldTextInput("id"),"ID").appendField("}"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(120),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.robotcontrol_movel={updateEndPQ:function(e){var t=this;[0,1,2,3,4,5,6].forEach(function(n){return t.setFieldValue(e[n].toFixed(6),"END_PQ".concat(n))}),this.workspace&&this.workspace.render()},isEndPQEmpty:function(){var e=this;return 7===[0,1,2,3,4,5,6].filter(function(t){return e.getFieldValue("END_PQ".concat(t))===1/0}).length},init:function(){var e=[1/0,1/0,1/0,1/0,1/0,1/0,1/0];this.workspace&&this.workspace.endPQ&&(e=this.workspace.endPQ.map(function(e){return e.toFixed(6)})),this.appendValueInput("END_PQ_INPUT").setCheck(null).appendField("MoveL --pq=").appendField(new eo.a.FieldNumber(e[0]),"END_PQ0").appendField(new eo.a.FieldNumber(e[1]),"END_PQ1").appendField(new eo.a.FieldNumber(e[2]),"END_PQ2").appendField(new eo.a.FieldNumber(e[3]),"END_PQ3").appendField(new eo.a.FieldNumber(e[4]),"END_PQ4").appendField(new eo.a.FieldNumber(e[5]),"END_PQ5").appendField(new eo.a.FieldNumber(e[6]),"END_PQ6"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip("Move L"),this.setHelpUrl("")}},eo.a.Blocks.robotcontrol_movej={updateEndPQ:function(e){var t=this;[0,1,2,3,4,5,6].forEach(function(n){return t.setFieldValue(e[n].toFixed(6),"END_PQ".concat(n))}),this.workspace&&this.workspace.render()},isEndPQEmpty:function(){var e=this;return 7===[0,1,2,3,4,5,6].filter(function(t){return e.getFieldValue("END_PQ".concat(t))===1/0}).length},init:function(){var e=[1/0,1/0,1/0,1/0,1/0,1/0,1/0];this.workspace&&this.workspace.endPQ&&(e=this.workspace.endPQ.map(function(e){return e.toFixed(3)})),this.appendValueInput("END_PQ_INPUT").setCheck(null).appendField("MoveJ --pq=").appendField(new eo.a.FieldNumber(e[0]),"END_PQ0").appendField(new eo.a.FieldNumber(e[1]),"END_PQ1").appendField(new eo.a.FieldNumber(e[2]),"END_PQ2").appendField(new eo.a.FieldNumber(e[3]),"END_PQ3").appendField(new eo.a.FieldNumber(e[4]),"END_PQ4").appendField(new eo.a.FieldNumber(e[5]),"END_PQ5").appendField(new eo.a.FieldNumber(e[6]),"END_PQ6"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip("Move J"),this.setHelpUrl("")}},eo.a.Blocks.math_function={init:function(){this.appendDummyInput().appendField(new eo.a.FieldDropdown([["sin","SIN"],["cos","COS"],["tan","TAN"],["cot","COT"],["asin","ASIN"],["atan","ATAN"],["atan2","ATAN2"],["acot","ACOT"],["abs","ABS"],["exp","EXP"],["sqrt","SQRT"]]),"DROPDOWN1").appendField(new eo.a.FieldTextInput("default"),"INPUT1"),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(290),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.while={init:function(){this.appendDummyInput().appendField("while"),this.appendValueInput("value1").setCheck(null),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(330),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.wait={init:function(){this.appendDummyInput().appendField("wait").appendField(new eo.a.FieldTextInput("0"),"NUM"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(330),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.pause={init:function(){this.appendDummyInput().appendField("pause"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(330),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.wait_until={init:function(){this.appendDummyInput().appendField("WaitUntil"),this.appendValueInput("NAME").setCheck(null),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(65),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.setdo={init:function(){this.appendDummyInput().appendField("SetDO").appendField(new eo.a.FieldTextInput("default"),"INPUT1").appendField(new eo.a.FieldDropdown([["True","TRUE"],["False","FALSE"]]),"DROPDOWN1"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(65),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.movej={init:function(){this.appendDummyInput().appendField("MoveJ").appendField(new eo.a.FieldDropdown([["ToPoint","TOPOINT"]]),"DROPDOWN1").appendField(",").appendField(new eo.a.FieldDropdown([["null","null"]]),"DROPDOWN2").appendField(",").appendField(new eo.a.FieldDropdown([["null","null"]]),"DROPDOWN3").appendField(",").appendField(new eo.a.FieldDropdown([["null","null"]]),"DROPDOWN4").appendField(",").appendField("[").appendField(new eo.a.FieldDropdown([["null","null"]]),"DROPDOWN5").appendField("]"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.moveabsj={init:function(){this.appendDummyInput().appendField("MoveabsJ").appendField(new eo.a.FieldDropdown([["ToJointPos","ToJointPos"],["option","OPTIONNAME"],["option","OPTIONNAME"]]),"DROPDOWN1").appendField(",").appendField(new eo.a.FieldDropdown([["null","null"]]),"DROPDOWN2").appendField(",").appendField(new eo.a.FieldDropdown([["null","null"]]),"DROPDOWN3").appendField(",").appendField(new eo.a.FieldDropdown([["null","null"]]),"DROPDOWN4").appendField(",").appendField("[").appendField(new eo.a.FieldDropdown([["null","null"]]),"DROPDOWN5").appendField("]"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.movel={init:function(){this.appendDummyInput().appendField("MoveL").appendField(new eo.a.FieldDropdown([["ToPoint","ToPoint"]]),"DROPDOWN1").appendField(",").appendField(new eo.a.FieldDropdown([["null","null"]]),"DROPDOWN2").appendField(",").appendField(new eo.a.FieldDropdown([["null","null"]]),"DROPDOWN3").appendField(",").appendField(new eo.a.FieldDropdown([["null","null"]]),"DROPDOWN4").appendField(",").appendField("[").appendField(new eo.a.FieldDropdown([["null","null"]]),"DROPDOWN5").appendField("]"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.movec={init:function(){this.appendDummyInput().appendField("MoveC").appendField(new eo.a.FieldDropdown([["AuxPoint","AuxPoint"]]),"DROPDOWN1").appendField(",").appendField(new eo.a.FieldDropdown([["ToPoint","ToPoint"]]),"DROPDOWN2").appendField(",").appendField(new eo.a.FieldDropdown([["null","null"]]),"DROPDOWN3").appendField(",").appendField(new eo.a.FieldDropdown([["null","null"]]),"DROPDOWN4").appendField(",").appendField(new eo.a.FieldDropdown([["null","null"]]),"DROPDOWN5").appendField(",").appendField("[").appendField(new eo.a.FieldDropdown([["null","null"]]),"DROPDOWN6").appendField("]"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.else={init:function(){this.appendDummyInput().appendField("else"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(330),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.if={init:function(){this.appendDummyInput().appendField("if"),this.appendValueInput("input1").setCheck(null),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(330),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.end_if={init:function(){this.appendDummyInput().appendField("endif"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(330),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.end_while={init:function(){this.appendDummyInput().appendField("endwhile"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(330),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.simple_arithmetic={init:function(){this.appendDummyInput().appendField(new eo.a.FieldTextInput("value1"),"VALUE1").appendField(new eo.a.FieldDropdown([["+","sum"],["-","subtract"],["*","multiply"],["/","div"]]),"NAME").appendField(new eo.a.FieldTextInput("value2"),"VALUE2"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(290),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.fcpressp={init:function(){this.appendDummyInput().appendField("FCPressP").appendField("=").appendField("{").appendField(new eo.a.FieldTextInput("p1"),"P1").appendField(new eo.a.FieldTextInput("p2"),"P2").appendField(new eo.a.FieldTextInput("p3"),"P3").appendField(new eo.a.FieldTextInput("p4"),"P4").appendField(new eo.a.FieldTextInput("p5"),"P5").appendField(",").appendField(new eo.a.FieldTextInput("Force"),"FORCE").appendField(new eo.a.FieldTextInput("Tool"),"TOOL").appendField(new eo.a.FieldTextInput("Wobj"),"WOBJ").appendField("}"),this.setColour(230),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.fcpressl={init:function(){this.appendDummyInput().appendField("FCPressL").appendField(new eo.a.FieldTextInput("Force"),"FORCE").appendField(new eo.a.FieldTextInput("Tool"),"TOOL").appendField(new eo.a.FieldTextInput("Wobj"),"WOBJ"),this.setColour(230),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.fcpresss={init:function(){this.appendDummyInput().appendField("FCPressS").appendField(new eo.a.FieldTextInput("Force"),"FORCE").appendField(new eo.a.FieldTextInput("Tool"),"TOOL").appendField(new eo.a.FieldTextInput("Wobj"),"WOBJ"),this.setColour(230),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.fcpresss={init:function(){this.appendDummyInput().appendField("FCPressS").appendField(new eo.a.FieldTextInput("Force"),"FORCE").appendField(new eo.a.FieldTextInput("Tool"),"TOOL").appendField(new eo.a.FieldTextInput("Wobj"),"WOBJ"),this.setColour(230),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Blocks.controls_if_self={init:function(){this.appendValueInput("IF0").setCheck("Boolean").appendField("if"),this.appendStatementInput("DO0").setCheck(null).appendField("do"),this.appendDummyInput().appendField("end_if"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(330),this.setTooltip(""),this.setHelpUrl("")}},eo.a.Robot=new eo.a.Generator("Robot"),eo.a.Robot.addReservedWords("Blockly,Robot"),eo.a.Robot.ORDER_ATOMIC=0,eo.a.Robot.ORDER_NEW=1.1,eo.a.Robot.ORDER_MEMBER=1.2,eo.a.Robot.ORDER_FUNCTION_CALL=2,eo.a.Robot.ORDER_INCREMENT=3,eo.a.Robot.ORDER_DECREMENT=3,eo.a.Robot.ORDER_BITWISE_NOT=4.1,eo.a.Robot.ORDER_UNARY_PLUS=4.2,eo.a.Robot.ORDER_UNARY_NEGATION=4.3,eo.a.Robot.ORDER_LOGICAL_NOT=4.4,eo.a.Robot.ORDER_TYPEOF=4.5,eo.a.Robot.ORDER_VOID=4.6,eo.a.Robot.ORDER_DELETE=4.7,eo.a.Robot.ORDER_AWAIT=4.8,eo.a.Robot.ORDER_EXPONENTIATION=5,eo.a.Robot.ORDER_MULTIPLICATION=5.1,eo.a.Robot.ORDER_DIVISION=5.2,eo.a.Robot.ORDER_MODULUS=5.3,eo.a.Robot.ORDER_SUBTRACTION=6.1,eo.a.Robot.ORDER_ADDITION=6.2,eo.a.Robot.ORDER_BITWISE_SHIFT=7,eo.a.Robot.ORDER_RELATIONAL=8,eo.a.Robot.ORDER_IN=8,eo.a.Robot.ORDER_INSTANCEOF=8,eo.a.Robot.ORDER_EQUALITY=9,eo.a.Robot.ORDER_BITWISE_AND=10,eo.a.Robot.ORDER_BITWISE_XOR=11,eo.a.Robot.ORDER_BITWISE_OR=12,eo.a.Robot.ORDER_LOGICAL_AND=13,eo.a.Robot.ORDER_LOGICAL_OR=14,eo.a.Robot.ORDER_CONDITIONAL=15,eo.a.Robot.ORDER_ASSIGNMENT=16,eo.a.Robot.ORDER_YIELD=17,eo.a.Robot.ORDER_COMMA=18,eo.a.Robot.ORDER_NONE=99,eo.a.Robot.ORDER_OVERRIDES=[[eo.a.Robot.ORDER_FUNCTION_CALL,eo.a.Robot.ORDER_MEMBER],[eo.a.Robot.ORDER_FUNCTION_CALL,eo.a.Robot.ORDER_FUNCTION_CALL],[eo.a.Robot.ORDER_MEMBER,eo.a.Robot.ORDER_MEMBER],[eo.a.Robot.ORDER_MEMBER,eo.a.Robot.ORDER_FUNCTION_CALL],[eo.a.Robot.ORDER_LOGICAL_NOT,eo.a.Robot.ORDER_LOGICAL_NOT],[eo.a.Robot.ORDER_MULTIPLICATION,eo.a.Robot.ORDER_MULTIPLICATION],[eo.a.Robot.ORDER_ADDITION,eo.a.Robot.ORDER_ADDITION],[eo.a.Robot.ORDER_LOGICAL_AND,eo.a.Robot.ORDER_LOGICAL_AND],[eo.a.Robot.ORDER_LOGICAL_OR,eo.a.Robot.ORDER_LOGICAL_OR]],eo.a.Robot.init=function(e){eo.a.Robot.definitions_=Object.create(null),eo.a.Robot.functionNames_=Object.create(null),eo.a.Robot.letiableDB_?eo.a.Robot.letiableDB_.reset():eo.a.Robot.letiableDB_=new eo.a.Names(eo.a.Robot.RESERVED_WORDS_),eo.a.Robot.letiableDB_.setVariableMap(e.getVariableMap());for(var t=[],n=eo.a.Variables.allDeveloperVariables(e),a=0;a<n.length;a++)t.push(eo.a.Robot.letiableDB_.getName(n[a],eo.a.Names.DEVELOPER_VARIABLE_TYPE));for(var r=eo.a.Variables.allUsedVarModels(e),o=0;o<r.length;o++)t.push(eo.a.Robot.letiableDB_.getName(r[o].getId(),eo.a.Variables.NAME_TYPE));t.length&&(eo.a.Robot.definitions_.letiables="let "+t.join(", ")+";")},eo.a.Robot.finish=function(e){var t=[];for(var n in eo.a.Robot.definitions_)t.push(eo.a.Robot.definitions_[n]);return delete eo.a.Robot.definitions_,delete eo.a.Robot.functionNames_,eo.a.Robot.letiableDB_.reset(),t.join("\n\n")+"\n\n\n"+e},eo.a.Robot.scrubNakedValue=function(e){return e+";\n"},eo.a.Robot.quote_=function(e){return"'"+(e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},eo.a.Robot.scrub_=function(e,t,n){var a="";if(!e.outputConnection||!e.outputConnection.targetConnection){var r=e.getCommentText();(r=eo.a.utils.string.wrap(r,eo.a.Robot.COMMENT_WRAP-3))&&(e.getProcedureDef?a+="/**\n"+eo.a.Robot.prefixLines(r+"\n"," * ")+" */\n":a+=eo.a.Robot.prefixLines(r+"\n","// "));for(var o=0;o<e.inputList.length;o++)if(e.inputList[o].type==eo.a.INPUT_VALUE){var l=e.inputList[o].connection.targetBlock();if(l){var c=eo.a.Robot.allNestedComments(l);c&&(a+=eo.a.Robot.prefixLines(c,"// "))}}}var s=e.nextConnection&&e.nextConnection.targetBlock(),i=n?"":eo.a.Robot.blockToCode(s);return"".concat(a).concat(a?"\n":"").concat(t).concat(t?"\n":"").concat(i)},eo.a.Robot.getAdjusted=function(e,t,n,a,r){var o=n||0,l=r||eo.a.Robot.ORDER_NONE;e.workspace.options.oneBasedIndex&&o--;var c=e.workspace.options.oneBasedIndex?"1":"0",s="";if(s=o>0?eo.a.Robot.valueToCode(e,t,eo.a.Robot.ORDER_ADDITION)||c:o<0?eo.a.Robot.valueToCode(e,t,eo.a.Robot.ORDER_SUBTRACTION)||c:a?eo.a.Robot.valueToCode(e,t,eo.a.Robot.ORDER_UNARY_NEGATION)||c:eo.a.Robot.valueToCode(e,t,l)||c,eo.a.isNumber(s))s=parseFloat(s)+o,a&&(s=-s);else{var i=null;o>0?(s=s+" + "+o,i=eo.a.Robot.ORDER_ADDITION):o<0&&(s=s+" - "+-o,i=eo.a.Robot.ORDER_SUBTRACTION),a&&(s=o?"-("+s+")":"-"+s,i=eo.a.Robot.ORDER_UNARY_NEGATION),i=Math.floor(i),l=Math.floor(l),i&&l>=i&&(s="("+s+")")}return s},eo.a.Robot.robotcontrol_movejr=function(e){var t="moveJR -m="+e.getFieldValue("M_SELECT")+" --pos="+e.getFieldValue("JOINT_ANGLE")/180*3.14*e.getFieldValue("DIR");return"".concat(e.id).concat(t)},eo.a.Robot.robotcontrol_movel=function(e){var t=[0,1,2,3,4,5,6].map(function(t){return e.getFieldValue("END_PQ".concat(t))}).join(",");return"".concat(e.id,"mvl --pq={").concat(t,"}")},eo.a.Robot.robotcontrol_movej=function(e){var t=[0,1,2,3,4,5,6].map(function(t){return e.getFieldValue("END_PQ".concat(t))}).join(",");return"".concat(e.id,"mvj --pq={").concat(t,"}")},eo.a.Robot.fcpressp=function(e){e.getFieldValue("P1"),e.getFieldValue("P2"),e.getFieldValue("P3"),e.getFieldValue("P4"),e.getFieldValue("P5"),e.getFieldValue("FORCE"),e.getFieldValue("TOOL"),e.getFieldValue("WOBJ");return"".concat(e.id).concat("FCPressP")},eo.a.Robot.fcpressl=function(e){e.getFieldValue("FORCE"),e.getFieldValue("TOOL"),e.getFieldValue("WOBJ");return"".concat(e.id).concat("FCPressL")},eo.a.Robot.fcpresss=function(e){e.getFieldValue("FORCE"),e.getFieldValue("TOOL"),e.getFieldValue("WOBJ");return"".concat(e.id).concat("FCPressS")},eo.a.Robot.math_function=function(e){e.getFieldValue("DROPDOWN1"),e.getFieldValue("INPUT1");return["...",eo.a.JavaScript.ORDER_NONE]},eo.a.Robot.while=function(e){eo.a.JavaScript.valueToCode(e,"VALUE1",eo.a.JavaScript.ORDER_ATOMIC);return"".concat(e.id).concat("while")},eo.a.Robot.wait=function(e){e.getFieldValue("NUM");return"".concat(e.id).concat("wait")},eo.a.Robot.pause=function(e){return"".concat(e.id).concat("pause")},eo.a.Robot.wait_until=function(e){eo.a.JavaScript.valueToCode(e,"NAME",eo.a.JavaScript.ORDER_ATOMIC);return"".concat(e.id).concat("wait_until")},eo.a.Robot.setdo=function(e){e.getFieldValue("INPUT1"),e.getFieldValue("DROPDOWN1");return"".concat(e.id).concat("")},eo.a.Robot.movej=function(e){e.getFieldValue("DROPDOWN1"),e.getFieldValue("DROPDOWN2"),e.getFieldValue("DROPDOWN3"),e.getFieldValue("DROPDOWN4"),e.getFieldValue("DROPDOWN5");return"".concat(e.id).concat("...;\n")},eo.a.Robot.moveabsj=function(e){e.getFieldValue("DROPDOWN1"),e.getFieldValue("DROPDOWN2"),e.getFieldValue("DROPDOWN3"),e.getFieldValue("DROPDOWN4"),e.getFieldValue("DROPDOWN5");return"".concat(e.id).concat("...;\n")},eo.a.Robot.movel=function(e){e.getFieldValue("DROPDOWN1"),e.getFieldValue("DROPDOWN2"),e.getFieldValue("DROPDOWN3"),e.getFieldValue("DROPDOWN4"),e.getFieldValue("DROPDOWN5");return"".concat(e.id).concat("...;\n")},eo.a.Robot.else=function(e){return"".concat(e.id).concat("...;\n")},eo.a.Robot.if=function(e){eo.a.JavaScript.valueToCode(e,"INPUT1",eo.a.JavaScript.ORDER_ATOMIC);return"".concat(e.id).concat("...;\n")},eo.a.Robot.end_if=function(e){return"".concat(e.id).concat("...;\n")},eo.a.Robot.end_while=function(e){return"".concat(e.id).concat("...;\n")},eo.a.Robot.simple_arithmetic=function(e){e.getFieldValue("VALUE1"),e.getFieldValue("NAME"),e.getFieldValue("VALUE2");return"".concat(e.id).concat("...;\n")},eo.a.Robot.base_variate=function(e){var t=e.getFieldValue("DROPDOWN1");if("array"==t){var n="VAR "+t+" "+e.getFieldValue("INPUT1")+" "+e.getFieldValue("INPUT2")+"="+e.getFieldValue("RESULT")+"\n";return"".concat(e.id).concat(n)}var a="VAR "+t+" "+e.getFieldValue("INPUT1")+"="+e.getFieldValue("RESULT")+"\n";return"".concat(e.id).concat(a)},eo.a.Robot.load_variate=function(e){var t="VAR load "+e.getFieldValue("VARIABLE")+"={"+e.getFieldValue("MASS")+",{"+e.getFieldValue("COGX")+","+e.getFieldValue("COGY")+","+e.getFieldValue("COGZ")+"},{"+e.getFieldValue("Q1")+","+e.getFieldValue("Q2")+","+e.getFieldValue("Q3")+","+e.getFieldValue("Q4")+"},{"+e.getFieldValue("IX")+","+e.getFieldValue("IY")+","+e.getFieldValue("IZ")+"\n";return"".concat(e.id).concat(t)},eo.a.Robot.pose_variate=function(e){var t="VAR pose "+e.getFieldValue("POSE1")+"={{"+e.getFieldValue("X")+","+e.getFieldValue("Y")+","+e.getFieldValue("Z")+"},{"+e.getFieldValue("Q1")+","+e.getFieldValue("Q2")+","+e.getFieldValue("Q3")+","+e.getFieldValue("Q4")+"}};\n";return"".concat(e.id).concat(t)},eo.a.Robot.jointtarget_variate=function(e){var t="VAR jointtarget "+e.getFieldValue("HOME")+"={{"+e.getFieldValue("J1")+","+e.getFieldValue("J2")+","+e.getFieldValue("J3")+","+e.getFieldValue("J4")+",text_j5,"+e.getFieldValue("J5")+","+e.getFieldValue("J6")+"}{"+e.getFieldValue("EJ")+"}};\n";return"".concat(e.id).concat(t)},eo.a.Robot.robtarget_variate=function(e){var t="VAR robtarget "+e.getFieldValue("INPUT1")+"={{"+e.getFieldValue("X")+","+e.getFieldValue("Y")+","+e.getFieldValue("Z")+"},{"+e.getFieldValue("Q1")+","+e.getFieldValue("Q2")+","+e.getFieldValue("Q3")+","+e.getFieldValue("Q4")+"}};\n";return"".concat(e.id).concat(t)},eo.a.Robot.speed_variate=function(e){var t="VAR speed "+e.getFieldValue("V1")+"={"+e.getFieldValue("TER")+","+e.getFieldValue("TCP")+","+e.getFieldValue("ORI")+","+e.getFieldValue("EXJ_R")+","+e.getFieldValue("EXJ_L")+"}\n";return"".concat(e.id).concat(t)},eo.a.Robot.zone_variate=function(e){var t="VAR zone "+e.getFieldValue("INPUT1")+"={"+e.getFieldValue("DIS")+","+e.getFieldValue("PER")+"};\n";return"".concat(e.id).concat(t)},eo.a.Robot.tool_variate=function(e){e.getFieldValue("INPUT1"),e.getFieldValue("CHOOSE"),e.getFieldValue("X"),e.getFieldValue("Y"),e.getFieldValue("Z"),e.getFieldValue("A1"),e.getFieldValue("A2"),e.getFieldValue("A3"),e.getFieldValue("A4"),e.getFieldValue("MASS"),e.getFieldValue("COGX"),e.getFieldValue("COGY"),e.getFieldValue("COGZ"),e.getFieldValue("Q1"),e.getFieldValue("Q2"),e.getFieldValue("Q3"),e.getFieldValue("Q4"),e.getFieldValue("IX"),e.getFieldValue("IY"),e.getFieldValue("IZ");return"".concat(e.id).concat("VAR tool ...;\n")},eo.a.Robot.wobj_variate=function(e){e.getFieldValue("VALUE"),e.getFieldValue("DROPDOWN1"),e.getFieldValue("DROPDOWN2"),e.getFieldValue("NAME_STRING"),e.getFieldValue("X"),e.getFieldValue("Y"),e.getFieldValue("Z"),e.getFieldValue("Q1"),e.getFieldValue("Q2"),e.getFieldValue("Q3"),e.getFieldValue("Q4"),e.getFieldValue("ID");return"".concat(e.id).concat("...;\n")};var ao=n(61),ro=n.n(ao),oo=n(344),lo=n(197),co=[{name:"\u57fa\u672c\u6307\u4ee4",blocks:[{type:"base_variate",fields:{NAME:"VAR",DROPDOWN1:"int",INPUT1:"p1",RESULT:"result"}}]},{name:"\u7ed3\u6784\u4f53\u53d8\u91cf",blocks:[{type:"load_variate",fields:{VARIABLE:"piece1",MASS:"mass",COGX:"cogx",COGY:"cogy",COGZ:"cogz",Q1:"q1",Q2:"q2",Q3:"q3",Q4:"q4",IX:"ix",IY:"iy",IZ:"iz"}},{type:"pose_variate",fields:{pose1:"pose1",X:"x",Y:"y",Z:"z",Q1:"q1",Q2:"q2",Q3:"q3",Q4:"q4"}},{type:"jointtarget_variate",fields:{HOME:"home",J1:"J1",J2:"J2",J3:"J3",J4:"J4",J5:"J5",J6:"J6",EJ:"EJ"}},{type:"robtarget_variate",fields:{INPUT1:"input1",X:"x",Y:"y",Z:"z",Q1:"q1",Q2:"q2",Q3:"q3",Q4:"q4"}},{type:"speed_variate",fields:{V1:"v1",TER:"ter",TCP:"tcp",ORI:"ori",EXJ_R:"exj_r",EXJ_L:"exj_l"}},{type:"zone_variate",fields:{INPUT1:"z100",DIS:"dis",PER:"per"}},{type:"tool_variate",fields:{INPUT1:"tool2",CHOOSE:"true",X:"x",Y:"y",Z:"z",A1:"q1",A2:"q2",A3:"q3",A4:"q4",MASS:"mass",COGX:"cogx",COGY:"cogy",COGZ:"cogz",Q1:"q1",Q2:"q2",Q3:"q3",Q4:"q4",IX:"ix",IY:"iy",IZ:"iz"}},{type:"wobj_variate",fields:{VALUE:"wobj2",DROPDOWN1:"FALSE",DROPDOWN2:"TRUE",NAME_STRING:"robot",X:"x",Y:"y",Z:"z",Q1:"q1",Q2:"q2",Q3:"q3",Q4:"q4",ID:"id"}}]}],so=[{name:"\u6570\u5b66\u6307\u4ee4",blocks:[{type:"math_function",fields:{FROPDOWN1:"sin",INPUT1:"default"}},{type:"simple_arithmetic",fields:{VALUE1:"value1",NAME:"sum",VALUE2:"value2"}}]},{name:"\u903b\u8f91\u6307\u4ee4",blocks:[{type:"controls_if_self"},{type:"while"},{type:"end_while"},{type:"wait",fields:{NUM:0}}]},{name:"IO\u6307\u4ee4",blocks:[{type:"wait_until"},{type:"setdo",fields:{INPUT1:"default",DROPDOWN1:"True"}}]},{name:"\u8fd0\u52a8\u6307\u4ee4",blocks:[{type:"moveabsj",fields:{DROPDOWN1:"ToJointPos",DROPDOWN2:"Speed",DROPDOWN3:"Zone",DROPDOWN4:"Tool",DROPDOWN5:"Wobj"}},{type:"movec",fields:{DROPDOWN1:"AuxPoint",DROPDOWN2:"ToPoint",DROPDOWN3:"Speed",DROPDOWN4:"Zone",DROPDOWN5:"Tool",DROPDOWN6:"Wobj"}},{type:"robotcontrol_movel",fields:{}},{type:"robotcontrol_movej",fields:{}}]},{name:"\u529b\u63a7\u6307\u4ee4",blocks:[{type:"fcpressp",fields:{NAME:"name",P1:"p1",P2:"p2",P3:"p3",P4:"p4",P5:"p5",DROPDOWN1:"Force",DROPDOWN2:"Tool",DROPDOWN5:"Wobj"}},{type:"fcpressl",fields:{FCPressL:"FCPressL",NAME:"name",DROPDOWN1:"Force",DROPDOWN2:"Tool",DROPDOWN3:"Wobj"}},{type:"fcpresss",fields:{FCPressS:"FCPressS",NAME:"name",DROPDOWN1:"Force",DROPDOWN2:"Tool",DROPDOWN3:"Wobj"}}]}];function io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function uo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?io(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):io(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var po=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={variablesToolboxCategories:co,programToolboxCategories:so,looping:!1},n.rowIdMap={},n.debug=function(){var e=n.props,t=e.sendCmd,a=e.cell,r=e.currentPlanId,o=r<=Object.keys(n.rowIdMap).length&&r>0;if(o)n.state.debugging&&o&&t("run --forward",a.i);else{n.setState({running:!1,debugging:!0,looping:!1}),n.rowIdMap={};var l=[];if(n.variablesWorkspace){var c=eo.a.Robot.workspaceToCode(n.variablesWorkspace);c&&""!==c.trim()&&c.split("\n").forEach(function(e){""!==e.slice(0,20).trim()&&(l.push("".concat(l.length+1,":").concat(e.slice(20),"\\r\\n ")),n.rowIdMap[l.length]=e.slice(0,20))})}if(n.programWorkspace){var s=eo.a.Robot.workspaceToCode(n.programWorkspace);s&&""!==s.trim()&&s.split("\n").forEach(function(e){""!==e.slice(0,20).trim()&&(l.push("".concat(l.length+1,":").concat(e.slice(20),"\\r\\n ")),n.rowIdMap[l.length]=e.slice(0,20))})}l.length>0&&(t("collectcmd --cmdlist={".concat(l.join("").trim(),"}"),a.i),t("run --forward",a.i))}},n.tryStart=function(){var e=n.props,t=e.sendCmd,a=e.cell,r=e.currentPlanId;if(!(r<=Object.keys(n.rowIdMap).length&&r>0)){var o=[];if(n.rowIdMap={},n.variablesWorkspace){var l=eo.a.Robot.workspaceToCode(n.variablesWorkspace);l&&""!==l.trim()&&l.split("\n").forEach(function(e){""!==e.slice(0,20).trim()&&(o.push("".concat(o.length+1,":").concat(e.slice(20),"\\r\\n ")),n.rowIdMap[o.length]=e.slice(0,20))})}if(n.programWorkspace){var c=eo.a.Robot.workspaceToCode(n.programWorkspace);c&&""!==c.trim()&&c.split("\n").forEach(function(e){""!==e.slice(0,20).trim()&&(o.push("".concat(o.length+1,":").concat(e.slice(20),"\\r\\n ")),n.rowIdMap[o.length]=e.slice(0,20))})}o.length>0&&(t("collectcmd --cmdlist={".concat(o.join("").trim(),"}"),a.i),t("run --start",a.i))}},n.tryStop=function(){var e=n.props,t=e.cell,a=e.currentPlanId,r=e.sendCmd;a<=Object.keys(n.rowIdMap).length&&a>0&&r("run --stop",t.i)},n.loop=function(){var e=n.props,t=(e.sendCmd,e.cell,e.currentPlanId);Object.keys(n.rowIdMap).length;n.state.looping?n.state.looping&&(n.setState({looping:!1}),n.tryStop()):(n.setState({looping:!0,running:!1,debugging:!1}),n.tryStart())},n.run=function(){n.state.running?n.state.running&&(n.setState({running:!1}),n.tryStop()):(n.setState({running:!0,debugging:!1,looping:!1}),n.tryStart())},n.variablesWorkspaceDidChange=function(e){var t=n.props.program,a=eo.a.Xml.domToText(eo.a.Xml.workspaceToDom(e));if(t){var r=uo({},t);r.files=Object(b.a)(r.files),r.files.forEach(function(e,n){e.name===t.name+".dat"&&(r.files[n]=uo({},e,{content:a}))}),n.props.updateProgram(t.name,r)}},n.programWorkspaceDidChange=function(e){console.log(eo.a.Robot.workspaceToCode(e));var t=n.props.program,a=eo.a.Xml.domToText(eo.a.Xml.workspaceToDom(e));if(t){var r=uo({},t);r.files=Object(b.a)(r.files),r.files.forEach(function(e,n){e.name===t.name+".pro"&&(r.files[n]=uo({},e,{content:a}))}),n.props.updateProgram(t.name,r)}},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"componentDidUpdate",value:function(e,t,n){if(e.size.width!==this.props.size.width||e.size.height!==this.props.size.height){var a=this;clearTimeout(a.timer),a.timer=setTimeout(function(){a.programWorkspace&&eo.a.svgResize(a.programWorkspace),a.variablesWorkspace&&eo.a.svgResize(a.variablesWorkspace)},50)}e.currentPlanId!==this.props.currentPlanId&&(this.rowIdMap[this.props.currentPlanId]&&this.programWorkspace&&this.programWorkspace.highlightBlock(this.rowIdMap[this.props.currentPlanId],!0),this.rowIdMap[e.currentPlanId]&&this.programWorkspace&&this.programWorkspace.highlightBlock(this.rowIdMap[e.currentPlanId],!1),this.props.currentPlanId>Object.keys(this.rowIdMap).length&&this.state.looping&&this.tryStart())}},{key:"shouldComponentUpdate",value:function(e,t,n){return e.endPQ!==this.props.endPQ&&this.programWorkspace&&e.endPQ&&(this.programWorkspace.endPQ=e.endPQ,this.programWorkspace.getAllBlocks().forEach(function(t){t.updateEndPQ&&t.isEndPQEmpty&&t.isEndPQEmpty()&&t.updateEndPQ(e.endPQ)})),!0}},{key:"render",value:function(){var e=this,t=this,n=t.props,a=n.prefixCls,l=n.size,c=l.width,s=l.height,i=n.program,u=n.options,d=n.currentPlanId,p=this.state,m=p.running,f=p.debugging,b=p.looping,g=d<=Object.keys(this.rowIdMap).length&&d>0,h="",O="";i&&i.files&&i.files.forEach(function(e){e.name===i.name+".dat"&&(O=e.content),e.name===i.name+".pro"&&(h=e.content)});var v=u.variablesHeight?parseFloat(u.variablesHeight):200;v<=50&&(v=50);var E=s-v-5;return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"".concat(a,"-editors")},!!O&&!u.hideVariablesWorkspace&&o.a.createElement(lo.ResizableBox,{width:c,height:v,minConstraints:[c,100],maxConstraints:[c,s-30-100],className:"".concat(a,"-editors-variables"),axis:"y",handle:o.a.createElement("div",{className:"".concat(a,"-divider")}),onResize:function(e,n){var a=n.size,r=a.height;a.width;t.props.updateOptions(uo({},u,{variablesHeight:r})),t.programWorkspace&&eo.a.svgResize(t.programWorkspace),t.variablesWorkspace&&eo.a.svgResize(t.variablesWorkspace)}},o.a.createElement(oo.a.BlocklyEditor,{ref:function(t){t&&t.workspace&&t.workspace.state&&(e.variablesWorkspace=t.workspace.state.workspace)},toolboxCategories:this.state.variablesToolboxCategories,initialXml:O,workspaceConfiguration:{grid:{spacing:20,length:3,colour:"#ccc",snap:!0}},wrapperDivClassName:"".concat(a,"-full-height"),workspaceDidChange:this.variablesWorkspaceDidChange})),!!h&&o.a.createElement("div",{className:"".concat(a,"-editors-program ").concat(u.hideVariablesWorkspace?"".concat(a,"-editors-program-full-height"):""),style:{height:E}},o.a.createElement(oo.a.BlocklyEditor,{ref:function(t){t&&t.workspace&&t.workspace.state&&(e.programWorkspace=t.workspace.state.workspace)},toolboxCategories:this.state.programToolboxCategories,initialXml:h,workspaceConfiguration:{grid:{spacing:20,length:3,colour:"#ccc",snap:!0}},wrapperDivClassName:"".concat(a,"-full-height"),workspaceDidChange:this.programWorkspaceDidChange}),o.a.createElement(ro.a,{placement:"bottom",title:u.hideVariablesWorkspace?"\u663e\u793a\u53d8\u91cf\u5b9a\u4e49":"\u9690\u85cf\u53d8\u91cf\u5b9a\u4e49"},o.a.createElement(w.a,{type:"double-right",className:"".concat(a,"-editors-program-toggle"),onClick:function(){e.props.updateOptions(uo({},u,{hideVariablesWorkspace:!u.hideVariablesWorkspace}))}})))),o.a.createElement("div",{className:"".concat(a,"-operations")},o.a.createElement("div",{className:"".concat(a,"-operations-left")},!!u.hideSidebar&&o.a.createElement(w.a,{type:"double-right",className:"".concat(a,"-sidebar-toggle"),onClick:function(){e.props.updateOptions(uo({},u,{hideSidebar:""}))}}),!u.hideSidebar&&o.a.createElement(w.a,{type:"double-left",className:"".concat(a,"-sidebar-toggle"),onClick:function(){e.props.updateOptions(uo({},u,{hideSidebar:"true"}))}}),o.a.createElement("span",{className:"".concat(a,"-operations-left-name")},i.name)),o.a.createElement(Lt.a,{size:"small",type:"primary",disabled:(f||m)&&g,onClick:this.loop},b?"\u505c\u6b62\u5faa\u73af":"\u5faa\u73af\u8fd0\u884c"),o.a.createElement(Lt.a,{size:"small",type:"primary",onClick:this.debug,disabled:m&&g||b},f&&g?"\u4e0b\u4e00\u6b65":"\u8c03\u8bd5"),f&&g&&o.a.createElement(Lt.a,{size:"small",type:"primary",onClick:function(){e.tryStop()}}," \u505c\u6b62"),!(f&&g)&&o.a.createElement(Lt.a,{size:"small",type:"primary",onClick:this.run,disabled:f&&g||b},m&&g?"\u505c\u6b62":"\u8fd0\u884c")))}}]),t}(r.Component),mo=Object(Ue.a)(Ye,dt,function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.current_plan_id},rt,function(e,t,n,a){return{result:e,currentPlan:t,currentPlanId:n,endPQ:a}});var fo=Object(s.b)(function(e,t){return mo(e,t)},{deleteResultByChannel:se,loadPrograms:Fe,loadProgram:Se,createProgram:xe,deleteProgram:De,updateProgram:function(e,t){return U(Ne,{name:e,program:t})},renameProgram:Le,sendCmd:ce})(Object(h.withSize)({monitorHeight:!0,refreshRate:30})(po)),bo=Nn.a.Item,go=(Mn.a.Group,Mn.a.Button,function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault();var t=n.props.createProgram;n.props.form.validateFields(function(e,n){e?console.error(e):t(n)})},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.toggleCreateProgramModal,n=e.prefixCls,a=e.creatingProgramStatus,r=this.props.form.getFieldDecorator;return o.a.createElement(sn.a,{title:"\u6dfb\u52a0\u7a0b\u5e8f",visible:!!a.showCreateProgramModal,okText:"\u521b\u5efa",cancelText:"\u53d6\u6d88",onOk:this.handleSubmit,onCancel:t,wrapClassName:"".concat(n,"-create-program-modal")},o.a.createElement(Nn.a,null,o.a.createElement(bo,{label:"\u540d\u79f0",className:"".concat(n,"-input-col")},r("name",{rules:[{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u7a0b\u5e8f\u540d\u79f0"}]})(o.a.createElement(En.a,{size:"small",disabled:!!a.creatingProgram})))),o.a.createElement("div",{className:"".concat(n,"-status")},!!a.creatingProgram&&o.a.createElement("div",{className:"info"},"\u521b\u5efa\u4e2d..."),!!a.creatingProgramFailure&&o.a.createElement("div",{className:"error"},"\u521b\u5efa\u9519\u8bef: ",a.creatingProgramFailure),!!a.creatingProgramSuccess&&o.a.createElement("div",{className:"success"},"\u521b\u5efa\u6210\u529f")))}}]),t}(r.Component)),ho=Nn.a.create()(go),Oo=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault();var t=n.props;(0,t.deleteProgram)(t.deletingProgramStatus.showDeleteProgramModal)},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.toggleDeleteProgramModal,n=e.prefixCls,a=e.deletingProgramStatus;return o.a.createElement(sn.a,{title:"\u5220\u9664\u7a0b\u5e8f",visible:!!a.showDeleteProgramModal,okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:this.handleSubmit,onCancel:function(){return t()},wrapClassName:"".concat(n,"-delete-program-modal")},o.a.createElement("div",{className:"info"},"\u662f\u5426\u786e\u8ba4\u5220\u9664",!0!==a.showDeleteProgramModal?' "'.concat(a.showDeleteProgramModal,'" '):"","!"),o.a.createElement("div",{className:"".concat(n,"-status")},!!a.deletingProgram&&o.a.createElement("div",{className:"info"},"\u5220\u9664\u4e2d..."),!!a.deletingProgramFailure&&o.a.createElement("div",{className:"error"},"\u5220\u9664\u9519\u8bef: ",a.deletingProgramFailure),!!a.deletingProgramSuccess&&o.a.createElement("div",{className:"success"},"\u5220\u9664\u6210\u529f")))}}]),t}(r.Component);function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var yo=Kr.a.Panel,Co=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={selectedProgram:null},n.run=function(){n.editors&&n.editors.run()},n.renderContent=function(e){var t=e.getPrefixCls,a=Object(m.a)(n),r=a.props,l=r.prefixCls,c=r.cell,s=r.size,i=s.width,u=s.height,d=r.programs,p=(n.state.running,t("blockly",l));n.prefixCls=p;var f=n.getOptions(),b=f.sidebarWidth||200,g=d[f.selectedProgramName];return o.a.createElement("div",{className:"".concat(p)},(!f.hideSidebar||!g)&&o.a.createElement(lo.ResizableBox,{width:b,height:u,minConstraints:[100,u],maxConstraints:[i/2,u],className:"".concat(p,"-left-col"),axis:"x",handle:o.a.createElement("div",{className:"".concat(p,"-hdivider")}),onResize:function(e,t){var n=t.size,r=n.width;n.height;a.updateOptions(Eo({},f,{sidebarWidth:r}))}},n.renderPrograms(p)),o.a.createElement("div",{className:"".concat(p,"-right-col"),style:{width:f.hideSidebar?i:i-b}},!!g&&o.a.createElement(fo,{program:g,cell:c,prefixCls:p,updateOptions:function(e){return n.updateOptions(e)},options:n.getOptions()}),!g&&o.a.createElement("div",{className:"".concat(p,"-no-program")},o.a.createElement("span",null,"\u6ca1\u6709\u7a0b\u5e8f, \u8bf7\u9009\u4e2d\u6216\u65b0\u5efa."))))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.loadPrograms()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"componentDidUpdate",value:function(e,t,n){var a=this;if(e.creatingProgramStatus.creatingProgramSuccess!==this.props.creatingProgramStatus.creatingProgramSuccess&&this.props.creatingProgramStatus.creatingProgramSuccess){var r=this.getOptions(),o=this.props.creatingProgramStatus.creatingProgramSuccess.name;r.selectedProgramName?(this.updateOptions(Eo({},r,{selectedProgramName:null})),clearTimeout(this.timeout),this.timeout=setTimeout(function(){a.updateOptions(Eo({},r,{selectedProgramName:o}))},50)):this.updateOptions(Eo({},r,{selectedProgramName:o}))}if(e.editingProgramNameStatus.renamingProgramSuccess!==this.props.editingProgramNameStatus.renamingProgramSuccess&&this.props.editingProgramNameStatus.renamingProgramSuccess){var l=this.getOptions(),c=this.props.editingProgramNameStatus.renamingProgramSuccess.name;l.selectedProgramName?(this.updateOptions(Eo({},l,{selectedProgramName:null})),clearTimeout(this.timeout),this.timeout=setTimeout(function(){a.updateOptions(Eo({},l,{selectedProgramName:c}))},50)):this.updateOptions(Eo({},l,{selectedProgramName:c}))}}},{key:"renderPrograms",value:function(e){var t=this,n=this.props,a=n.programs,l=n.createProgram,c=n.creatingProgramStatus,s=n.toggleCreateProgramModal,i=n.deleteProgram,u=n.deletingProgramStatus,d=n.toggleDeleteProgramModal,p=n.toggleEditProgramName,m=n.renameProgram,f=n.resetRenameProgramStatus,b=n.editingProgramNameStatus,g=b.renamingProgramFailure,h=b.editingProgramName,O=this.getOptions();return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"".concat(e,"-program-header")},"\u7a0b\u5e8f\u5217\u8868",o.a.createElement(ro.a,{placement:"top",title:"\u65b0\u5efa\u7a0b\u5e8f"},o.a.createElement(w.a,{type:"plus-square",theme:"filled",className:"".concat(e,"-program-header-add"),onClick:s})),o.a.createElement(ho,{createProgram:l,toggleCreateProgramModal:s,creatingProgramStatus:c,prefixCls:e})),0===Object.keys(a).length&&o.a.createElement("div",{style:{opacity:.5}},"\u6ca1\u6709\u7a0b\u5e8f"),Object.keys(a).length>0&&o.a.createElement("div",{className:"".concat(e,"-program-collapse")},o.a.createElement(Kr.a,{accordion:!0,activeKey:O.selectedProgramName},Object.keys(a).sort().map(function(n){var r=o.a.createElement("div",{className:"".concat(e,"-program-name"),onClick:function(){O.selectedProgramName&&O.selectedProgramName!==n?(t.updateOptions(Eo({},O,{selectedProgramName:null})),clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.updateOptions(Eo({},O,{selectedProgramName:n}))},50)):t.updateOptions(Eo({},O,{selectedProgramName:n}))}},h!==n&&o.a.createElement("span",{className:"".concat(e,"-program-name-text"),onDoubleClick:function(e){e.preventDefault(),e.stopPropagation(),p(n)}},n),h===n&&o.a.createElement(En.a,{size:"small",onKeyUp:function(e){27===e.keyCode&&(e.preventDefault(),e.stopPropagation(),p())},onClick:function(e){e.preventDefault(),e.stopPropagation()},className:"".concat(e,"-program-name-input"),defaultValue:n,onPressEnter:function(e){n!==e.target.value?m(n,e.target.value):p()}}),h!==n&&o.a.createElement("span",{className:"".concat(e,"-program-name-actions")},o.a.createElement(w.a,{onClick:function(e){e.preventDefault(),e.stopPropagation(),p(n)},type:"edit",theme:"filled"}),o.a.createElement(w.a,{type:"copy",theme:"filled",onClick:function(e){e.preventDefault(),e.stopPropagation();for(var t=n+" copy",r=!1;!r;)r=!0,Object.keys(a).forEach(function(e){e===t&&(t+=" copy",r=!1)});m(n,t,!0)}}),o.a.createElement(w.a,{onClick:function(e){e.preventDefault(),e.stopPropagation(),d(n)},type:"delete",theme:"filled"})));return o.a.createElement(yo,{header:r,key:n},a[n].files&&a[n].files.map(function(e){return o.a.createElement("p",{key:e.name},e.name)}))}))),o.a.createElement(Oo,{deleteProgram:i,toggleDeleteProgramModal:d,deletingProgramStatus:u,prefixCls:e}),!!h&&!!g&&o.a.createElement(sn.a,{title:"\u91cd\u547d\u540d\u9519\u8bef",visible:!!h&&!!g,onCancel:f,onOk:f,okText:"\u786e\u8ba4",cancelButtonProps:{style:{display:"none"}}},o.a.createElement("div",{className:"error"},!!g&&g)),!h&&!!g&&o.a.createElement(sn.a,{title:"\u6587\u4ef6\u590d\u5236\u9519\u8bef",visible:!h&&!!g,onCancel:f,onOk:f,okText:"\u786e\u8ba4",cancelButtonProps:{style:{display:"none"}}},o.a.createElement("div",{className:"error"},!!g&&g)))}}]),t}(Vt);Co.propTypes={};var Po=Object(Ue.a)(function(e){return e.robot.programs},Ye,function(e){return{showCreateProgramModal:e.robot.showCreateProgramModal,creatingProgram:e.robot.creatingProgram,creatingProgramFailure:e.robot.creatingProgramFailure,creatingProgramSuccess:e.robot.creatingProgramSuccess}},function(e){return{showDeleteProgramModal:e.robot.showDeleteProgramModal,deletingProgram:e.robot.deletingProgram,deletingProgramFailure:e.robot.deletingProgramFailure,deletingProgramSuccess:e.robot.deletingProgramSuccess}},function(e){return{editingProgramName:e.robot.editingProgramName,renamingProgram:e.robot.renamingProgram,renamingProgramFailure:e.robot.renamingProgramFailure,renamingProgramSuccess:e.robot.renamingProgramSuccess}},function(e,t,n,a,r){return{programs:e,result:t,creatingProgramStatus:n,deletingProgramStatus:a,editingProgramNameStatus:r}});var Fo=Object(s.b)(function(e,t){return Po(e,t)},{deleteResultByChannel:se,loadPrograms:Fe,loadProgram:Se,toggleCreateProgramModal:function(){return U("TOGGLE_CREATE_PROGRAM_MODAL")},createProgram:xe,toggleDeleteProgramModal:function(e){return U("TOGGLE_DELETE_PROGRAM_MODAL",{name:e})},deleteProgram:De,toggleEditProgramName:function(e){return U("TOGGLE_EDITING_PROGRAM_NAME",{name:e})},renameProgram:Le,resetRenameProgramStatus:function(){return U("RESET_RENAME_PROGRAM_STATUS")}})(Object(h.withSize)({monitorHeight:!0,refreshRate:30})(Co));Fo.NAME="\u53ef\u89c6\u5316\u7f16\u7a0b",Fo.WIDTH=24,Fo.HEIGHT=12,Fo.ICON=function(e){return o.a.createElement(w.a,Object.assign({type:"codepen"},e))};var Ro=Fo,jo=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).renderContent=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=a.get,c=t("example-cell",r);return o.a.createElement("div",{className:c},o.a.createElement("p",null,!!l&&JSON.stringify(l,null,"\n")))},n}return Object(f.a)(t,e),t}(Vt);jo.propTypes={get:Tt.a.object};var So=Object(s.b)(function(e,t){return{get:Ke(e,"get")}})(jo);So.NAME="\u9762\u677f\u793a\u4f8b",So.WIDTH=24,So.HEIGHT=12,So.ICON=function(e){return o.a.createElement(w.a,Object.assign({type:"codepen"},e))};var wo={Blockly:Ro,JogCoordinate:Gt,JogJoint:Zt,ManualSwitch:fn,RobotStatus:rn,EthercatConfiguration:Zr,ModelConfiguration:tr,MotionCalib:_a,ZeroCalib:Ra,LoadCalib:Ta,ToolCalib:va,SetDH:Xa,RealtimeChart:oa,"3DView":It,View3D:It,Debugger:jn,Logger:x,Unknown:N};function _o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_o(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_o(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var No=F.a.Item,Io=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).getOptions=function(){return xo({},n.props.cell.options)},n.updateOptions=function(e){var t=xo({},n.props.cell);t.options=xo({},t.options,{},e),n.props.onCellUpdate(t)},n.handleConfigCell=function(){n.updateOptions(xo({},n.getOptions(),{showConfig:!0}))},n.handleDeleteCell=function(){var e=n.props;(0,e.onDelete)(e.cell.i)},n.handleCloneCell=function(){var e=n.props,t=e.onClone,a=e.cell;(a=xo({},a)).y=a.y+1,t(a)},n.editMenu=function(e){var t=Object(m.a)(n),a=n.props,r=a.cell,l=a.onCellUpdate,c=r&&r.type&&n.cellByTypes[r.type.toLowerCase()]?n.cellByTypes[r.type.toLowerCase()].CONFIG:null,s=o.a.createElement(F.a,{onClick:function(e){switch(e.key){case"config":t.handleConfigCell();break;case"clone":t.handleCloneCell();break;case"delete":t.handleDeleteCell()}}},!!c&&o.a.createElement(No,{key:"config"},"\u914d\u7f6e",o.a.createElement(c,{cell:r,onCellUpdate:l})),o.a.createElement(No,{key:"clone"},"\u514b\u9686"),o.a.createElement(No,{key:"delete"},"\u5220\u9664"));return o.a.createElement(j.a,{overlay:s,trigger:["click"],placement:"bottomRight",className:"".concat(e,"--button"),overlayClassName:"".concat(e,"--dropdown-menu"),getPopupContainer:t.props.getPopupContainer},o.a.createElement(w.a,{type:"edit"}))},n.renderMenu=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls;if(a.isEditable){var l=t("layout-cell-context",r);return o.a.createElement("div",{className:"".concat(l)},n.editMenu(l))}},n.state={subMenuIsOpen:!1};var a=Object(m.a)(n);return a.cellByTypes={},Object.keys(wo).forEach(function(e){a.cellByTypes[e.toLowerCase()]=wo[e]}),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderMenu)}}]),t}(r.Component),Mo=n(11),To=n.n(Mo);function Do(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Do(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Do(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ao=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).renderLayoutCellHeader=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=a.isEditable,c=t("layout-cell-header",r),s=t("layout-cell",r),i="".concat(s,"--draggable"),u="".concat(c,"--draggable"),d={};return d[i]=l,d[u]=l,o.a.createElement("div",{className:To()("".concat(c),ko({},d))},n.cellName(c),n.headingBar(c))},n.cellName=function(e){var t=n.props.cellName,a={};a["".concat(e,"-name__default")]=!t||""===t.trim();var r=To()("".concat(e,"-name"),ko({},a));return o.a.createElement("span",{className:r},t||"\u672a\u547d\u540d")},n.headingBar=function(e){if(n.props.isEditable)return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"".concat(e,"--header-bar")}),o.a.createElement("div",{className:"".concat(e,"--header-dragger")}))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderLayoutCellHeader)}}]),t}(r.Component),Lo=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).renderLayoutCell=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=a.isEditable,c=a.cell,s=a.onCloneCell,i=a.onCellUpdate,u=a.onDeleteCell,d=a.children,p=Object(m.a)(n),f=t("layout-cell",r);return o.a.createElement("div",{className:"".concat(f),ref:function(e){p.container=e}},o.a.createElement(Io,{cell:c,isEditable:l,dataExists:!1,onClone:s,onDelete:u,onCellUpdate:i,getPopupContainer:function(){return p.container}}),o.a.createElement(Ao,{cell:c,cellName:c.name,isEditable:l}),o.a.createElement("div",{className:"".concat(f,"-body")},d))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderLayoutCell)}}]),t}(r.Component),Uo=wo.Unknown,Bo=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).renderLayout=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=a.isEditable,c=a.cell,s=a.onCloneCell,i=a.onDeleteCell,u=a.sendCmd,d=a.onCellUpdate,p=t("layout",r);return o.a.createElement(Lo,{cell:c,onCellUpdate:d,onDeleteCell:i,sendCmd:u,onCloneCell:s,isEditable:l},n.renderLayoutBody(p))},n.cellByTypes={};var a=Object(m.a)(n);return Object.keys(wo).forEach(function(e){a.cellByTypes[e.toLowerCase()]=wo[e]}),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"renderLayoutBody",value:function(e){var t=this.props,n=t.cell,a=t.onCellUpdate,l=t.sendCmd,c=t.commandSendInterval,s=t.commandSendDelay;if(n.type&&this.cellByTypes[n.type.toLowerCase()]){var i=this.cellByTypes[n.type.toLowerCase()];return i.CONFIG?o.a.createElement(r.Fragment,null,o.a.createElement(i,{cell:n,onCellUpdate:a,sendCmd:l,commandSendInterval:c,commandSendDelay:s}),o.a.createElement(i.CONFIG,{cell:n,onCellUpdate:a})):o.a.createElement(i,{cell:n,onCellUpdate:a,sendCmd:l,commandSendInterval:c,commandSendDelay:s})}return o.a.createElement(Uo,{cell:n,onCellUpdate:a,sendCmd:l})}},{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderLayout)}}]),t}(r.Component);var Vo=Object(s.b)(function(e,t){return{commandSendInterval:jt(e),commandSendDelay:wt(e)}})(Bo),Wo=n(559),Jo=n.n(Wo);function Xo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var Go=Object(y.WidthProvider)(C.a),zo=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleLayoutChange=function(e){if(n.props.onPositionChange){var t=Object(m.a)(n),a=!1,r=t.props.cells.map(function(t){var n=e.find(function(e){return e.i==t.i});if(n){t.x===n.x&&t.y===n.y&&t.h===n.h&&t.w===n.w||(a=!0);var r={x:n.x,y:n.y,h:n.h,w:n.w};return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xo(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xo(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{},r)}});a&&n.props.onPositionChange(r)}},n.renderLayoutRender=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=a.cells,c=a.onZoom,s=a.isEditable,i=a.onDeleteCell,u=a.onCloneCell,d=a.sendCmd,p=a.onCellUpdate,m=a.layoutCols,f=a.layoutMargin,b=a.layoutContainerPadding,g=(a.layoutRowHeight,a.windowWidth),h=a.windowHeight,O=t("layout-renderer",r),v=".".concat(t("layout-cell",r),"--draggable"),E=Math.floor(g/m);Math.floor((h-50-40)/E);return o.a.createElement("div",{className:"".concat(O," ").concat(s?"editable":"")},o.a.createElement(Go,{layout:l,cols:m,rowHeight:E,margin:[f,f],containerPadding:[b,b],useCSSTransforms:!1,onLayoutChange:n.handleLayoutChange,draggableHandle:v,isDraggable:!0,isResizable:!0},l.map(function(e){return o.a.createElement("div",{key:e.i,className:s?"editable":""},o.a.createElement(Vo,{cell:e,onDeleteCell:i,onCloneCell:u,onCellUpdate:p,onZoom:c,sendCmd:d,isEditable:s}))})))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderLayoutRender)}}]),t}(r.Component),qo=Jo()(zo),Qo=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).renderDashboard=function(e){var t=e.getPrefixCls,a=n.props,r=a.dashboard,l=a.prefixCls,c=a.onZoom,s=a.onCloneCell,i=a.onDeleteCell,u=a.onPositionChange,d=a.sendCmd,p=a.onCellUpdate,m=a.layoutCols,f=a.layoutRowHeight,b=a.layoutMargin,g=a.layoutContainerPadding,h=t("dashboard",l);return o.a.createElement("div",{className:"".concat(h),id:"dashboard"},r.cells&&r.cells.length?o.a.createElement(qo,{layoutCols:m,layoutRowHeight:f,layoutMargin:b,layoutContainerPadding:g,cells:r.cells,templates:[],manualRefresh:10,onCellUpdate:p,isEditable:!!r.editable,onZoom:c,sendCmd:d,onCloneCell:s,onDeleteCell:i,onPositionChange:u}):o.a.createElement(E,{dashboard:r,onAddCell:function(){}}))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderDashboard)}}]),t}(r.Component);function Ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ho(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ho(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Yo=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).onPositionChange=function(e){var t=n.props,a=t.dashboard;(0,t.updateDashboard)(a=Zo({},a,{cells:Object(b.a)(e)}))},n.onCellUpdate=function(e){var t=n.props,a=t.dashboard,r=t.updateDashboard,o=Object(b.a)(a.cells);o.forEach(function(t,n){e.i===t.i&&(o[n]=Zo({},e))}),r(a=Zo({},a,{cells:o}))},n.onAddCell=function(e){console.log(e),delete(e=Zo({},e)).i,n.props.createCell(n.props.dashboard.i,e)},n.onDeleteCell=function(e){n.props.deleteCell(n.props.dashboard.i,e)},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dashboard,n=(e.cells,e.layoutCols),a=e.layoutRowHeight,r=e.layoutMargin,l=e.layoutContainerPadding,c=e.sendCmd;return o.a.createElement(Qo,{dashboard:t,layoutCols:n,layoutRowHeight:a,layoutMargin:r,layoutContainerPadding:l,inPresentationMode:!1,onPositionChange:this.onPositionChange,onCellUpdate:this.onCellUpdate,onDeleteCell:this.onDeleteCell,onCloneCell:this.onAddCell,onAddCell:this.onAddCell,sendCmd:c,onSummonOverlayTechnologies:function(){},manualRefresh:0,timeRange:{},onZoom:function(){},setScrollTop:function(){},inView:function(){}})}}]),t}(r.Component);Qo.propTypes={dashboard:Tt.a.object.isRequired,layoutCols:Tt.a.number.isRequired,layoutRowHeight:Tt.a.number.isRequired,layoutMargin:Tt.a.number.isRequired,layoutContainerPadding:Tt.a.number.isRequired};var Ko=Object(s.b)(function(e,t){return t.match.params.id,{dashboard:Ct(e),layoutCols:Kt(e),layoutRowHeight:$t(e),layoutMargin:en(e),layoutContainerPadding:tn(e)}},{updateDashboard:X,sendCmd:ce,createCell:q,deleteCell:function(e,t){return U(Q,{dashboardId:e,cellId:t})}})(Yo);var $o=function(){return o.a.createElement("div",{className:"App"},"Configuration")},el=o.a.createElement(c.c,null,o.a.createElement(c.a,{exact:!0,path:"/",component:Ko}),o.a.createElement(c.a,{path:"/configuration",component:$o}),o.a.createElement(c.a,{path:"/dashboards/:id",component:Ko})),tl=n(336),nl=n.n(tl),al=Nn.a.Item,rl=Mn.a.Group,ol=Mn.a.Button,ll=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault();var t=n.props.createCell;n.props.form.validateFields(function(e,n){e?console.error(e):t(n)})},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.toggleCreateCellModal,a=e.prefixCls,r=e.creatingCellStatus,l=this.props.form,c=l.getFieldDecorator,s=(0,l.getFieldValue)("type");return o.a.createElement(sn.a,{title:"\u6dfb\u52a0\u9762\u677f",visible:!!t,width:"75%",okText:"\u521b\u5efa",cancelText:"\u53d6\u6d88",onOk:this.handleSubmit,onCancel:n,wrapClassName:"".concat(a,"-create-cell-modal")},o.a.createElement(Nn.a,null,o.a.createElement(al,{label:"\u7c7b\u578b",className:"".concat(a,"-type-selector")},c("type",{rules:[{type:"string",required:!0,message:"\u8bf7\u9009\u62e9\u9762\u677f\u7c7b\u578b!"}]})(o.a.createElement(rl,{disabled:!!r.creatingCell},Object.keys(wo).map(function(e){if("Unknown"!==e){var t=wo[e].ICON?wo[e].ICON:function(e){return o.a.createElement(w.a,Object.assign({type:"block"},e))};return o.a.createElement(ol,{value:e,key:e},o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(t,null)),o.a.createElement("div",{className:"".concat(a,"-type-name")},wo[e].NAME?wo[e].NAME:e)))}})))),o.a.createElement(al,{label:"\u540d\u79f0",className:"".concat(a,"-input-col")},c("name",{rules:[{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u9762\u677f\u540d\u79f0"}]})(o.a.createElement(En.a,{size:"small",disabled:!!r.creatingCell}))),o.a.createElement(al,{label:"\u5bbd\u5ea6",className:"".concat(a,"-input-col")},c("w",{initialValue:wo[s]&&wo[s].WIDTH?wo[s].WIDTH:24,rules:[{type:"integer",required:!0,message:"\u8bf7\u8f93\u5165\u9762\u677f\u5bbd\u5ea6"}]})(o.a.createElement(Un.a,{max:48,min:3,step:1,size:"small",disabled:!!r.creatingCell}))),o.a.createElement(al,{label:"\u9ad8\u5ea6",className:"".concat(a,"-input-col")},c("h",{initialValue:wo[s]&&wo[s].HEIGHT?wo[s].HEIGHT:12,rules:[{type:"integer",required:!0,message:"\u8bf7\u8f93\u5165\u9762\u677f\u9ad8\u5ea6"}]})(o.a.createElement(Un.a,{max:48,min:3,step:1,size:"small",disabled:!!r.creatingCell})))),o.a.createElement("div",{className:"".concat(a,"-status")},!!r.creatingCell&&o.a.createElement("div",{className:"info"},"\u521b\u5efa\u4e2d..."),!!r.creatingCellFailure&&o.a.createElement("div",{className:"error"},"\u521b\u5efa\u9519\u8bef: ",r.creatingCellFailure),!!r.creatingCellSuccess&&o.a.createElement("div",{className:"success"},"\u521b\u5efa\u6210\u529f")))}}]),t}(r.Component),cl=Nn.a.create()(ll);function sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var il=F.a.Item,ul=Dn.a.Option,dl=Dn.a.OptGroup,pl=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={fullscreen:!1},n.escFunction=function(e){27===e.keyCode&&document.fullscreenElement&&document.exitFullscreen()},n.onFullscreenChange=function(e){document.fullscreenElement?n.setState({fullscreen:!0}):n.setState({fullscreen:!1})},n.handleClick=function(e){n.props.navigate(e.key)},n.createCell=function(e){var t=n.props,a=t.createCell,r=(t.pathname,t.dashboard);r&&a(r.i,e)},n.toggleLock=function(){var e=n.props,t=e.updateDashboard,a=e.dashboard;a&&t(a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sl(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sl(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},a,{editable:!a.editable}))},n.renderContent=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=a.pathname,c=a.dashboards,s=a.dashboard,i=a.workObjectIds,u=a.toolIds,d=a.updateMotionVelPercent,p=a.updateToolId,m=a.updateCoordinateId,f=a.updateWorkObjectId,b=a.toolId,g=a.coordinateId,h=a.workObjectId,O=a.motionVelPercent,v=a.toggleCreateCellModal,E=a.creatingCellStatus,y=t("header",r);return"/"===l&&c.length>0&&(l="/dashboards/".concat(c[0].i)),o.a.createElement("div",{className:y},o.a.createElement(F.a,{onClick:n.handleClick,selectedKeys:[l],mode:"horizontal"},c.map(function(e){return o.a.createElement(il,{key:"/dashboards/".concat(e.i)},e.name)})),o.a.createElement("div",{className:"".concat(y,"-actions"),style:{position:"absolute",right:0,top:0,display:"inline-block"}},o.a.createElement(nl.a,{tooltipVisible:!1,min:0,max:100,tipFormatter:function(e){return"".concat(e,"%")},value:O,onChange:function(e){n.throttleSendCmd("setvel --vel_percent=".concat(e),"setvel"),d(e)}}),o.a.createElement(Un.a,{min:0,max:100,size:"small",value:O,onChange:function(e){n.throttleSendCmd("setvel --vel_percent=".concat(e),"setvel"),d(e)}}),o.a.createElement(Br.a,{checked:!!g,onChange:function(e){m(e.target.checked?1:0)}},"\u5916\u90e8\u5de5\u5177"),o.a.createElement(Dn.a,{size:"small",placeholder:"\u9009\u62e9\u5de5\u5177\u5750\u6807",onChange:p,value:b},o.a.createElement(dl,{label:"\u9009\u62e9\u5de5\u5177\u5750\u6807\u7cfb"},u.map(function(e){return o.a.createElement(ul,{value:e,key:e},"\u5de5\u5177\u5750\u6807\u7cfb",e)}))),o.a.createElement(Dn.a,{size:"small",placeholder:"\u9009\u62e9\u5de5\u4ef6\u5750\u6807\u7cfb",onChange:f,value:h},o.a.createElement(dl,{label:"\u9009\u62e9\u5de5\u4ef6\u5750\u6807\u7cfb"},i.map(function(e){return o.a.createElement(ul,{value:e,key:e},"\u5de5\u4ef6\u5750\u6807\u7cfb",e)}))),o.a.createElement(w.a,{className:"".concat(s&&s.editable?"":"disabled"),type:"block",onClick:function(){s&&s.editable&&v()}}),o.a.createElement(w.a,{type:"lock",className:"".concat(s&&s.editable?"":"info"),onClick:n.toggleLock}),!n.state.fullscreen&&o.a.createElement(w.a,{type:"fullscreen",onClick:function(){document.getElementById("body").requestFullscreen()}}),!!n.state.fullscreen&&o.a.createElement(w.a,{type:"fullscreen-exit",onClick:function(){document.exitFullscreen()}}),o.a.createElement(w.a,{type:"sync",onClick:function(){window.location.reload()}})),o.a.createElement(cl,{visible:E.showCreateCellModal,toggleCreateCellModal:v,createCell:n.createCell,creatingCellStatus:E,prefixCls:y}))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.interval,n=e.sendCmd;this.throttleSendCmd=D()(n,t),document.addEventListener("fullscreenchange",this.onFullscreenChange,!1),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1),document.removeEventListener("fullscreenchange",this.onFullscreenChange,!1)}},{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderContent)}}]),t}(r.Component),ml=Object(Ue.a)(Et,Ot,pt,function(e){return e.robot.workObjectIds},mt,ft,bt,gt,jt,function(e){return{showCreateCellModal:e.config.showCreateCellModal,creatingCell:e.config.creatingCell,creatingCellFailure:e.config.creatingCellFailure,creatingCellSuccess:e.config.creatingCellSuccess}},function(e,t,n,a,r,o,l,c,s,i){var u=null;if("/"!==t&&-1!==t.indexOf("/dashboards/")){var d=t.replace("/dashboards/","");u=e&&e.filter(function(e){return e.i===d})[0]}return{dashboards:e,pathname:t,toolIds:n,workObjectIds:a,toolId:r,workObjectId:o,coordinateId:l,motionVelPercent:c,interval:s,dashboard:u||e&&e[0],creatingCellStatus:i}});var fl=Object(s.b)(function(e){return ml(e)},{createCell:q,navigate:K,updateDashboard:X,updateMotionVelPercent:function(e){return U("UPDATE_MOTION_VEL_PERCENT",{motionVelPercent:e})},updateToolId:function(e){return U("UPDATE_TOOL_ID",{toolId:e})},updateCoordinateId:function(e){return U("UPDATE_COORDINATE_ID",{coordinateId:e})},updateWorkObjectId:function(e){return U("UPDATE_WORK_OBJECT_ID",{workObjectId:e})},sendCmd:ce,toggleCreateCellModal:function(){return U("TOGGLE_CREATE_CELL_MODAL")}})(pl),bl=(F.a.Item,Dn.a.Option,Dn.a.OptGroup,function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).renderContent=function(e){var t=e.getPrefixCls,a=n.props,r=a.prefixCls,l=a.currentCommand,c=a.websocketConnected,s=a.stateCode,i=a.currentPlan,u=t("footer",r),d={100:"#AAAAAA",200:"#FF851B",300:"#FF4136",400:"#0074D9",500:"#01FF70"}[s||100],p={100:"\u53bb\u4f7f\u80fd",200:"\u624b\u52a8",300:"\u51c6\u5907\u81ea\u52a8",400:"\u81ea\u52a8",500:"\u9519\u8bef\u505c\u76ee"}[s],m="success";return 0===l.return_code?m="success":l.return_code&&(m="error"),i=!!i&&"none"!==i,o.a.createElement("div",{className:u},o.a.createElement("div",{className:"".concat(u,"-command ").concat(m)},!!l.cmd&&o.a.createElement("div",{className:"".concat(u,"-cmd ").concat(l.isRunning&&"".concat(u,"-cmd-running"))},o.a.createElement(ro.a,{placement:"top",title:"\u8fd0\u884c\u547d\u4ee4"},o.a.createElement(w.a,{type:"code"})),o.a.createElement("span",null,l.cmd)),!!l.cmd_response_time&&o.a.createElement("div",{className:"".concat(u,"-cmd-response-time")},o.a.createElement(ro.a,{placement:"top",title:"\u8fd4\u56de\u65f6\u95f4"},o.a.createElement(w.a,{type:"clock-circle"})),o.a.createElement("span",null,l.cmd_response_time,"ms")),void 0!==l.return_code&&o.a.createElement("div",{className:"".concat(u,"-return-code")},o.a.createElement(ro.a,{placement:"top",title:"\u8fd4\u56de\u4ee3\u7801"},o.a.createElement(w.a,{type:"bulb"})),o.a.createElement("span",null,l.return_code)),!!l.return_message&&o.a.createElement("div",{className:"".concat(u,"-return-message")},o.a.createElement(ro.a,{placement:"top",title:"\u8fd4\u56de\u6d88\u606f"},o.a.createElement(w.a,{type:"message"})),o.a.createElement("span",null,l.return_message))),o.a.createElement("div",{className:"".concat(u,"-status")},o.a.createElement("div",null,!!c&&o.a.createElement(ro.a,{placement:"top",title:"Websocket"},o.a.createElement(w.a,{type:"wifi",className:"success"})),!!c&&o.a.createElement("span",null,"\u5df2\u8fde\u63a5"),!c&&o.a.createElement(ro.a,{placement:"top",title:"Websocket"},o.a.createElement(w.a,{type:"wifi",className:"danger"})),!c&&o.a.createElement("span",null,"\u672a\u8fde\u63a5")),o.a.createElement("div",{className:p?"info":"disabled"},o.a.createElement(ro.a,{placement:"top",title:"State Code"},o.a.createElement(w.a,{style:{color:d,fill:d},fill:d,type:"check-circle",className:"info",theme:"filled"})),o.a.createElement("span",null,p||"\u65e0\u72b6\u6001")),o.a.createElement("div",{className:i?"success":"disabled"},o.a.createElement(ro.a,{placement:"top",title:"Current Plan"},o.a.createElement(w.a,{style:{color:d,fill:d},fill:d,type:"setting",theme:"filled",spin:!!i})),o.a.createElement("span",null,i?"\u8fd0\u52a8\u4e2d":"\u505c\u6b62"))))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderContent)}}]),t}(r.Component)),gl=Object(Ue.a)(function(e){return e.robot.currentCommand},Ft,function(e){return e.robot.resultsByChannel.get&&e.robot.resultsByChannel.get.state_code},dt,function(e,t,n,a){return{currentCommand:e,websocketConnected:t,stateCode:n,currentPlan:a}});var hl=Object(s.b)(function(e){return gl(e)},{})(bl),Ol=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).renderApp=function(e){var t=e.getPrefixCls,a=n.props,r=(a.location.pathname,a.dashboards),l=(a.navigate,a.prefixCls),c=(a.createCell,a.dashboard,a.updateDashboard,t("app",l));return r?o.a.createElement("div",{className:c},o.a.createElement(fl,null),o.a.createElement("div",{className:"".concat(c,"-content")},n.renderErrorMessage(),el),o.a.createElement(hl,null)):o.a.createElement("div",{className:"".concat(c,"-loading")},o.a.createElement(w.a,{type:"loading"}))},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.handleDismissClick=n.handleDismissClick.bind(Object(m.a)(n)),n.getData(),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"getData",value:function(){}},{key:"componentWillMount",value:function(){this.props.loadInterfaceConfig(),this.props.updateRouterState({pathname:this.props.location.pathname,params:this.props.params}),this.props.ws&&this.props.startWebsocket(this.props.ws)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalTimer),this.props.stopWebsocket()}},{key:"componentWillReceiveProps",value:function(e,t){var n=this;if(this.props.location.pathname!==e.location.pathname&&this.props.updateRouterState({pathname:e.location.pathname,params:e.params}),this.props.ws!==e.ws&&e.ws&&this.props.startWebsocket(e.ws),this.props.getInterval!==e.getInterval&&e.getInterval){this.intervalTimer&&clearInterval(this.intervalTimer);var a=e.sendCmd,r=e.getInterval;this.intervalTimer=setInterval(function(){var e=n.props,t=e.websocketConnected;e.xml;t&&a("get","get")},r)}}},{key:"handleDismissClick",value:function(e){this.props.resetErrorMessage(),e.preventDefault()}},{key:"handleChange",value:function(e){this.props.navigate("/".concat(e))}},{key:"renderErrorMessage",value:function(){var e=this.props.errorMessage;return e?o.a.createElement("p",{style:{backgroundColor:"#e99",padding:10}},o.a.createElement("b",null,e)," (",o.a.createElement("a",{href:"#",onClick:this.handleDismissClick},"Dismiss"),")"):null}},{key:"render",value:function(){return o.a.createElement(O.ConfigConsumer,null,this.renderApp)}}]),t}(r.Component);var vl=Object(s.b)(function(e){return{dashboards:Et(e),dashboard:Pt(e),xml:ht(e),errorMessage:e.errorMessage,websocketConnected:e.robot.websocketConnected,getInterval:St(e),ws:Rt(e)}},{loadInterfaceConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return U(B,{requiredFields:e})},navigate:K,updateRouterState:function(e){return U(Z,{state:e})},resetErrorMessage:function(){return U("RESET_ERROR_MESSAGE")},startWebsocket:ae,stopWebsocket:function(){return U(ee,{stopped:!0})},createCell:q,sendCmd:ce,updateDashboard:X})(Ol),El=n(93),yl=(n(1186),n(203));n(1187),n(1191);function Cl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Pl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cl(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cl(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Fl={showCreateCellModal:!1,creatingCell:!1,creatingCellFailure:null,creatingCellSuccess:null};function Rl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function jl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rl(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rl(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function wl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sl(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sl(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _l=0;if(window.localStorage.getItem("currentToolId"))try{_l=JSON.parse(window.localStorage.getItem("currentToolId"))}catch(Hs){}var xl=0;if(window.localStorage.getItem("currentWorkObjectId"))try{xl=JSON.parse(window.localStorage.getItem("currentWorkObjectId"))}catch(Hs){}var Nl=0;if(window.localStorage.getItem("currentCoordinateId"))try{Nl=JSON.parse(window.localStorage.getItem("currentCoordinateId"))}catch(Hs){}var Il={resultsByChannel:{},websocketConnected:!1,websocketError:null,channelsById:{},commandsById:{},currentCommand:{},robotStatus:4,toolIds:Object(b.a)(Array(16).keys()),workObjectIds:Object(b.a)(Array(32).keys()),currentToolId:_l,currentWorkObjectId:xl,currentCoordinateId:Nl,currentMotionVelPercent:0,firstGet:!0,createRobotModelModalVisible:!1,currentRobotBrand:null,currentRobotModel:null,esiFileUploadingSuccess:null,esiFileUploadingRequest:null,esiFileUploadingFailure:null,esiPathFetchingSuccess:null,esiPathFetchingRequest:null,esiPathFetchingFailure:null,esiPath:null,xml:null,programs:{},showCreatingProgramModal:!1,creatingProgram:!1,creatingProgramFailure:!1,creatingProgramSuccess:!1,showDeletingProgramModal:!1,deletingProgram:!1,deletingProgramFailure:!1,deletingProgramSuccess:!1,editingProgramName:null},Ml={};function Tl(e,t,n){var a=new DataView(e),r=(a.getInt32(0),a.getInt32(4,!0),a.getFloat64(16,!0));if(t[r])try{var o=function(e){var t,n,a,r,o,l;for(t="",a=e.length,n=0;n<a;)switch((r=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(r);break;case 12:case 13:o=e[n++],t+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=e[n++],l=e[n++],t+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&l)<<0)}return t}(new Uint8Array(e,40));return wl({},JSON.parse(o),{id:r,cmd_response_time:Date.now()-r})}catch(Hs){}}var Dl=Object(El.c)({config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INTERFACE_CONFIG_FETCH_REQUEST":case"INTERFACE_CONFIG_FETCH_FAILURE":return{};case"INTERFACE_CONFIG_FETCH_SUCCESS":return Pl({},e,{},t.response);case W:var n=t.dashboard,a=Object(b.a)(e.dashboards);return a.forEach(function(e,t){e.i===n.i&&(a[t]=Pl({},a[t],{},n))}),Pl({},e,{dashboards:a});case"DASHBOARD_UPDATE_SUCCESS":var r=t.dashboard,o=Object(b.a)(e.dashboards);return o.forEach(function(e,t){e.i===r.i&&(o[t]=Pl({},o[t],{},r))}),Pl({},e,{dashboards:o});case"TOGGLE_CREATE_CELL_MODAL":return Pl({},e,{showCreateCellModal:!e.showCreateCellModal,creatingCell:!1,creatingCellFailure:null,creatingCellSuccess:null});case"CELL_CREATE_REQUEST":return Pl({},e,{creatingCell:!1,creatingCellFailure:null,creatingCellSuccess:null});case"CELL_CREATE_FAILURE":return Pl({},e,{creatingCell:!1,creatingCellFailure:t.error,creatingCellSuccess:null});case"CELL_CREATE_SUCCESS":var l=t.dashboardId,c=t.cell,s=Object(b.a)(e.dashboards);return s.forEach(function(e,t){e.i===l&&(s[t]=Pl({},s[t]),s[t].cells=s[t].cells.map(function(e){return Pl({},e,{y:e.y+1})}),s[t].cells=[].concat(Object(b.a)(s[t].cells),[c]))}),Pl({},e,{dashboards:s,showCreateCellModal:!1,creatingCellFailure:null,creatingCell:null,creatingCellSuccess:c});case"CELL_DELETE_SUCCESS":var i=t.dashboardId,u=t.cell,d=Object(b.a)(e.dashboards);return d.forEach(function(e,t){e.i===i&&(d[t]=Pl({},d[t]),d[t].cells=d[t].cells.filter(function(e){return e.i!==u.i}))}),Pl({},e,{dashboards:d});default:return e}return e},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.error,r=t.errorType;return"RESET_ERROR_MESSAGE"===n?r?e[r]&&delete(e=jl({},e))[r]:e={}:a&&((e=jl({},e))[n]=a),e},router:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pathname:"/"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return t.state;default:return e}},robot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Il,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WEBSOCKET_CONNECTED":return wl({},e,{websocketConnected:!0});case"WEBSOCKET_DISCONNECTED":return wl({},e,{websocketConnected:!1});case"WEBSOCKET_ERROR":return wl({},e,{websocketError:t.payload});case te:var n=t.id,a=t.channel,r=t.cmd,o=t.callback;if(a){var l=wl({},e.channelsById);l[n]=a;var c=e.commandsById,s=e.currentCommand;return"get"!==a&&((c=wl({},c))[n]=r,o&&(Ml[n]=o),s={id:n,cmd:r,channel:a,isRunning:!0}),wl({},e,{channelsById:l,commandsById:c,currentCommand:s})}return e;case"SAVE_RESULT_BY_CHANNEL":var i=t.channel,u=t.data,d=wl({},e.resultsByChannel);return d[i]=u,wl({},e,{resultsByChannel:d});case ne:var p=t.data,m=e.channelsById,f=e.resultsByChannel,b=e.commandsById,g=e.currentCommand,h=e.firstGet,O=Tl(p,e.channelsById,e.model);if(O){var v=(m=wl({},m))[O.id],E=Ml[O.id];return delete m[O.id],delete Ml[O.id],E&&"function"===typeof E&&E(O),"get"!==v&&b[O.id]&&delete(b=wl({},b))[O.id],v&&((f=wl({},f))[v]=O),g.id===O.id&&(g=wl({},g,{},O,{isRunning:!1})),wl({},e,h&&"get"===v?{channelsById:m,resultsByChannel:f,commandsById:b,currentCommand:g,currentMotionVelPercent:O.vel_percent||0,firstGet:!1}:{channelsById:m,resultsByChannel:f,commandsById:b,currentCommand:g})}return e;case"DELETE_RESULT_BY_CHANNEL":var y=t.channel,C=wl({},e.resultsByChannel);return delete C[y],wl({},e,{resultsByChannel:C});case"UPDATE_MOTION_VEL_PERCENT":return wl({},e,{currentMotionVelPercent:t.motionVelPercent});case"UPDATE_COORDINATE_ID":return window.localStorage.setItem("currentCoordinateId",t.coordinateId),wl({},e,{currentCoordinateId:t.coordinateId});case"UPDATE_TOOL_ID":return window.localStorage.setItem("currentToolId",t.toolId),wl({},e,{currentToolId:t.toolId});case"UPDATE_WORK_OBJECT_ID":return window.localStorage.setItem("currentWorkObjectId",t.workObjectId),wl({},e,{currentWorkObjectId:t.workObjectId});case"ROBOT_MODELS_FETCH_SUCCESS":return wl({},e,{robotModels:t.robotModels});case"ROBOT_MODEL_DELETE_SUCCESS":var P=t.model,F=wl({},e.robotModels);return F[P.brand]=wl({},F[P.brand]),delete F[P.brand][P.model],dn()(F[P.brand])&&delete F[P.brand],wl({},e,{robotModels:F});case"ROBOT_MODEL_PART_UPLOAD_SUCCESS":var R=t.model,j=wl({},e.robotModels);return j[R.brand]=wl({},j[R.brand]),j[R.brand][R.model]=R,wl({},e,{robotModels:j});case"ROBOT_MODEL_PART_DELETE_SUCCESS":var S=t.model,w=wl({},e.robotModels);return w[S.brand]=wl({},w[S.brand]),w[S.brand][S.model]=S,wl({},e,{robotModels:w});case"ROBOT_MODEL_CREATE_REQUEST":return wl({},e,{creatingRobotModel:!0,creatingRobotModelError:!1,creatingRobotModelResult:null});case"ROBOT_MODEL_CREATE_SUCCESS":var _=t.model,x=wl({},e.robotModels);return x[_.brand]=wl({},x[_.brand]),x[_.brand][_.model]=_,wl({},e,{robotModels:x,currentRobotBrand:_.brand,currentRobotModel:_.model,createRobotModelModalVisible:!1,creatingRobotModel:!1,creatingRobotModelError:!1,creatingRobotModelResult:_});case"ROBOT_MODEL_CREATE_FAILURE":return wl({},e,{creatingRobotModel:!1,creatingRobotModelError:t.error,creatingRobotModelResult:!1});case"SHOW_CREATE_ROBOT_MODEL_MODAL":return wl({},e,{createRobotModelModalVisible:!0,creatingRobotModel:!1,creatingRobotModelError:null,creatingRobotModelResult:null});case"HIDE_CREATE_ROBOT_MODEL_MODAL":return wl({},e,{createRobotModelModalVisible:!1});case"SELECT_CURRENT_ROBOT_BRAND":return wl({},e,{currentRobotBrand:t.brand});case"SELECT_CURRENT_ROBOT_MODEL":return wl({},e,{currentRobotModel:t.model});case"UPLOAD_ESI_FILE_REQUEST":return wl({},e,{esiFileUploadingSuccess:null,esiFileUploadingRequest:!0,esiFileUploadingFailure:null});case"UPLOAD_ESI_FILE_FAILURE":return wl({},e,{esiFileUploadingSuccess:null,esiFileUploadingRequest:!1,esiFileUploadingFailure:t.error});case"UPLOAD_ESI_FILE_SUCCESS":return wl({},e,{esiFileUploadingRequest:!1,esiFileUploadingSuccess:!0,esiFileUploadingFailure:!1});case"ESI_PATH_FETCH_REQUEST":return wl({},e,{esiPath:null,esiPathFetchingRequest:!0,esiPathFetchingSuccess:!1,esiPathFetchingFailure:!1});case"ESI_PATH_FETCH_FAILURE":return wl({},e,{esiPath:null,esiPathFetchingRequest:!1,esiPathFetchingSuccess:!1,esiPathFetchingFailure:t.error});case"ESI_PATH_FETCH_SUCCESS":return wl({},e,{esiPath:t.path,esiPathFetchingRequest:!1,esiPathFetchingSuccess:!0,esiPathFetchingFailure:!1});case"CONFIG_XML_FETCH_SUCCESS":return wl({},e,{xml:t.xml});case"PROGRAMS_FETCH_REQUEST":return wl({},e,{loadingProgram:!0,loadingProgramError:null});case"PROGRAMS_FETCH_FAILURE":return wl({},e,{loadingProgram:!1,loadingProgramError:t.error});case"PROGRAMS_FETCH_SUCCESS":return wl({},e,{loadingProgram:!1,loadingProgramError:null,programs:t.programs});case"PROGRAM_UPDATE_REQUEST":var N=wl({},e.programs);return N[t.name]=t.program,wl({},e,{updatingProgram:!0,updatingProgramError:null,programs:N});case"PROGRAM_UPDATE_FAILURE":return wl({},e,{updatingProgram:!1,updatingProgramError:t.error});case"PROGRAM_UPDATE_SUCCESS":var I=wl({},e.programs);return I[t.program.name]=t.program,wl({},e,{updatingProgram:!1,updatingProgramError:null,programs:I});case"TOGGLE_CREATE_PROGRAM_MODAL":return wl({},e,{showCreateProgramModal:!e.showCreateProgramModal,creatingProgram:!1,creatingProgramFailure:null,creatingProgramSuccess:null});case"PROGRAM_CREATE_REQUEST":return wl({},e,{creatingProgram:!1,creatingProgramFailure:null,creatingProgramSuccess:null});case"PROGRAM_CREATE_FAILURE":return wl({},e,{creatingProgram:!1,creatingProgramFailure:t.error,creatingProgramSuccess:null});case"PROGRAM_CREATE_SUCCESS":var M=t.program,T=wl({},e.programs);return T[M.name]=M,wl({},e,{programs:T,showCreateProgramModal:!1,creatingProgramFailure:null,creatingProgram:null,creatingProgramSuccess:M});case"TOGGLE_DELETE_PROGRAM_MODAL":return wl({},e,{showDeleteProgramModal:t.name?t.name:!e.showDeleteProgramModal,deletingProgram:!1,deletingProgramFailure:null,deletingProgramSuccess:null});case"PROGRAM_DELETE_REQUEST":return wl({},e,{deletingProgram:!1,deletingProgramFailure:null,deletingProgramSuccess:null});case"PROGRAM_DELETE_FAILURE":return wl({},e,{deletingProgram:!1,deletingProgramFailure:t.error,deletingProgramSuccess:null});case"PROGRAM_DELETE_SUCCESS":var D=t.program,k=wl({},e.programs);return delete k[D.name],wl({},e,{programs:k,showDeleteProgramModal:!1,deletingProgramFailure:null,deletingProgram:null,deletingProgramSuccess:D});case"TOGGLE_EDITING_PROGRAM_NAME":var A=t.name;return wl({},e,{renamingProgram:!1,renamingProgramFailure:null,renamingProgramSuccess:null,editingProgramName:e.editingProgramName==A?null:A});case"PROGRAM_RENAME_REQUEST":return wl({},e,{renamingProgram:!1,renamingProgramFailure:null,renamingProgramSuccess:null});case"PROGRAM_RENAME_FAILURE":return wl({},e,{renamingProgram:!1,renamingProgramFailure:t.error,renamingProgramSuccess:null});case"PROGRAM_RENAME_SUCCESS":var L=t.program,U=t.name,B=t.copy,V=wl({},e.programs);return B||delete V[U],V[L.name]=L,wl({},e,{programs:V,editingProgramName:null,renamingProgram:null,renamingProgramFailure:null,renamingProgramSuccess:L});case"RESET_RENAME_PROGRAM_STATUS":return wl({},e,{renamingProgram:null,renamingProgramFailure:null,renamingProgramSuccess:null});default:return e}return e}}),kl="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):El.d;var Al=n(16),Ll=n.n(Al),Ul=n(4);n(1253),n(284),n(1254);function Bl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Vl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bl(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bl(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Wl(e){return fetch(e).then(function(e){return e.json().then(function(t){return{json:t,response:e}})}).then(function(e){var t=e.json;return e.response.ok?t:Promise.reject(t)}).then(function(e){return{response:e}},function(e){return{error:e.message||e.error||"Something bad happened"}})}function Jl(e,t){return fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json().then(function(t){return{json:t,response:e}})}).then(function(e){var t=e.json;return e.response.ok?t:Promise.reject(t)}).then(function(e){return{response:e}},function(e){return{error:e.message||e.error||"Something bad happened"}})}function Xl(e,t){return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json().then(function(t){return{json:t,response:e}})}).then(function(e){var t=e.json;return e.response.ok?t:Promise.reject(t)}).then(function(e){return{response:e}},function(e){return{error:e.message||e.error||"Something bad happened"}})}function Gl(e,t){return fetch(e,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json().then(function(t){return{json:t,response:e}})}).then(function(e){var t=e.json;return e.response.ok?t:Promise.reject(t)}).then(function(e){return{response:e}},function(e){return{error:e.message||e.error||"Something bad happened"}})}var zl=function(){return Wl("/api/config/interface")},ql=function(e){return(e=Vl({},e)).cells&&(e.cells=e.cells.map(function(e){return(e=Vl({},e)).options&&(e.options=JSON.stringify(e.options)),e})),Jl("/api/dashboards/".concat(e.i),e)},Ql=function(e,t){return t.options&&"string"!==typeof t.options&&((t=Vl({},t)).options=JSON.stringify(t.options)),Xl("/api/dashboards/".concat(e,"/cells"),Vl({},t))},Hl=function(e,t){return Gl("/api/dashboards/".concat(e,"/cells/").concat(t),{})},Zl=function(){return Wl("/api/robots")},Yl=function(e,t,n){return Gl("/api/robots/".concat(e,"/").concat(t,"/parts/").concat(n))},Kl=function(e,t){return Gl("/api/robots/".concat(e,"/").concat(t))},$l=function(e){return Xl("/api/robots",e)},ec=function(){return Wl("/api/esi/path")},tc=function(){return fetch("/api/config/robot/xml").then(function(e){return e.text().then(function(t){return{text:t,response:e}})}).then(function(e){var t=e.text;return e.response.ok?t:Promise.reject(t)}).then(function(e){return{response:e}},function(e){return{error:e.message||e.error||"Something bad happened"}})},nc=function(){return Wl("/api/programs")},ac=function(e){return Wl("/api/programs/".concat(encodeURIComponent(e)))},rc=function(e){return Xl("/api/programs",{name:e})},oc=function(e,t){return Jl("/api/programs/".concat(encodeURIComponent(e)),t)},lc=function(e){return Gl("/api/programs/".concat(encodeURIComponent(e)))},cc=function(e,t,n){return a=n?"/api/programs/".concat(encodeURIComponent(e),"?copy=true"):"/api/programs/".concat(encodeURIComponent(e)),r={name:t},fetch(a,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(function(e){return e.json().then(function(t){return{json:t,response:e}})}).then(function(e){var t=e.json;return e.response.ok?t:Promise.reject(t)}).then(function(e){return{response:e}},function(e){return{error:e.message||e.error||"Something bad happened"}});var a,r},sc=n(97),ic=a,uc=Object(sc.a)(),dc=Ll.a.mark(Pc),pc=Ll.a.mark(Fc),mc=Ll.a.mark(Rc),fc=Ll.a.mark(jc),bc=Ll.a.mark(Sc),gc=Ll.a.mark(wc),hc=Ll.a.mark(_c),Oc=Ll.a.mark(xc),vc=Ll.a.mark(Nc),Ec=Ll.a.mark(Ic),yc=Ll.a.mark(Mc),Cc=V;function Pc(){var e,t,n;return Ll.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Ul.f)(Cc.request());case 2:return a.next=4,Object(Ul.b)(ic.fetchInterfaceConfig);case 4:if(e=a.sent,t=e.response,n=e.error,!t){a.next=12;break}return a.next=10,Object(Ul.f)(Cc.success(t));case 10:a.next=14;break;case 12:return a.next=14,Object(Ul.f)(Cc.failure(n));case 14:case"end":return a.stop()}},dc)}function Fc(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.c)(50);case 2:return e.next=4,Object(Ul.b)(Pc);case 4:case"end":return e.stop()}},pc)}function Rc(){var e,t,n;return Ll.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Ul.f)(ye.request());case 2:return a.next=4,Object(Ul.b)(ic.fetchConfigXml);case 4:if(e=a.sent,t=e.response,n=e.error,!t){a.next=12;break}return a.next=10,Object(Ul.f)(ye.success(t));case 10:a.next=14;break;case 12:return a.next=14,Object(Ul.f)(ye.failure(n));case 14:case"end":return a.stop()}},mc)}function jc(e){var t,n,a,r;return Ll.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.dashboard,o.next=3,Object(Ul.c)(500);case 3:return o.next=5,Object(Ul.h)(yt,t.i);case 5:if(t=o.sent,dn()(t)){o.next=21;break}return o.next=9,Object(Ul.f)(J.request());case 9:return o.next=11,Object(Ul.b)(ic.updateDashboard,t);case 11:if(n=o.sent,a=n.response,r=n.error,!a){o.next=19;break}return o.next=17,Object(Ul.f)(J.success(a));case 17:o.next=21;break;case 19:return o.next=21,Object(Ul.f)(J.failure(r));case 21:case"end":return o.stop()}},fc)}function Sc(e){var t,n,a,r,o;return Ll.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.dashboardId,n=e.cell,l.next=3,Object(Ul.c)(50);case 3:return l.next=5,Object(Ul.f)(z.request());case 5:return l.next=7,Object(Ul.b)(ic.createCell,t,n);case 7:if(a=l.sent,r=a.response,o=a.error,!r){l.next=15;break}return l.next=13,Object(Ul.f)(z.success(t,r));case 13:l.next=17;break;case 15:return l.next=17,Object(Ul.f)(z.failure(o));case 17:case"end":return l.stop()}},bc)}function wc(e){var t,n,a,r,o;return Ll.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.dashboardId,n=e.cellId,l.next=3,Object(Ul.c)(50);case 3:return l.next=5,Object(Ul.f)(H.request(t,n));case 5:return l.next=7,Object(Ul.b)(ic.deleteCell,t,n);case 7:if(a=l.sent,r=a.response,o=a.error,!r){l.next=15;break}return l.next=13,Object(Ul.f)(H.success(t,r));case 13:l.next=17;break;case 15:return l.next=17,Object(Ul.f)(H.failure(o));case 17:case"end":return l.stop()}},gc)}function _c(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.j)(W,jc);case 2:case"end":return e.stop()}},hc)}function xc(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.j)(G,Sc);case 2:case"end":return e.stop()}},Oc)}function Nc(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.j)(B,Fc);case 2:case"end":return e.stop()}},vc)}function Ic(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.j)(Q,wc);case 2:case"end":return e.stop()}},Ec)}function Mc(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.j)(Ee,Rc);case 2:case"end":return e.stop()}},yc)}var Tc=[Object(Ul.e)(Nc),Object(Ul.e)(_c),Object(Ul.e)(xc),Object(Ul.e)(Ic),Object(Ul.e)(Mc)],Dc=Ll.a.mark(Wc),kc=Ll.a.mark(Jc),Ac=Ll.a.mark(Xc),Lc=Ll.a.mark(Gc);function Uc(e,t){var n=t.split("&");if(n.length>3){var a=parseInt(n[0]),r=parseInt(n[1]),o=parseInt(n[2]),l=parseInt(n[3]),c=parseInt(n[4]),s=n[5].length,i=new ArrayBuffer(40+s),u=new DataView(i);u.setInt32(0,s,!0),u.setInt32(4,a,!0),u.setInt32(8,r,!0),u.setFloat64(16,o,!0),u.setInt32(24,l,!0),u.setInt32(32,c,!0);for(var d=0;d<s;d++)u.setUint8(40+d,n[5].charCodeAt(d));e.send(u.buffer)}}function Bc(e){return new Promise(function(t,n){var a=new WebSocket(e||window.location.origin.replace("https","wss").replace("http","ws"));a.onopen=function(){a.binaryType="arraybuffer",t(a)},a.onerror=function(e){n(e)}})}function Vc(e){return Object(yl.c)(function(t){e.onmessage=function(e){e.data instanceof ArrayBuffer&&t({data:e.data,type:ne})},e.onclose=function(){t(oe())},e.onerror=function(e){t(le(e.message))};return function(){e.onmessage=null,e.onerror=null}})}function Wc(e){var t,n,a;return Ll.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(Ul.i)(te);case 3:t=r.sent,n=t.cmd,a=t.id,r.t0=e.readyState,r.next=r.t0===WebSocket.CONNECTING?9:r.t0===WebSocket.OPEN?10:r.t0===WebSocket.CLOSING?11:r.t0===WebSocket.CLOSED?12:13;break;case 9:return r.abrupt("break",13);case 10:Uc(e,"get"===n?"0&1&"+a+"&0&0&"+n:"1&1&"+a+"&0&0&"+n);case 11:case 12:return r.abrupt("break",13);case 13:r.next=0;break;case 15:case"end":return r.stop()}},Dc)}function Jc(e){var t;return Ll.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0;case 1:return n.next=4,Object(Ul.i)(e);case 4:return t=n.sent,n.next=7,Object(Ul.f)(t);case 7:n.next=1;break;case 9:return n.prev=9,console.log("message channel closed"),n.finish(9);case 12:case"end":return n.stop()}},kc,null,[[0,,9,12]])}function Xc(e){return Ll.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ul.c)(5e3);case 2:return t.next=4,Object(Ul.f)(ae(e));case 4:case"end":return t.stop()}},Ac)}function Gc(){var e,t,n,a,r,o,l;return Ll.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=3,Object(Ul.i)($);case 3:return a=c.sent,r=a.url,c.prev=5,c.next=8,Object(Ul.b)(Bc,r);case 8:return e=c.sent,c.next=11,Object(Ul.b)(Vc,e);case 11:return t=c.sent,c.next=14,Object(Ul.f)(re());case 14:return c.next=16,Object(Ul.g)({internal:Object(Ul.b)(Wc,e),external:Object(Ul.b)(Jc,t),cancel:Object(Ul.i)(ee)});case 16:o=c.sent,l=o.cancel,n=l,c.next=26;break;case 21:return c.prev=21,c.t0=c.catch(5),console.log(c.t0),c.next=26,Object(Ul.f)(le(c.t0.message));case 26:return c.prev=26,e&&(e.close(),e=null),c.next=30,Object(Ul.f)(oe());case 30:if(t&&(t.close(),t=null),n){c.next=34;break}return c.next=34,Object(Ul.e)(Xc,r);case 34:return c.finish(26);case 35:c.next=0;break;case 37:case"end":return c.stop()}},Lc,null,[[5,21,26,35]])}var zc=[Object(Ul.e)(Gc)],qc=Ll.a.mark(Es),Qc=Ll.a.mark(ys),Hc=Ll.a.mark(Cs),Zc=Ll.a.mark(Ps),Yc=Ll.a.mark(Fs),Kc=Ll.a.mark(Rs),$c=Ll.a.mark(js),es=Ll.a.mark(Ss),ts=Ll.a.mark(ws),ns=Ll.a.mark(_s),as=Ll.a.mark(xs),rs=Ll.a.mark(Ns),os=Ll.a.mark(Is),ls=Ll.a.mark(Ms),cs=Ll.a.mark(Ts),ss=Ll.a.mark(Ds),is=Ll.a.mark(ks),us=Ll.a.mark(As),ds=Ll.a.mark(Ls),ps=Ll.a.mark(Us),ms=Ll.a.mark(Bs),fs=Ll.a.mark(Vs),bs=pe,gs=fe,hs=ge,Os=ue,vs=ve;function Es(){var e,t,n;return Ll.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Ul.f)(Os.request());case 2:return a.next=4,Object(Ul.b)(ic.fetchRobotModels);case 4:if(e=a.sent,t=e.response,n=e.error,!t){a.next=12;break}return a.next=10,Object(Ul.f)(Os.success(t));case 10:a.next=14;break;case 12:return a.next=14,Object(Ul.f)(Os.failure(n));case 14:case"end":return a.stop()}},qc)}function ys(){var e,t,n;return Ll.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Ul.f)(vs.request());case 2:return a.next=4,Object(Ul.b)(ic.fetchESIPath);case 4:if(e=a.sent,t=e.response,n=e.error,!t){a.next=12;break}return a.next=10,Object(Ul.f)(vs.success(t.path));case 10:a.next=14;break;case 12:return a.next=14,Object(Ul.f)(vs.failure(n));case 14:case"end":return a.stop()}},Qc)}function Cs(){var e,t,n;return Ll.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Ul.f)(Pe.request());case 2:return a.next=4,Object(Ul.b)(ic.fetchPrograms);case 4:if(e=a.sent,t=e.response,n=e.error,!t){a.next=12;break}return a.next=10,Object(Ul.f)(Pe.success(t));case 10:a.next=14;break;case 12:return a.next=14,Object(Ul.f)(Pe.failure(n));case 14:case"end":return a.stop()}},Hc)}function Ps(e){var t,n,a,r;return Ll.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.name,o.next=3,Object(Ul.f)(je.request());case 3:return o.next=5,Object(Ul.b)(ic.fetchProgram,t);case 5:if(n=o.sent,a=n.response,r=n.error,!a){o.next=13;break}return o.next=11,Object(Ul.f)(je.success(a));case 11:o.next=15;break;case 13:return o.next=15,Object(Ul.f)(je.failure(r));case 15:case"end":return o.stop()}},Zc)}function Fs(e){var t,n,a,r;return Ll.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.name,o.next=3,Object(Ul.f)(_e.request());case 3:return o.next=5,Object(Ul.b)(ic.createProgram,t);case 5:if(n=o.sent,a=n.response,r=n.error,!a){o.next=13;break}return o.next=11,Object(Ul.f)(_e.success(a));case 11:o.next=15;break;case 13:return o.next=15,Object(Ul.f)(_e.failure(r));case 15:case"end":return o.stop()}},Yc)}function Rs(e){var t,n,a,r,o;return Ll.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.name,n=e.program,l.next=3,Object(Ul.c)(500);case 3:return l.next=5,Object(Ul.f)(Ie.request(t,n));case 5:return l.next=7,Object(Ul.b)(ic.updateProgram,t,n);case 7:if(a=l.sent,r=a.response,o=a.error,!r){l.next=15;break}return l.next=13,Object(Ul.f)(Ie.success(r));case 13:l.next=17;break;case 15:return l.next=17,Object(Ul.f)(Ie.failure(o));case 17:case"end":return l.stop()}},Kc)}function js(e){var t,n,a,r;return Ll.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.name,o.next=3,Object(Ul.f)(Te.request());case 3:return o.next=5,Object(Ul.b)(ic.deleteProgram,t);case 5:if(n=o.sent,a=n.response,r=n.error,!a){o.next=13;break}return o.next=11,Object(Ul.f)(Te.success(a));case 11:o.next=15;break;case 13:return o.next=15,Object(Ul.f)(Te.failure(r));case 15:case"end":return o.stop()}},$c)}function Ss(e){var t,n,a,r,o,l;return Ll.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.name,n=e.newName,a=e.copy,c.next=3,Object(Ul.f)(Ae.request());case 3:return c.next=5,Object(Ul.b)(ic.renameProgram,t,n,a);case 5:if(r=c.sent,o=r.response,l=r.error,!o){c.next=13;break}return c.next=11,Object(Ul.f)(Ae.success(t,o,a));case 11:c.next=15;break;case 13:return c.next=15,Object(Ul.f)(Ae.failure(l));case 15:case"end":return c.stop()}},es)}function ws(e){var t,n,a,r,o,l;return Ll.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.brand,n=e.model,a=e.part,c.next=3,Object(Ul.f)(bs.request());case 3:return c.next=5,Object(Ul.b)(ic.deleteRobotModelPart,t,n,a);case 5:if(r=c.sent,o=r.response,l=r.error,!o){c.next=13;break}return c.next=11,Object(Ul.f)(bs.success(o));case 11:c.next=15;break;case 13:return c.next=15,Object(Ul.f)(bs.failure(l));case 15:case"end":return c.stop()}},ts)}function _s(e){var t,n,a,r,o;return Ll.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.brand,n=e.model,l.next=3,Object(Ul.f)(gs.request());case 3:return l.next=5,Object(Ul.b)(ic.deleteRobotModel,t,n);case 5:if(a=l.sent,r=a.response,o=a.error,!r){l.next=13;break}return l.next=11,Object(Ul.f)(gs.success(r));case 11:l.next=15;break;case 13:return l.next=15,Object(Ul.f)(gs.failure(o));case 15:case"end":return l.stop()}},ns)}function xs(e){var t,n,a,r;return Ll.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.model,o.next=3,Object(Ul.f)(hs.request());case 3:return o.next=5,Object(Ul.b)(ic.createRobotModel,t);case 5:if(n=o.sent,a=n.response,r=n.error,!a){o.next=13;break}return o.next=11,Object(Ul.f)(hs.success(a));case 11:o.next=15;break;case 13:return o.next=15,Object(Ul.f)(hs.failure(r));case 15:case"end":return o.stop()}},as)}function Ns(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.j)(ie,Es);case 2:case"end":return e.stop()}},rs)}function Is(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.j)(de,ws);case 2:case"end":return e.stop()}},os)}function Ms(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.j)(me,_s);case 2:case"end":return e.stop()}},ls)}function Ts(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.j)(be,xs);case 2:case"end":return e.stop()}},cs)}function Ds(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.j)(Oe,ys);case 2:case"end":return e.stop()}},ss)}function ks(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.j)(Ce,Cs);case 2:case"end":return e.stop()}},is)}function As(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.j)(Re,Ps);case 2:case"end":return e.stop()}},us)}function Ls(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.j)(we,Fs);case 2:case"end":return e.stop()}},ds)}function Us(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.j)(Ne,Rs);case 2:case"end":return e.stop()}},ps)}function Bs(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.j)(Me,js);case 2:case"end":return e.stop()}},ms)}function Vs(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.j)(ke,Ss);case 2:case"end":return e.stop()}},fs)}var Ws=[Object(Ul.e)(Ns),Object(Ul.e)(Is),Object(Ul.e)(Ms),Object(Ul.e)(Ts),Object(Ul.e)(Ds),Object(Ul.e)(ks),Object(Ul.e)(As),Object(Ul.e)(Ls),Object(Ul.e)(Us),Object(Ul.e)(Bs),Object(Ul.e)(Vs)],Js=Ll.a.mark(Gs),Xs=Ll.a.mark(zs);function Gs(){var e,t;return Ll.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(Ul.i)(Y);case 3:return e=n.sent,t=e.pathname,n.next=7,uc.push(t);case 7:n.next=0;break;case 9:case"end":return n.stop()}},Js)}function zs(){return Ll.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ul.a)([].concat(Object(b.a)(Tc),Object(b.a)(zc),Object(b.a)(Ws),[Object(Ul.e)(Gs)]));case 2:case"end":return e.stop()}},Xs)}var qs=n(1266),Qs=(n(560),n(561),qs.a.Option,function(e){var t=Object(yl.b)(),n=Object(El.e)(Dl,e,kl(Object(El.a)(t)));return n.runSaga=t.run,n.close=function(){return n.dispatch(yl.a)},n}());Qs.runSaga(zs);Object(l.render)(o.a.createElement(s.a,{store:Qs},o.a.createElement(v.a,{prefixCls:"rchmi"},o.a.createElement(c.b,{history:uc},o.a.createElement(c.a,{path:"/",component:vl})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},556:function(e,t,n){e.exports=n.p+"static/media/six_axes.090ff2c1.png"},557:function(e,t,n){e.exports=n.p+"static/media/seven_axes.10605d29.png"},560:function(e,t,n){},561:function(e,t,n){},563:function(e,t,n){e.exports=n(1256)}},[[563,1,2]]]);
//# sourceMappingURL=main.731739c2.chunk.js.map